<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--

    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE- 2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
  <head>
    <title>Apache Felix - Apache Felix OSGi Bundle Repository (OBR)</title>
    <link rel="icon" href="/res/favicon.ico">
    <link rel="stylesheet" href="/res/site.css" type="text/css" media="all">
    <link rel="stylesheet" href="/res/codehilite.css" type="text/css" media="all">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  </head>
  <body>
    <div class="title">
      <div class="logo">
        <a href="http://felix.apache.org/">
          <img border="0" alt="Apache Felix" src="/res/logo.png">
        </a>
      </div>
      <div class="header">
        <a href="http://www.apache.org/">
          <img border="0" alt="Apache" src="/res/apache.png">
        </a>
      </div>
    </div>
    
    <div class="menu"> 
      <style type="text/css">
/* The following code is added by mdx_elementid.py
   It was originally lifted from http://subversion.apache.org/style/site.css */
/*
 * Hide class="elementid-permalink", except when an enclosing heading
 * has the :hover property.
 */
.headerlink, .elementid-permalink {
  visibility: hidden;
}
h2:hover > .headerlink, h3:hover > .headerlink, h1:hover > .headerlink, h6:hover > .headerlink, h4:hover > .headerlink, h5:hover > .headerlink, dt:hover > .elementid-permalink { visibility: visible }</style>
<p><a href="/news.html">News</a>  <br />
<a href="/license.html">License</a>  <br />
<a href="/downloads.cgi">Downloads</a>  <br />
<a href="/documentation.html">Documentation</a>  <br />
<a href="/mailinglists.html">Mailing Lists</a>  <br />
<a href="/documentation/community/contributing.html">Contributing</a>  <br />
<a href="/sitemap.html">Site Map</a>  <br />
<a href="http://www.apache.org/">ASF</a>  <br />
<a href="http://www.apache.org/security/">Security</a>  <br />
<a href="http://www.apache.org/foundation/sponsorship.html">Sponsorship</a>  <br />
<a href="http://www.apache.org/foundation/thanks.html">Sponsors</a>    </p>
<iframe
    src="http://www.apache.org/ads/button.html"
    style="border-width:0; float: left"
    frameborder="0"
    scrolling="no"
    width="135"
    height="135">
</iframe>
    </div>
    
    <div class="main">
      <div class="breadcrump" style="font-size: 80%;">
        <a href="/">Home</a>&nbsp;&raquo&nbsp;<a href="/documentation.html">Documentation</a>&nbsp;&raquo&nbsp;<a href="/documentation/subprojects.html">Apache Felix Subproject Documentation</a>
      </div>

      <h1>Apache Felix OSGi Bundle Repository (OBR)</h1>
      <style type="text/css">
/* The following code is added by mdx_elementid.py
   It was originally lifted from http://subversion.apache.org/style/site.css */
/*
 * Hide class="elementid-permalink", except when an enclosing heading
 * has the :hover property.
 */
.headerlink, .elementid-permalink {
  visibility: hidden;
}
h2:hover > .headerlink, h3:hover > .headerlink, h1:hover > .headerlink, h6:hover > .headerlink, h4:hover > .headerlink, h5:hover > .headerlink, dt:hover > .elementid-permalink { visibility: visible }</style>
<div class="toc">
<ul>
<li><a href="#motivation">Motivation</a></li>
<li><a href="#overview">Overview</a></li>
<li><a href="#obr-repository-file">OBR Repository File</a></li>
<li><a href="#obr-service-api">OBR Service API</a></li>
<li><a href="#obr-shell-command">OBR Shell Command</a><ul>
<li><a href="#obr-help">obr help</a></li>
<li><a href="#obr-list-url">obr list-url</a></li>
<li><a href="#obr-add-url">obr add-url</a></li>
<li><a href="#obr-remove-url">obr remove-url</a></li>
<li><a href="#obr-list">obr list</a></li>
<li><a href="#obr-info">obr info</a></li>
<li><a href="#obr-deploy">obr deploy</a></li>
<li><a href="#obr-start">obr start</a></li>
<li><a href="#obr-source">obr source</a></li>
<li><a href="#obr-javadoc">obr javadoc</a></li>
</ul>
</li>
<li><a href="#using-obr-with-a-proxy">Using OBR with a Proxy</a></li>
<li><a href="#bundle-source-packaging">Bundle Source Packaging</a></li>
<li><a href="#note-on-osgi-r3-bundles">Note on OSGi R3 Bundles</a></li>
<li><a href="#feedback">Feedback</a></li>
</ul>
</div>
<h2 id="motivation">Motivation<a class="headerlink" href="#motivation" title="Permanent link">&para;</a></h2>
<p>The goal of the Apache Felix OSGi Bundle Repository (OBR) is two-fold:</p>
<ol>
<li>To simplify deploying and using available bundles with Felix.</li>
<li>To encourage independent bundle development so that communities of interest can grow.</li>
</ol>
<p>OBR achieves the first goal by providing a service that can automatically install a bundle, with its deployment dependencies, from a bundle repository. This makes it easier for people to experiment with existing bundles. The second goal is achieved by raising the visibility of the available bundles and providing access to both the executable bundle and its source code. Hopefully, by making OBR and the bundles themselves more visible, community members will be encouraged to provide or improve service implementations.</p>
<p>Note: OBR provides access to the Felix' default bundle repository, but you can also use it to deploy your own bundles by creating a bundle repository meta-data file for your local bundles; see the <code>obr list-url</code>, <code>obr add-url</code>, and <code>obr remove-url</code> commands for more details.</p>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>As of release 2.0.x Felix OBR also supports the OSGi Repository 1.0 specification. Chapter 132 in the <a href="http://www.osgi.org/Download/Release5">OSGi R5 Enterprise specification</a>. A client can look up the <a href="http://www.osgi.org/javadoc/r5/enterprise/org/osgi/service/repository/package-summary.html">OSGi Repository Service</a> in the service registry to interact with Felix OBR in a specification compliant way.</p>
<p>For the most part, OBR is quite simple. An OBR "repository server" is not necessary, since all functionality may reside on the client side. OBR is able to provide its functionality by reading an XML-based meta-data file that describes the bundles available to it. The meta-data file essentially contains an XML encoding of the bundles' manifest information. From the meta-data, OBR is able to construct dependency information for deploying (i.e., installing and updating) bundles.</p>
<p>OBR defines the following entities:</p>
<ul>
<li><strong>Repository Admin</strong> - a service to access a federation of repositories.</li>
<li><strong>Repository</strong> - provides access to a set of resources.</li>
<li><strong>Resource</strong> - a description of an artifact to be installed on a device.</li>
<li><strong>Capability</strong> - a named set of properties.</li>
<li><strong>Requirement</strong> - an assertion on a capability.</li>
<li><strong>Resolver</strong> - an object to resolve resource dependencies and to deploy them.</li>
<li><strong>Repository file</strong> - XML file containing resource meta-data.</li>
</ul>
<p>The following diagram illustrates the relationships among these entities:</p>
<p><img alt="alt text" src="obr-entities.png" /></p>
<p>The client has access to a federated set of repositories via the Repository Admin service; such as depicted in this view:</p>
<p><img alt="alt text" src="obr-high-level.png" /></p>
<h2 id="obr-repository-file">OBR Repository File<a class="headerlink" href="#obr-repository-file" title="Permanent link">&para;</a></h2>
<p>The OBR repository file is an XML-based representation of bundle meta-data. The goal is provide a generic model for describing dependencies among resources; as such, the term <strong>resource</strong> is used instead of <strong>bundle</strong> in the OBR repository syntax. As of OBR release 2.0.2 two forms of metadata are supported:</p>
<ul>
<li>Repository XML as defined by the OSGi Repository Specification 1.0. Such an XML file is in the http://www.osgi.org/xmlns/repository/v1.0.0 name space.</li>
<li>A Felix OBR-specific metadata format is also supported. This format predates the format from the specification.</li>
</ul>
<p>A detailed description of the standard XML format is described in chapter 132 in the <a href="http://www.osgi.org/Download/Release5">OSGi R5 Enterprise specification</a>. The following XML snippet depicts the overall structure of a repository file, using the proprietary Felix OBR format:</p>
<div class="codehilite"><pre><span class="nt">&lt;repository</span> <span class="na">presentationname=</span><span class="s">&quot;...&quot;</span> <span class="na">symbolicname=</span><span class="s">&quot;...&quot;</span> <span class="err">...</span> <span class="nt">&gt;</span>
    <span class="nt">&lt;resource&gt;</span>
        <span class="nt">&lt;description&gt;</span>...<span class="nt">&lt;/description&gt;</span>
        <span class="nt">&lt;size&gt;</span>...<span class="nt">&lt;/size&gt;</span>
        <span class="nt">&lt;documentation&gt;</span>...<span class="nt">&lt;/documentation&gt;</span>
        <span class="nt">&lt;source&gt;</span>...<span class="nt">&lt;/source&gt;</span>
        <span class="nt">&lt;category</span> <span class="na">id=</span><span class="s">&quot;...&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;capability&gt;</span>...<span class="nt">&lt;/capability&gt;</span>
        ...
        <span class="nt">&lt;requirement&gt;</span>...<span class="nt">&lt;/requirement&gt;</span>
        ...
    <span class="nt">&lt;/resource&gt;</span>
    ...
<span class="nt">&lt;/repository&gt;</span>
</pre></div>


<p>The above repository defines a set of available resources, each described by a set of meta-data. Some resource meta-data is purely intended for human consumption; the most important aspects relate to the generic capability/requirement model.</p>
<p>A resource can provide any number of capabilities. A capability is a typed set of properties. For example, the following is an exported package capability:</p>
<div class="codehilite"><pre><span class="nt">&lt;capability</span> <span class="na">name=</span><span class="s">&#39;package&#39;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;p</span> <span class="na">n=</span><span class="s">&#39;package&#39;</span> <span class="na">v=</span><span class="s">&#39;org.foo.bar&#39;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;p</span> <span class="na">n=</span><span class="s">&#39;version&#39;</span> <span class="na">t=</span><span class="s">&#39;version&#39;</span> <span class="na">v=</span><span class="s">&#39;1.0.0&#39;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/capability&gt;</span>
</pre></div>


<p>This capability is of type 'package' and exports 'org.foo.bar' at version '1.0.0'. Conversely, a requirement is a typed LDAP query over a set of capability properties. For example, the following is an imported package requirement:</p>
<div class="codehilite"><pre><span class="nt">&lt;require</span> <span class="na">name=</span><span class="s">&#39;package&#39;</span> <span class="na">extend=</span><span class="s">&#39;false&#39;</span>
    <span class="na">multiple=</span><span class="s">&#39;false&#39;</span> <span class="na">optional=</span><span class="s">&#39;false&#39;</span>
    <span class="na">filter=</span><span class="s">&#39;(&amp;amp;(package=org.foo.bar)(version&amp;gt;=1.0.0))&#39;</span><span class="nt">&gt;</span>
    Import package org.foo.bar
<span class="nt">&lt;/require&gt;</span>
</pre></div>


<p>This requirement is of type 'package' and imports 'org.foo.bar' at versions greater than '1.0.0'. Although this syntax looks rather complicated with the '\&amp;' and '\&gt;=' syntax, it is simply the standard OSGi LDAP query syntax in XML form (additionally, Peter Kriens has created a tool called <code>bindex</code> to generate this meta-data from a bundle's manifest).</p>
<p>With this generic dependency model, OBR is able to provide mappings for the various OSGi bundle dependencies; e.g., import/export package, provide/require bundle, host/fragment, import/export service, execution environment, and native code. In addition, it is possible for bundles to introduce arbitrary dependencies for custom purposes.</p>
<p>Two other important pieces of meta-data are <code>Bundle-SymbolicName</code> and <code>Bundle-Version</code>; these are standard OSGi bundle manifest attributes that OBR uses to uniquely identify a bundle. For example, if you want to use OBR to update a locally installed bundle, OBR gets its symbolic name and version and searches the repository metadata for a matching symbolic name. If the matching symbolic name is found, then OBR checks if there is a newer version than the local copy using the bundle version number. Thus, the symbolic name plus bundle version forms a unique key to match locally installed bundles to remotely available bundles.</p>
<h2 id="obr-service-api">OBR Service API<a class="headerlink" href="#obr-service-api" title="Permanent link">&para;</a></h2>
<p>Typically, OBR service clients only need to interact with the Repository Admin service, which provides the mechanisms necessary to discover available resources. The Repository Admin interface is defined as follows:</p>
<div class="codehilite"><pre><span class="n">public</span> <span class="n">interface</span> <span class="n">RepositoryAdmin</span>
<span class="p">{</span>
    <span class="n">public</span> <span class="n">Resource</span><span class="p">[]</span> <span class="n">discoverResources</span><span class="p">(</span><span class="n">String</span> <span class="n">filterExpr</span><span class="p">);</span>
    <span class="n">public</span> <span class="n">Resolver</span> <span class="n">resolver</span><span class="p">();</span>
    <span class="n">public</span> <span class="n">Repository</span> <span class="n">addRepository</span><span class="p">(</span><span class="n">URL</span> <span class="n">repository</span><span class="p">)</span>?
        <span class="n">throws</span> <span class="n">Exception</span><span class="p">;</span>
    <span class="n">public</span> <span class="n">boolean</span> <span class="n">removeRepository</span><span class="p">(</span><span class="n">URL</span> <span class="n">repository</span><span class="p">);</span>
    <span class="n">public</span> <span class="n">Repository</span><span class="p">[]</span> <span class="n">listRepositories</span><span class="p">();</span>
    <span class="n">public</span> <span class="n">Resource</span> <span class="n">getResource</span><span class="p">(</span><span class="n">String</span> <span class="n">respositoryId</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<p>In order to resolve and deploy available resources, the Repository Admin provides Resolver instances, which are defined as follows:</p>
<div class="codehilite"><pre><span class="n">public</span> <span class="n">interface</span> <span class="n">Resolver</span>
<span class="p">{</span>
    <span class="n">public</span> <span class="n">void</span> <span class="n">add</span><span class="p">(</span><span class="n">Resource</span> <span class="n">resource</span><span class="p">);</span>
    <span class="n">public</span> <span class="n">Requirement</span><span class="p">[]</span> <span class="n">getUnsatisfiedRequirements</span><span class="p">();</span>
    <span class="n">public</span> <span class="n">Resource</span><span class="p">[]</span> <span class="n">getOptionalResources</span><span class="p">();</span>
    <span class="n">public</span> <span class="n">Requirement</span><span class="p">[]</span> <span class="n">getReason</span><span class="p">(</span><span class="n">Resource</span> <span class="n">resource</span><span class="p">);</span>
    <span class="n">public</span> <span class="n">Resource</span><span class="p">[]</span> <span class="n">getResources</span><span class="p">(</span><span class="n">Requirement</span> <span class="n">requirement</span><span class="p">);</span>
    <span class="n">public</span> <span class="n">Resource</span><span class="p">[]</span> <span class="n">getRequiredResources</span><span class="p">();</span>
    <span class="n">public</span> <span class="n">Resource</span><span class="p">[]</span> <span class="n">getAddedResources</span><span class="p">();</span>
    <span class="n">public</span> <span class="n">boolean</span> <span class="n">resolve</span><span class="p">();</span>
    <span class="n">public</span> <span class="n">void</span> <span class="n">deploy</span><span class="p">(</span><span class="n">boolean</span> <span class="n">start</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<p>When desired resources are discovered via the query mechanisms of the Repository Admin, they are added to a Resolver instance which will can be used to resolve all transitive dependencies and to reflect on any resolution result. The following code snippet depicts a typical usage scenario:</p>
<div class="codehilite"><pre><span class="n">RepositoryAdmin</span> <span class="n">repoAdmin</span> <span class="p">=</span> <span class="p">...</span> <span class="o">//</span> <span class="n">Get</span> <span class="n">repo</span> <span class="n">admin</span> <span class="n">service</span>
<span class="n">Resolver</span> <span class="n">resolver</span> <span class="p">=</span> <span class="n">repoAdmin</span><span class="p">.</span><span class="n">resolver</span><span class="p">();</span>
<span class="n">Resource</span> <span class="n">resource</span> <span class="p">=</span> <span class="n">repoAdmin</span><span class="p">.</span><span class="n">discoverResources</span><span class="p">(</span><span class="n">filterStr</span><span class="p">);</span>
<span class="n">resolver</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">resource</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">resolver</span><span class="p">.</span><span class="n">resolve</span><span class="p">())</span>
<span class="p">{</span>
    <span class="n">resolver</span><span class="p">.</span><span class="n">deploy</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
    <span class="n">Requirement</span><span class="p">[]</span> <span class="n">reqs</span> <span class="p">=</span> <span class="n">resolver</span><span class="p">.</span><span class="n">getUnsatisfiedRequirements</span><span class="p">();</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">int</span> <span class="nb">i</span> <span class="p">=</span> 0<span class="p">;</span> <span class="nb">i</span> <span class="o">&lt;</span> <span class="n">reqs</span><span class="p">.</span><span class="nb">length</span><span class="p">;</span> <span class="nb">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span>&quot;<span class="n">Unable</span> <span class="n">to</span> <span class="n">resolve</span><span class="p">:</span> &quot; <span class="o">+</span> <span class="n">reqs</span><span class="p">[</span><span class="nb">i</span><span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>This code gets the Repository Admin service and then gets a Resolver instance from it. It then discovers an available resource and adds it to the resolver. Then it tries to resolve the resources dependencies. If successful it deploys the resource to the local framework instance; if not successful it prints the unsatisfied requirements.</p>
<p>OBR's deployment algorithm appears simple at first glance, but it is actually somewhat complex due to the nature of deploying independently developed bundles. For example, in an ideal world, if an update for a bundle is made available, then updates for all of the bundles satisfying its dependencies are also made available. Unfortunately, this may not be the case, thus the deployment algorithm might have to install new bundles during an update to satisfy either new dependencies or updated dependencies that can no longer be satisfied by existing local bundles. In response to this type of scenario, the OBR deployment algorithm tries to favor updating existing bundles, if possible, as opposed to installing new bundles to satisfy dependencies.</p>
<p>In the general case, OBR user's will not use the OBR API directly, but will use its functionality indirectly from another tool or user interface. For example, interactive access to OBR is available via a command for Felix' <a href="/documentation/subprojects/apache-felix-shell.html">shell service</a>. The OBR shell command is discussed in the next section.</p>
<h2 id="obr-shell-command">OBR Shell Command<a class="headerlink" href="#obr-shell-command" title="Permanent link">&para;</a></h2>
<p>Besides providing a service API, OBR implements a Felix shell command for accessing its functionality. For the end user, the OBR shell command is accessed using the text-based or GUI-based user interfaces for Felix' shell service. This section describes the syntax for the OBR shell command.</p>
<h3 id="obr-help">obr help<a class="headerlink" href="#obr-help" title="Permanent link">&para;</a></h3>
<p>Syntax:</p>
<div class="codehilite"><pre><span class="n">obr</span> <span class="n">help</span> <span class="p">[</span><span class="n">add</span><span class="o">-</span><span class="n">url</span> <span class="o">|</span> <span class="n">remove</span><span class="o">-</span><span class="n">url</span> <span class="o">|</span> <span class="n">list</span><span class="o">-</span><span class="n">url</span> <span class="o">|</span> <span class="n">list</span> <span class="o">|</span> <span class="n">info</span> <span class="o">|</span> <span class="n">deploy</span> <span class="o">|</span> <span class="n">start</span> <span class="o">|</span> <span class="n">source</span> <span class="o">|</span> <span class="n">javadoc</span><span class="p">]</span>
</pre></div>


<p>This command is used to display additional information about the other OBR commands.</p>
<h3 id="obr-list-url">obr list-url<a class="headerlink" href="#obr-list-url" title="Permanent link">&para;</a></h3>
<p>Syntax:</p>
<div class="codehilite"><pre><span class="n">obr</span> <span class="n">list</span><span class="o">-</span><span class="n">url</span>
</pre></div>


<p>This command gets the URLs to the repository files used by the Repository Admin.</p>
<h3 id="obr-add-url">obr add-url<a class="headerlink" href="#obr-add-url" title="Permanent link">&para;</a></h3>
<p>Syntax:</p>
<div class="codehilite"><pre><span class="n">obr</span> <span class="n">add</span><span class="o">-</span><span class="n">url</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">repository</span><span class="o">-</span><span class="n">file</span><span class="o">-</span><span class="n">url</span><span class="o">&gt;</span> <span class="p">...]</span>
</pre></div>


<p>This command adds a repository file to the set of repository files for which the Repository Admin service provides access. The repository file is represented as a URL. If the repository file URL is already in the Repository Admin's set of repository files, the request is treated like a reload operation.</p>
<h3 id="obr-remove-url">obr remove-url<a class="headerlink" href="#obr-remove-url" title="Permanent link">&para;</a></h3>
<p>Syntax:</p>
<div class="codehilite"><pre><span class="n">obr</span> <span class="n">remove</span><span class="o">-</span><span class="n">url</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">repository</span><span class="o">-</span><span class="n">file</span><span class="o">-</span><span class="n">url</span><span class="o">&gt;</span> <span class="p">...]</span>
</pre></div>


<p>This command removes a repository file to the set of repository files for which the Repository Admin service provides access. The repository file is represented as a URL.</p>
<h3 id="obr-list">obr list<a class="headerlink" href="#obr-list" title="Permanent link">&para;</a></h3>
<p>Syntax:</p>
<div class="codehilite"><pre><span class="n">obr</span> <span class="n">list</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="p">...]</span>
</pre></div>


<p>This command lists bundles available in the bundle repository. If no arguments are specified, then all available bundles are listed, otherwise any arguments are concatenated with spaces and used as a substring filter on the bundle names.</p>
<h3 id="obr-info">obr info<a class="headerlink" href="#obr-info" title="Permanent link">&para;</a></h3>
<p>Syntax:</p>
<div class="codehilite"><pre><span class="n">obr</span> <span class="n">info</span> <span class="o">&lt;</span><span class="n">bundle</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">[;</span><span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="p">]</span> <span class="p">...</span>
</pre></div>


<p>This command displays the meta-data for the specified bundles. If a bundle's name contains spaces, then it must be surrounded by quotes. It is also possible to specify a precise version if more than one version exists, such as:</p>
<div class="codehilite"><pre><span class="n">obr</span> <span class="n">info</span> &quot;<span class="n">Bundle</span> <span class="n">Repository</span>&quot;<span class="p">;</span>1<span class="p">.</span>0<span class="p">.</span>0
</pre></div>


<p>The above example retrieves the meta-data for version "1.0.0" of the bundle named "Bundle Repository".</p>
<h3 id="obr-deploy">obr deploy<a class="headerlink" href="#obr-deploy" title="Permanent link">&para;</a></h3>
<p>Syntax:</p>
<div class="codehilite"><pre><span class="n">obr</span> <span class="n">deploy</span> <span class="o">&lt;</span><span class="n">bundle</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">[;</span><span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="p">]</span> <span class="p">...</span> <span class="o">|</span> <span class="o">&lt;</span><span class="n">bundle</span><span class="o">-</span><span class="n">id</span><span class="o">&gt;</span> <span class="p">...</span>
</pre></div>


<p>This command tries to install or update the specified bundles and all of their dependencies by default. You can specify either the bundle name or the bundle identifier. If a bundle's name contains spaces, then it must be surrounded by quotes. It is also possible to specify a precise version if more than one version exists, such as:</p>
<div class="codehilite"><pre><span class="n">obr</span> <span class="n">deploy</span> &quot;<span class="n">Bundle</span> <span class="n">Repository</span>&quot;<span class="p">;</span>1<span class="p">.</span>0<span class="p">.</span>0
</pre></div>


<p>For the above example, if version "1.0.0" of "Bundle Repository" is already installed locally, then the command will attempt to update it and all of its dependencies; otherwise, the command will install it and all of its dependencies.</p>
<h3 id="obr-start">obr start<a class="headerlink" href="#obr-start" title="Permanent link">&para;</a></h3>
<p>Syntax:</p>
<div class="codehilite"><pre><span class="n">obr</span> <span class="n">start</span> <span class="p">[</span><span class="o">-</span><span class="n">nodeps</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">bundle</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">[;</span><span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="p">]</span> <span class="p">...</span>
</pre></div>


<p>This command installs and starts the specified bundles and all of their dependencies by default; use the "-nodeps" switch to ignore dependencies. If a bundle's name contains spaces, then it must be surrounded by quotes. If a specified bundle is already installed, then this command has no effect. It is also possible to specify a precise version if more than one version exists, such as:</p>
<div class="codehilite"><pre><span class="n">obr</span> <span class="n">start</span> &quot;<span class="n">Bundle</span> <span class="n">Repository</span>&quot;<span class="p">;</span>1<span class="p">.</span>0<span class="p">.</span>0
</pre></div>


<p>The above example installs and starts the "1.0.0" version of the bundle named "Bundle Repository" and its dependencies.</p>
<h3 id="obr-source">obr source<a class="headerlink" href="#obr-source" title="Permanent link">&para;</a></h3>
<p>Syntax:</p>
<div class="codehilite"><pre><span class="n">obr</span> <span class="n">source</span> <span class="p">[</span><span class="o">-</span><span class="n">x</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">local</span><span class="o">-</span><span class="n">dir</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">bundle</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">[;</span><span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="p">]</span> <span class="p">...</span>
</pre></div>


<p>This command retrieves the source archives of the specified bundles and saves them to the specified local directory; use the "-x" switch to automatically extract the source archives. If a bundle name contains spaces, then it must be surrounded by quotes. It is also possible to specify a precise version if more than one version exists, such as:</p>
<div class="codehilite"><pre><span class="n">obr</span> <span class="n">source</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">rickhall</span><span class="o">/</span><span class="n">tmp</span> &quot;<span class="n">Bundle</span> <span class="n">Repository</span>&quot;<span class="p">;</span>1<span class="p">.</span>0<span class="p">.</span>0
</pre></div>


<p>The above example retrieves the source archive of version "1.0.0" of the bundle named "Bundle Repository" and saves it to the specified local directory.</p>
<h3 id="obr-javadoc">obr javadoc<a class="headerlink" href="#obr-javadoc" title="Permanent link">&para;</a></h3>
<p>Syntax:</p>
<div class="codehilite"><pre><span class="n">obr</span> <span class="n">javadoc</span> <span class="p">[</span><span class="o">-</span><span class="n">x</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">local</span><span class="o">-</span><span class="n">dir</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">bundle</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">[;</span><span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="p">]</span> <span class="p">...</span>
</pre></div>


<p>This command retrieves the javadoc archives of the specified bundles and saves them to the specified local directory; use the "-x" switch to automatically extract the javadoc archives. If a bundle name contains spaces, then it must be surrounded by quotes. It is also possible to specify a precise version if more than one version exists, such as:</p>
<div class="codehilite"><pre><span class="n">obr</span> <span class="n">javadoc</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">rickhall</span><span class="o">/</span><span class="n">tmp</span> &quot;<span class="n">Bundle</span> <span class="n">Repository</span>&quot;<span class="p">;</span>1<span class="p">.</span>0<span class="p">.</span>0
</pre></div>


<p>The above example retrieves the javadoc archive of version "1.0.0" of the bundle named "Bundle Repository" and saves it to the specified local directory.</p>
<h2 id="using-obr-with-a-proxy">Using OBR with a Proxy<a class="headerlink" href="#using-obr-with-a-proxy" title="Permanent link">&para;</a></h2>
<p>If you use a proxy for Web access, then OBR will not work for you in its default configuration; certain system properties must be set to enable OBR to work with a proxy. These properties are:</p>
<ul>
<li>http.proxyHost - the name of the proxy host.</li>
<li>http.proxyPort - the port of the proxy host.</li>
<li>http.proxyAuth - the user name and password to use when connecting to the proxy; this string should be the user name and password separated by a colon (e.g., rickhall:mypassword).</li>
</ul>
<p>These system properties can be set directly on the command line when starting the JVM using the standard "-D<prop>=<value>" syntax or you can put them in the lib/system.properties file of your Felix installation; see documentation on configuring Felix for more information.</p>
<h2 id="bundle-source-packaging">Bundle Source Packaging<a class="headerlink" href="#bundle-source-packaging" title="Permanent link">&para;</a></h2>
<p>Coming soon...</p>
<h2 id="note-on-osgi-r3-bundles">Note on OSGi R3 Bundles<a class="headerlink" href="#note-on-osgi-r3-bundles" title="Permanent link">&para;</a></h2>
<p>In contrast to OSGi R4 the previous specifications, most notably R3, allowed bundles without the <code>Bundle-SymbolicName</code> header. The Felix OSGi Bundle Repository implementation heavily relies on the symbolic name being defined in bundles. As a consequence bundles without a symbolic name are not fully supported by the Bundle Repository:</p>
<ul>
<li>Bundles installed in the framework are used by the Bundle Repository implementation to resolve dependencies regardless of whether they have a <code>Bundle-SymbolicName</code> header or not. Resolution of dependencies against the installed bundles takes place based on the <code>Export-Package</code> headers.</li>
<li>Bundles installed in the framework without a <code>Bundle-SymbolicName</code> header cannot be updated by the Bundle Repository implementation because updates from the bundle repository cannot be correlated to such "anonymous" bundles.</li>
</ul>
<h2 id="feedback">Feedback<a class="headerlink" href="#feedback" title="Permanent link">&para;</a></h2>
<p>Subscribe to the Felix users mailing list by sending a message to <a href="">users-subscribe@felix.apache.org</a>; after subscribing, email questions or feedback to [users@felix.apache.org|mailto:users@felix.apache.org].</p>
      <div class="timestamp" style="margin-top: 30px; font-size: 80%; text-align: right;">
        Rev. 1712598 by cziegeler on Wed, 4 Nov 2015 17:48:20 +0000
      </div>
      <div class="trademarkFooter"> 
        Apache Felix, Felix, Apache, the Apache feather logo, and the Apache Felix project
        logo are trademarks of The Apache Software Foundation. All other marks mentioned
        may be trademarks or registered trademarks of their respective owners.
      </div>
    </div>
  </body>
</html>
