<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!--

    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE- 2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
  <head>
    <title>Apache Felix - Integrating Felix with Eclipse</title>
    <link rel="icon" href="/res/favicon.ico">
    <link rel="stylesheet" href="/res/site.css" type="text/css" media="all">
    <link rel="stylesheet" href="/res/codehilite.css" type="text/css" media="all">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  </head>
  <body>
    <div class="title">
      <div class="logo">
        <a href="http://felix.apache.org/">
          <img border="0" alt="Apache Felix" src="/res/logo.png">
        </a>
      </div>
      <div class="header">
        <a href="http://www.apache.org/">
          <img border="0" alt="Apache" src="/res/apache.png">
        </a>
      </div>
    </div>
    
    <div class="menu"> 
      <style type="text/css">
/* The following code is added by mdx_elementid.py
   It was originally lifted from http://subversion.apache.org/style/site.css */
/*
 * Hide class="elementid-permalink", except when an enclosing heading
 * has the :hover property.
 */
.headerlink, .elementid-permalink {
  visibility: hidden;
}
h2:hover > .headerlink, h3:hover > .headerlink, h1:hover > .headerlink, h6:hover > .headerlink, h4:hover > .headerlink, h5:hover > .headerlink, dt:hover > .elementid-permalink { visibility: visible }</style>
<p><a href="/news.html">News</a>  <br />
<a href="/license.html">License</a>  <br />
<a href="/downloads.cgi">Downloads</a>  <br />
<a href="/documentation.html">Documentation</a>  <br />
<a href="/mailinglists.html">Mailing Lists</a>  <br />
<a href="/documentation/community/contributing.html">Contributing</a>  <br />
<a href="/sitemap.html">Site Map</a>  <br />
<a href="http://www.apache.org/">ASF</a>  <br />
<a href="http://www.apache.org/security/">Security</a>  <br />
<a href="http://www.apache.org/foundation/sponsorship.html">Sponsorship</a>  <br />
<a href="http://www.apache.org/foundation/thanks.html">Sponsors</a>    </p>
<iframe
    src="http://www.apache.org/ads/button.html"
    style="border-width:0; float: left"
    frameborder="0"
    scrolling="no"
    width="135"
    height="135">
</iframe>
    </div>
    
    <div class="main">
      <div class="breadcrump" style="font-size: 80%;">
        <a href="/">Home</a>&nbsp;&raquo&nbsp;<a href="/documentation.html">Documentation</a>&nbsp;&raquo&nbsp;<a href="/documentation/development.html">Development</a>
      </div>

      <h1>Integrating Felix with Eclipse</h1>
      <style type="text/css">
/* The following code is added by mdx_elementid.py
   It was originally lifted from http://subversion.apache.org/style/site.css */
/*
 * Hide class="elementid-permalink", except when an enclosing heading
 * has the :hover property.
 */
.headerlink, .elementid-permalink {
  visibility: hidden;
}
h2:hover > .headerlink, h3:hover > .headerlink, h1:hover > .headerlink, h6:hover > .headerlink, h4:hover > .headerlink, h5:hover > .headerlink, dt:hover > .elementid-permalink { visibility: visible }</style>
<p>This document explains how to launch Felix inside the Eclipse IDE. Then, it is possible to use Eclipse debugging facilities to debug bundles.</p>
<h2 id="preliminaries">Preliminaries<a class="headerlink" href="#preliminaries" title="Permanent link">&para;</a></h2>
<p>To integrate Felix inside Eclipse, you need Felix, Eclipse and nothing else.</p>
<h3 id="installing-eclipse">Installing Eclipse<a class="headerlink" href="#installing-eclipse" title="Permanent link">&para;</a></h3>
<p>First, you need Eclipse. To download the Eclipse IDE, go to:<a href="http://www.eclipse.org/downloads/">http://www.eclipse.org/downloads/</a>. This tutorial works for Eclipse 3.X.X, but may works on older version.</p>
<h3 id="creation-of-the-felix-binaries">Creation of the Felix binaries<a class="headerlink" href="#creation-of-the-felix-binaries" title="Permanent link">&para;</a></h3>
<p>To integrate Felix inside Eclipse, you have three possibilities
<em> Using Pax Cursor to launch easily any supported OSGi framework inside Eclipse.
</em> Integrating the Felix release as a Java project
* Integrating the Felix trunk (latest version) as a Java project</p>
<h4 id="using-pax-cursor">Using Pax Cursor<a class="headerlink" href="#using-pax-cursor" title="Permanent link">&para;</a></h4>
<p><a href="http://wiki.ops4j.org/confluence/display/ops4j/Pax+Cursor">Pax Cursor</a> is an Eclipse Plugin that adds Eclipse launch configurations for all platforms / versions supported by Pax Runner.</p>
<h4 id="usign-the-felix-release-as-a-java-project">Usign the Felix release as a Java Project<a class="headerlink" href="#usign-the-felix-release-as-a-java-project" title="Permanent link">&para;</a></h4>
<p>Once, Eclipse is installed, you need to download Felix. You will find this Felix release on <a href="http://felix.apache.org/site/downloads.cgi">http://felix.apache.org/site/downloads.cgi</a>. Choose a binary release in your preferred archive format. Then, unzip the release in a temporary folder. We will copy the files elsewhere later.</p>
<h4 id="building-and-using-the-felix-trunk">Building and Using the Felix Trunk<a class="headerlink" href="#building-and-using-the-felix-trunk" title="Permanent link">&para;</a></h4>
<p>If you want to use the Felix trunk, follows the <a href="http://felix.apache.org/site/building-felix.html">instructions</a> to checkout and build it. The Felix binaries are created in the <em>main</em> project.  We will copy the files elsewhere later.</p>
<h2 id="installing-felix">Installing Felix<a class="headerlink" href="#installing-felix" title="Permanent link">&para;</a></h2>
<p>The integration uses a Java project. This project will contain Felix. This section explains how-to create the new project, how-to copy the Felix release inside the project and finally, how-to configure it.</p>
<h3 id="creation-of-the-felix-java-project">Creation of the Felix Java project<a class="headerlink" href="#creation-of-the-felix-java-project" title="Permanent link">&para;</a></h3>
<p>First, launch Eclipse, and select your preferred workspace. The integration will be attached to this workspace.</p>
<p>Then, click on File -&gt; New -&gt; Project... as depicts on the Figure 1.</p>
<p>!new<em>project</em>1.png!
{color:#4f81bd}{<em>}Figure{</em>}{color}{color:#4f81bd} {<em>}1{</em>}{color}{color:#4f81bd}<em>: Creation of a new project{</em>}{color}</p>
<p>This action will launch the project creation wizard. Select Java project (Figure 2), and click on "Next".</p>
<p>!new<em>project</em>2.png!
{color:#4f81bd}{<em>}Figure{</em>}{color}{color:#4f81bd} {<em>}2{</em>}{color}{color:#4f81bd}<em>: Selection of the project type{</em>}{color}</p>
<p>Enter the project name (Felix for example). Select the "create separate source and output folders" option (if not already selected). These actions are depicted on the Figure 3. Then click on "Next".</p>
<p>!new<em>project</em>3.png!
{color:#4f81bd}{<em>}Figure{</em>}{color}{color:#4f81bd} {<em>}3{</em>}{color}{color:#4f81bd}<em>: Configuration of the Felix project{</em>}{color}</p>
<p>On this new wizard page, you need only to change the default output folder (Felix/bin) to another (classes for example, as presented on Figure 4).</p>
<p>!new<em>project</em>4.png!
{color:#4f81bd}{<em>}Figure{</em>}{color}{color:#4f81bd} {<em>}4{</em>}{color}{color:#4f81bd}<em color="color">: Change the "Default output folder"</em></p>
<p>After that, click on the "Finish" button. You need to see the following structure (Figure 5). Check that the <em>bin</em> folder appears.</p>
<p>!new<em>project</em>5.png!
{color:#4f81bd}{<em>}Figure 5: Our new Java Project{</em>}{color}</p>
<h3 id="copying-felix-inside-the-created-project">Copying Felix inside the created project<a class="headerlink" href="#copying-felix-inside-the-created-project" title="Permanent link">&para;</a></h3>
<p>Now, remember where you uncompress the Felix release, or where is the Felix main project. Move these files inside the created project. Override the <em>bin</em> folder when asked.</p>
<p>!copy_1.png!
{color:#4f81bd}{<em>}Figure{</em>}{color}{color:#4f81bd} {<em>}6{</em>}{color}{color:#4f81bd}<em>: Overwrite the "bin" folder{</em>}{color}</p>
<p>Once copied, refresh the project. You should see something as presented on the Figure 7.</p>
<p>!copy_2.png!
{color:#4f81bd}{<em>}Figure{</em>}{color}{color:#4f81bd} {<em>}7{</em>}{color}{color:#4f81bd}<em>: The Felix project after the copy{</em>}{color}</p>
<h3 id="preparing-the-felix-project">Preparing the Felix project<a class="headerlink" href="#preparing-the-felix-project" title="Permanent link">&para;</a></h3>
<p>The Felix main jar is bin/Felix.jar. So, we need to add this jar in the project build path as presented on Figure 8. Right-click on the felix.jar file and then choose Build Path -&gt; Add to Build Path.</p>
<p>!build<em>path</em>1.png!
{color:#4f81bd}{<em>}Figure{</em>}{color}{color:#4f81bd} {<em>}8{</em>}{color}{color:#4f81bd}<em>: Add the felix.jar file to the project build path{</em>}{color}</p>
<h2 id="run-felix">Run Felix<a class="headerlink" href="#run-felix" title="Permanent link">&para;</a></h2>
<h3 id="create-a-run-configuration">Create a Run configuration<a class="headerlink" href="#create-a-run-configuration" title="Permanent link">&para;</a></h3>
<p>Now, the Felix project is ready. But, we need to configure a <em>Run{</em>}configuration to launch Felix. To achieve this, right-click on the Felix project and select Run As -&gt; Run... (Figure 9)</p>
<p>!run_1.png!
{color:#4f81bd}{<em>}Figure{</em>}{color}{color:#4f81bd} {<em>}9{</em>}{color}{color:#4f81bd}<em>: Create a Run configuration to launch Felix{</em>}{color}</p>
<p>This action launch the Run configuration windows. Create a new Java Application (Right-click on Java Application and select <em>new</em>) (Figure 10)</p>
<p>!run_2.png!
{color:#4f81bd}{<em color="color">}Figure 10:</em> {color:#4f81bd}{<em>}Create{</em>}{color} {color:#4f81bd}{<em>}a new Java Application{</em>}{color}</p>
<p>On the configuration wizard, enter a configuration name. Afterward, check the project name (it should be Felix if you choose Felix as project name). Then, Tick the "Include libraries when searching for a main class" option. You should obtain something as presented on the Figure 11.</p>
<p>!run_3.png!
{color:#4f81bd}{<em>}Figure{</em>}{color}{color:#4f81bd} {<em>}11{</em>}{color}{color:#4f81bd}<em>: Felix run configuration{</em>}{color}</p>
<p>Next, click on the "Search" button. Enter "Main" in the text area. In the resulting list, select "Main -- org.apache.felix.main". Below the list, you should see: "org.apache.felix.main /Felix/bin/felix.jar". The resulting windows must be similar as the Figure 11.</p>
<p>!run_4.png!
{color:#4f81bd}{<em>}Figure{</em>}{color}{color:#4f81bd} {<em>}12{</em>}{color}{color:#4f81bd}<em>: Choose to "good" main class{</em>}{color}</p>
<p>At that moment, clicks on the "Ok" button. You come back to the Run configuration windows. Apply the configuration ("Apply" button). And click on the "Run" button (Figure 13).</p>
<p>!run_5.png!
{color:#4f81bd}{<em>}Figure{</em>}{color}{color:#4f81bd} {<em>}13{</em>}{color}{color:#4f81bd}<em>: The Felix run configuration can be launched{</em>}{color}</p>
<p><em>Note:</em> Newest Felix versions require to set the <code>felix.config.properties</code> property. To achieve this, go in the 'arguments' tab and add the following VM arguments:</p>
<div class="codehilite"><pre><span class="o">-</span><span class="n">Dfelix</span><span class="p">.</span><span class="n">config</span><span class="p">.</span><span class="k">properties</span><span class="p">=</span><span class="n">file</span><span class="p">:</span><span class="n">conf</span><span class="o">/</span><span class="n">config</span><span class="p">.</span><span class="k">properties</span>
</pre></div>


<h3 id="first-execution">First Execution<a class="headerlink" href="#first-execution" title="Permanent link">&para;</a></h3>
<p>Once launched, you should see in the Eclipse console view:</p>
<p>!run_6.png!
{color:#4f81bd}{<em>}Figure{</em>}{color}{color:#4f81bd} {<em>}14{</em>}{color}{color:#4f81bd}<em color="color">: Endly Felix inside Eclipse!</em></p>
<p>You can use the console as the "normal" Felix console. In fact it is the normal Felix console in color. Enter a profile name as "integration_test" and then use the console normally (Figure 15).</p>
<p>To stop Felix, either type <em>shutdown</em> in the console, either clicks on the red square ("terminate") in the console toolbar.</p>
<p>!run_7.png!
{color:#4f81bd}{<em>}Figure{</em>}{color}{color:#4f81bd} {<em>}15{</em>}{color}{color:#4f81bd}<em>: Use the Felix console normally{</em>}{color}</p>
<h3 id="re-launching-felix">Re-launching Felix<a class="headerlink" href="#re-launching-felix" title="Permanent link">&para;</a></h3>
<p>Once the run configuration for Felix is created (and launched a first time), you can launch Felix directly by clicking on the Run icon and by choosing Felix (Figure 16). Moreover, you can use Eclipse debugging features by launching Felix in debug mode. To achieve this, click on the debug icon and then choose Felix (Figure 17).</p>
<p><em>Note:</em> You can launch Felix in profiling mode too, if you have installed TPTP.</p>
<p>!run_8.png!
{color:#4f81bd}{<em>}Figure{</em>}{color}{color:#4f81bd} {<em>}16{</em>}{color}{color:#4f81bd}<em>: Launching directly Felix from the icon bar{</em>}{color}</p>
<p>!run_9.png!
{color:#4f81bd}{<em>}Figure{</em>}{color}{color:#4f81bd} {<em>}17{</em>}{color}{color:#4f81bd}<em>: Launch Felix in debug mode{</em>}{color}</p>
<h2 id="felix-configuration">Felix Configuration<a class="headerlink" href="#felix-configuration" title="Permanent link">&para;</a></h2>
<p>Obviously, you can modify the Felix configuration. The Felix configuration file is in the <em>conf</em> folder (config.properties). This section presents briefly two modifications. To go further, look at the Felix documentation.</p>
<h3 id="configure-the-felix-cache-location">Configure the Felix cache location<a class="headerlink" href="#configure-the-felix-cache-location" title="Permanent link">&para;</a></h3>
<p>Felix store profiles and deployed bundle inside a cache. Normally this cache is located at<em>$user</em>home/.felix._ It is possible to change this location in order to clean it quickly.</p>
<p>Open the configuration file. Then, add a new line with felix.cache.dir=cache (Figure 18). Now, when you will start Felix, it will create a new{<em>}cache</em> folder (in your project)(Figure 19). All profiles will be stored in. To clean your cache, just delete the cache directory.</p>
<p><em>Note: refresh your project; else the folder does not appear.</em></p>
<p>!conf_1.png!
{color:#4f81bd}{<em>}Figure{</em>}{color}{color:#4f81bd} {<em>}18{</em>}{color}{color:#4f81bd}<em>: Customize the Felix cache location{</em>}{color}</p>
<p>!conf_2.png!
{color:#4f81bd}{<em>}Figure{</em>}{color}{color:#4f81bd} {<em>}19{</em>}{color}{color:#4f81bd}<em>: The Felix cache inside your project{</em>}{color}</p>
<h3 id="add-auto-started-bundles">Add auto-started bundles<a class="headerlink" href="#add-auto-started-bundles" title="Permanent link">&para;</a></h3>
<p>Often, you want that Felix deploy automatically some bundles. By modifying the felix.auto.start.1 (or 2), it is possible to configure which bundle will be deployed at startup.</p>
<p>To achieve this, open the configuration file and add your needed bundle path to the felix.auto.start.1 property (Figure 20). Be careful to the / in your path, to the \ at the end of the line, and to leave a space to the beginning of a new line.</p>
<p>!conf_3.png!
{color:#4f81bd}{<em>}Figure{</em>}{color}{color:#4f81bd} {<em>}20{</em>}{color}{color:#4f81bd}<em>: Add auto-started bundles{</em>}{color}</p>
<h2 id="debugging-bundles">Debugging bundles<a class="headerlink" href="#debugging-bundles" title="Permanent link">&para;</a></h2>
<p>Now that we are able to launch Felix as a Java Application, we can use the debugging and profiling features of Eclipse. To debug bundles, create a new project for your bundle. Then develop your bundle normally. Afterward, compile / package your bundle to obtain the bundle Jar file. You can use Eclipse PDE, Maven, BND, iPOJO, etc... to package your bundle.</p>
<p>To debug, your code, first place a breakpoint inside your code. Launch Felix in debug mode. Then deploy your bundle Jar file. When the execution reaches the breakpoint, Eclipse opens the debug perspective. You can use all debugging features normally.</p>
<h2 id="conclusion">Conclusion<a class="headerlink" href="#conclusion" title="Permanent link">&para;</a></h2>
<p>This document has presented how-to integrate Felix inside Eclipse. For any questions or feedback, subscribe to the Felix users mailing list by sending a message to <a href="">users-subscribe@felix.apache.org</a>; after subscribing, email questions or feedback to [users@felix.apache.org|mailto:users@felix.apache.org].</p>
      <div class="timestamp" style="margin-top: 30px; font-size: 80%; text-align: right;">
        Rev. 1712598 by cziegeler on Wed, 4 Nov 2015 17:48:20 +0000
      </div>
      <div class="trademarkFooter"> 
        Apache Felix, Felix, Apache, the Apache feather logo, and the Apache Felix project
        logo are trademarks of The Apache Software Foundation. All other marks mentioned
        may be trademarks or registered trademarks of their respective owners.
      </div>
    </div>
  </body>
</html>
