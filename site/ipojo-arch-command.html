
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<HTML>
  <HEAD>
    <TITLE>Apache Felix - iPOJO-Arch-Command</TITLE>
    <LINK rel="stylesheet" href="http://felix.apache.org/site/media.data/site.css" type="text/css" media="all">
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8">
  </HEAD>
  <BODY>
    <DIV class="title"><DIV class="logo"><A href="http://felix.apache.org/site/index.html"><IMG border="0" alt="Apache Felix" src="http://felix.apache.org/site/media.data/logo.png"></A></DIV><DIV class="header"><A href="http://www.apache.org/"><IMG border="0" alt="Apache" src="http://felix.apache.org/site/media.data/apache.png"></A></DIV></DIV>
    <DIV class="menu">
<UL>
	<LI><A href="news.html" title="news">news</A></LI>
	<LI><A href="http://www.apache.org/licenses/" class="external-link" rel="nofollow">license</A></LI>
	<LI><A href="http://felix.apache.org/site/downloads.cgi" class="external-link" rel="nofollow">downloads</A></LI>
	<LI><A href="documentation.html" title="documentation">documentation</A></LI>
	<LI><A href="mailinglists.html" title="mailinglists">mailing lists</A></LI>
	<LI><A href="contributing.html" title="Contributing">contributing</A></LI>
	<LI><A href="http://www.apache.org/" class="external-link" rel="nofollow">asf</A></LI>
	<LI><A href="http://www.apache.org/security/" class="external-link" rel="nofollow">security</A></LI>
	<LI><A href="http://www.apache.org/foundation/sponsorship.html" class="external-link" rel="nofollow">sponsorship</A></LI>
	<LI><A href="http://www.apache.org/foundation/thanks.html" class="external-link" rel="nofollow">sponsors</A>
<!-- ApacheCon Ad -->
<IFRAME src="http://www.apache.org/ads/button.html" style="border-width:0; float: left" frameborder="0" scrolling="no" width="135" height="135"></IFRAME>
<P style="height: 100px">
<!-- ApacheCon Ad --></LI>
</UL>
    </DIV>
    <DIV class="main">
<STYLE type="text/css">
 @import url(http://felix.apache.org/ipojo/site/superfish.css);
</STYLE>

<STYLE type="text/css">
 @import url(http://felix.apache.org/ipojo/site/style.css);
</STYLE>

<P>
<SCRIPT class="javascript" src="http://cwiki.apache.org/confluence/download/resources/confluence.ext.code:code/shCore.js"></SCRIPT>
<SCRIPT class="javascript" src="http://cwiki.apache.org/confluence/download/resources/confluence.ext.code:code/shBrushCSharp.js"></SCRIPT>
<SCRIPT class="javascript" src="http://cwiki.apache.org/confluence/download/resources/confluence.ext.code:code/shBrushPhp.js"></SCRIPT>
<SCRIPT class="javascript" src="http://cwiki.apache.org/confluence/download/resources/confluence.ext.code:code/shBrushJScript.js"></SCRIPT>
<SCRIPT class="javascript" src="http://cwiki.apache.org/confluence/download/resources/confluence.ext.code:code/shBrushVb.js"></SCRIPT>
<SCRIPT class="javascript" src="http://cwiki.apache.org/confluence/download/resources/confluence.ext.code:code/shBrushSql.js"></SCRIPT>
<SCRIPT class="javascript" src="http://cwiki.apache.org/confluence/download/resources/confluence.ext.code:code/shBrushXml.js"></SCRIPT>
<SCRIPT class="javascript" src="http://cwiki.apache.org/confluence/download/resources/confluence.ext.code:code/shBrushShell.js"></SCRIPT>
<SCRIPT class="javascript" src="http://cwiki.apache.org/confluence/download/resources/confluence.ext.code:code/shBrushDelphi.js"></SCRIPT>
<SCRIPT class="javascript" src="http://cwiki.apache.org/confluence/download/resources/confluence.ext.code:code/shBrushPython.js"></SCRIPT>
<SCRIPT class="javascript" src="http://cwiki.apache.org/confluence/download/resources/confluence.ext.code:code/shBrushJava.js"></SCRIPT>

<SCRIPT type="text/javascript" src="http://felix.apache.org/ipojo/site/jquery-1.js"></SCRIPT>
<SCRIPT type="text/javascript" src="http://felix.apache.org/ipojo/site/hoverIntent.js"></SCRIPT>
<SCRIPT type="text/javascript" src="http://felix.apache.org/ipojo/site/superfish.js"></SCRIPT>
<SCRIPT type="text/javascript" src="http://felix.apache.org/ipojo/site/supersubs.js"></SCRIPT>

<SCRIPT type="text/javascript">

    $(document).ready(function(){
        $("ul.sf-menu").supersubs({
            minWidth:    14,   // minimum width of sub-menus in em units
            maxWidth:    30,   // maximum width of sub-menus in em units
            extraWidth:  1     // extra width can ensure lines don't sometimes turn over
                               // due to slight rounding differences and font-family
        }).superfish();  // call supersubs first, then superfish, so that subs are
                         // not display:none when measuring. Call before initialising
                         // containing tabs for same reason.
    });

</SCRIPT>
<DIV class="main">
<DIV class="page-header">
<IMG src="http://felix.apache.org/ipojo/site/header.png" class="header">
<A href="http://ipojo.org/"><IMG src="http://felix.apache.org/ipojo/site/ipojo.png" width="225" class="header-logo"></A>
<UL class="sf-menu sf-js-enabled sf-shadow" id="ipojo-menu">
<LI class="current">
<!-- Menu Overview -->
<A href="" class="sf-with-ul">Overview<SPAN class="sf-sub-indicator"> &raquo;</SPAN><SPAN class="sf-sub-indicator"> &raquo;</SPAN></A>
<UL>
	<LI>
	<A href="apache-felix-ipojo.html" title="Apache Felix iPOJO">Home</A>
	</LI>
	<LI>
	<A href="apache-felix-ipojo-why-choose-ipojo.html" title="apache-felix-ipojo-why-choose-ipojo">Why choose iPOJO</A>
	</LI>
	<LI>
	<A href="apache-felix-ipojo-successstories.html" title="apache-felix-ipojo-successstories">Success stories</A>
	</LI>
	<LI>
	<A href="apache-felix-ipojo-feature-overview.html" title="Apache Felix iPOJO Feature Overview">Features</A>
	</LI>
</UL>
</LI>

<LI class="">
<!-- Menu download -->
<LI>
<A href="download.html" title="Download">Download </A>
</LI>

<LI class="">
<!-- Menu Documentation -->
<A href="" class="sf-with-ul">Documentation<SPAN class="sf-sub-indicator"> &raquo;</SPAN><SPAN class="sf-sub-indicator"> &raquo;</SPAN></A>
<UL>
    <!-- sub- menu : getting started -->
    <LI class="">
    <A href="" class="sf-with-ul">Getting Started<SPAN class="sf-sub-indicator"> &raquo;</SPAN><SPAN class="sf-sub-indicator"> &raquo;</SPAN></A>
    <UL>
     <LI><A href="ipojo-in-10-minutes.html" title="iPOJO in 10 minutes">iPOJO in 10 minutes</A></LI>
     <LI><A href="how-to-use-ipojo-annotations.html" title="How to use iPOJO Annotations">Using Annotations</A></LI>
     <LI><A href="ipojo-hello-word-maven-based-tutorial.html" title="iPOJO Hello Word (Maven-Based) tutorial">Maven tutorial</A></LI>
     <LI><A href="ipojo-advanced-tutorial.html" title="iPOJO Advanced Tutorial">Advanced tutorial</A></LI>
     <LI><A href="apache-felix-ipojo-dosgi.html" title="apache-felix-ipojo-dosgi">Using Distributed OSGi</A></LI>
     <LI><A href="ipojo-composition-tutorial.html" title="iPOJO Composition Tutorial">Application Composition</A></LI>
    </UL>
    </LI> <!-- end of getting started -->
    <!-- sub menu : Describing Components -->
     <LI class="">
        <A href="http://felix.apache.org/site/describing-components.html" class="sf-with-ul">Describing components<SPAN class="sf-sub-indicator"> &raquo;</SPAN><SPAN class="sf-sub-indicator"> &raquo;</SPAN></A>
        <UL>
        <LI><A href="service-requirement-handler.html" title="Service Requirement Handler">Requiring a service</A></LI>
        <LI><A href="providing-osgi-services.html" title="Providing OSGi services">Providing a service</A></LI>
        <LI><A href="lifecycle-callback-handler.html" title="Lifecycle Callback Handler">Lifecycle management</A></LI>
        <LI><A href="configuration-handler.html" title="Configuration Handler">Configuration</A></LI>
        <LI><A href="architecture-handler.html" title="Architecture Handler">Introspection</A></LI>
        <LI><A href="controller-lifecycle-handler.html" title="Controller Lifecycle Handler">Impacting the lifecycle</A></LI>
        <LI><A href="event-admin-handlers.html" title="Event Admin Handlers">Asynchronous communication</A></LI>
        <LI><A href="ipojo-jmx-handler.html" title="iPOJO JMX Handler">JMX management</A></LI>
        <LI><A href="extender-pattern-handler.html" title="Extender Pattern Handler">Extender pattern</A></LI>
        <LI><A href="white-board-pattern-handler.html" title="White Board Pattern Handler">Whiteboard pattern</A></LI>
        <LI><A href="temporal-service-dependency.html" title="Temporal Service Dependency">Temporal dependencies</A></LI>
        </UL>
     </LI> <!-- End of describing components -->
    <!-- sub- menu : User Guide -->
    <LI class="">
    <A href="" class="sf-with-ul">User Guide<SPAN class="sf-sub-indicator"> &raquo;</SPAN><SPAN class="sf-sub-indicator"> &raquo;</SPAN></A>
        <UL>
        <LI><A href="combining-ipojo-and-configuration-admin.html" title="Combining iPOJO and Configuration Admin">iPOJO and config admin</A></LI>
        <LI><A href="how-to-use-ipojo-factories.html" title="How-to use iPOJO factories">Factories and Instances</A></LI>
        <LI><A href="using-xml-schemas.html" title="Using XML Schemas">XML Schemas</A></LI>
        <LI><A href="apache-felix-ipojo-api.html" title="apache-felix-ipojo-api">API</A></LI>
        <LI><A href="apache-felix-ipojo-testing-components.html" title="apache-felix-ipojo-testing-components">Testing components</A></LI>
        <LI><A href="apache-felix-ipojo-eclipse-integration.html" title="apache-felix-ipojo-eclipse-integration">Eclipse Integration</A></LI>
        <LI><A href="ipojo-faq.html" title="iPOJO FAQ">FAQ</A></LI>
        <LI><A href="ipojo-reference-card.html" title="iPOJO-Reference-Card">Reference Card</A></LI>
        </UL>
    </LI> <!-- end of user guide -->
    <!-- sub- menu : Dev Guide -->
    <LI>
    <A href="" class="sf-with-ul">Advanced Topics<SPAN class="sf-sub-indicator"> &raquo;</SPAN><SPAN class="sf-sub-indicator"> &raquo;</SPAN></A>
       <UL>
        <LI><A href="http://felix.apache.org/ipojo/api/1.6.0" class="external-link" rel="nofollow">Javadoc</A></LI>
        <LI><A href="how-to-write-your-own-handler.html" title="How to write your own handler">Handler development</A></LI>
        <LI><A href="how-to-use-ipojo-manipulation-metadata.html" title="How to use iPOJO Manipulation Metadata">Manipulation Metadata </A></LI>
        <LI><A href="dive-into-the-ipojo-manipulation-depths.html" title="Dive into the iPOJO Manipulation depths">Dive into the iPOJO Manipulation depths</A></LI>
       </UL>
    </LI> <!-- End of Dev guide -->
</UL>
</LI> <!-- End of doc -->
<!-- Menu 4 : Tools -->
<LI class="">
<A href="" class="sf-with-ul">Tools<SPAN class="sf-sub-indicator"> &raquo;</SPAN><SPAN class="sf-sub-indicator"> &raquo;</SPAN></A>
<UL>
   <LI><A href="ipojo-ant-task.html" title="iPOJO Ant Task">Ant Task</A></LI>
   <LI><A href="ipojo-eclipse-plug-in.html" title="iPOJO Eclipse Plug-in">Eclipse Plugin</A></LI>
   <LI><A href="ipojo-maven-plug-in.html" title="iPOJO Maven Plug-in">Maven Plugin</A></LI>
   <LI><A href="" title="iPOJO-Arch-Command"><TT>arch</TT> shell command</A></LI>
   <LI><A href="apache-felix-ipojo-online-manipulator.html" title="apache-felix-ipojo-online-manipulator">Online Manipulator</A></LI>
   <LI><A href="ipojo-webconsole-plugin.html" title="iPOJO Webconsole Plugin">Webconsole plugin</A></LI>
   <LI><A href="apache-felix-ipojo-junit4osgi.html" title="apache-felix-ipojo-junit4osgi">Junit4OSGi</A></LI>
</UL>
</LI><!-- End of tools -->
<!-- Menu 5 : Support -->
<LI>
<A href="ipojo-support.html" title="ipojo-support">Support </A>
</LI>
<!-- End of the menu 5 -->
<!-- Menu 6 : Misc -->
<LI class="">
<A href="" class="sf-with-ul">Misc<SPAN class="sf-sub-indicator"> &raquo;</SPAN><SPAN class="sf-sub-indicator"> &raquo;</SPAN></A>
<UL>
   <LI><A href="apache-felix-ipojo-supportedvms.html" title="apache-felix-ipojo-supportedVMs">Supported JVMs</A></LI>
   <LI><A href="apache-felix-ipojo-supportedosgi.html" title="apache-felix-ipojo-supportedOSGi">Supported OSGi Implementations</A></LI>
   <LI><A href="http://ipojo-dark-side.blogspot.com/" class="external-link" rel="nofollow">iPOJO's Dark Side Blog</A></LI>
   <LI><A href="article-presentations.html" title="Article & Presentations">Article &amp; Presentations</A></LI>
   <LI><A href="http://www.apache.org/">ASF</A></LI>
   <LI><A href="http://www.apache.org/foundation/sponsorship.html">Sponsorship</A></LI>
   <LI><A href="http://www.apache.org/foundation/thanks.html">Sponsors</A></LI>
</UL>
</LI><!-- End of misc -->
</UL> <!-- End of the menu -->
</DIV> <!-- Page header -->
</P>

<DIV class="content">

    <div style="
    background-color: #fdf7f7;
    border-color: #d9534f;
    margin: 40px 0;
    padding: 20px;
    border-left: 5px solid #d9534f;">
        <h4 style="margin-top: 0;
        font-size: 18px;
        margin-bottom: 5px;
        margin-top: 0;
        margin-bottom: 10px;
        font-weight: 500;
        line-height: 1.1;
        color: inherit;">The iPOJO documentation has moved </h4>
        <p style="margin-top: 0px; padding-top: 0px; margin-bottom: 0px;">
            The new web site is <a href="http://ipojo.org">here</a>, update your bookmark.</p>
    </div>

<H1><A name="iPOJO-Arch-Command-iPOJO%7B%7BArch%7D%7Dcommand"></A>iPOJO <TT>Arch</TT> command</H1>
<P><EM>Architecture introspection is required when the system doesn't work as expected. In this case, having a quick access to instances states and interconnection is a stringent requirement. The <TT>arch</TT> command allows getting these data from the Felix Shell, from the Equinox shell and Gogo.</EM></P>

<P><B>Note</B> : The Gogo commands are not yet released but are available from the iPOJO trunk.</P>

<DIV class="toc"><DIV>
<UL>
    <LI><A href="#iPOJO-Arch-Command-Download">Download</A></LI>
    <LI><A href="#iPOJO-Arch-Command-Installation">Installation</A></LI>
    <LI><A href="#iPOJO-Arch-Command-EquinoxandFelixShells">Equinox and Felix Shells</A></LI>
    <LI><A href="#iPOJO-Arch-Command-GogoShellCommands">Gogo Shell Commands</A></LI>
    <LI><A href="#iPOJO-Arch-Command-Readinginstancearchitecture">Reading instance architecture</A></LI>
    <LI><A href="#iPOJO-Arch-Command-Listavailablefactories">List available factories</A></LI>
    <LI><A href="#iPOJO-Arch-Command-Listavailablehandlers">List available handlers</A></LI>
</UL></DIV></DIV>

<H2><A name="iPOJO-Arch-Command-Download"></A>Download</H2>
<P>The Felix commands is available from the <A href="download.html" title="Download">Download</A> page.<BR>
The Equinox command sources are available <A href="http://svn.apache.org/viewvc/felix/sandbox/clement/ipojo-utils/arch-equinox/" class="external-link" rel="nofollow">http://svn.apache.org/repos/asf/felix/sandbox/clement/ipojo-utils/arch-equinox/</A>. To compile sources, just launch the <TT>mvn clean install</TT> and deploy the resulting bundle.</P>

<H2><A name="iPOJO-Arch-Command-Installation"></A>Installation</H2>
<P>Once you get the bundle, just install and start it in the OSGi Framework shell:</P>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Felix</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-xml">
start file:/BUNDLE_URL.jar
</PRE>
</DIV></DIV>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Equinox</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-xml">
install file:/BUNDLE_URL.jar
Bundle X installed
start X
</PRE>
</DIV></DIV>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Gogo</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-xml">
install file:/ARCH_GOGO_URL.jar
Bundle X installed
start X
</PRE>
</DIV></DIV>

<H2><A name="iPOJO-Arch-Command-EquinoxandFelixShells"></A>Equinox and Felix Shells</H2>

<P>Then, you can use it to introspect the system by launching the <TT>arch</TT> command.</P>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
arch =&gt; displays instances name &amp; state (equivalent to arch \-instances)
arch -instance $instance_name =&gt; displays complete information about the instance $instance_name
arch -factories =&gt; display the list of available factories
arch -factory $factory_name =&gt; display complete information about the factory $factory_name
arch -handlers =&gt; list available handlers
</PRE>
</DIV></DIV>

<H2><A name="iPOJO-Arch-Command-GogoShellCommands"></A>Gogo Shell Commands</H2>
<P>The set of commands available from Gogo is a little bit different:</P>
<UL>
	<LI><TT>ipojo:instances</TT> (or just <TT>instances</TT>) lists the instances and state</LI>
	<LI><TT>ipojo:instance $instance_name</TT> (or just <TT>instance $instance_name</TT>) displays the complete information about the specified $instance_name</LI>
	<LI><TT>ipojo:factories</TT> (or just <TT>factories</TT>) lists the available public factories</LI>
	<LI><TT>ipojo:factory $factory_name</TT> (or just <TT>factory $factory_name</TT>) displays complete information about the factory $factory_name</LI>
	<LI><TT>ipojo:handlers</TT> (or just <TT>handlers</TT> lists available handlers</LI>
</UL>



<H2><A name="iPOJO-Arch-Command-Readinginstancearchitecture"></A>Reading instance architecture </H2>
<P>When you launch the <TT>arch</TT> command (or <TT>instances</TT> on Gogo), the list of created instances (enabling architecture introspection) is displayed.</P>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Felix or Equinox</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
-&gt; arch
Instance ArchCommand -&gt; valid
Instance spell.english.EnglishDictionary-0 -&gt; valid
Instance spell.checker.SpellCheck-0 -&gt; valid
Instance spell.gui.SpellCheckerGui-0 -&gt; valid
</PRE>
</DIV></DIV>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Gogo</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
$ instances
Instance ArchCommand -&gt; valid
Instance spell.english.EnglishDictionary-0 -&gt; valid
Instance spell.checker.SpellCheck-0 -&gt; valid
Instance spell.gui.SpellCheckerGui-0 -&gt; valid
</PRE>
</DIV></DIV>
<P>To get more information on an instance, launch <TT>arch -instance the_instance_name</TT> (or <TT>instance the_instance_name</TT> on Gogo)</P>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Felix or Equinox</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
-&gt; arch -instance spell.checker.SpellCheck-0
instance component.type=<SPAN class="code-quote">&quot;spell.checker.SpellCheck&quot;</SPAN> state=<SPAN class="code-quote">&quot;valid&quot;</SPAN> bundle=<SPAN class="code-quote">&quot;8&quot;</SPAN> name=<SPAN class="code-quote">&quot;spell.checker.SpellCheck-0&quot;</SPAN>
	handler state=<SPAN class="code-quote">&quot;valid&quot;</SPAN> name=<SPAN class="code-quote">&quot;org.apache.felix.ipojo.handlers.dependency.DependencyHandler&quot;</SPAN>
		requires optional=<SPAN class="code-quote">&quot;<SPAN class="code-keyword">false</SPAN>&quot;</SPAN> aggregate=<SPAN class="code-quote">&quot;<SPAN class="code-keyword">false</SPAN>&quot;</SPAN> state=<SPAN class="code-quote">&quot;resolved&quot;</SPAN> binding-policy=<SPAN class="code-quote">&quot;dynamic&quot;</SPAN> specification=<SPAN class="code-quote">&quot;spell.services.DictionaryService&quot;</SPAN>
	handler state=<SPAN class="code-quote">&quot;valid&quot;</SPAN> name=<SPAN class="code-quote">&quot;org.apache.felix.ipojo.handlers.providedservice.ProvidedServiceHandler&quot;</SPAN>
		provides service.id=<SPAN class="code-quote">&quot;36&quot;</SPAN> state=<SPAN class="code-quote">&quot;registered&quot;</SPAN> specifications=<SPAN class="code-quote">&quot;[spell.services.SpellChecker]&quot;</SPAN>
			property value=<SPAN class="code-quote">&quot;spell.checker.SpellCheck&quot;</SPAN> name=<SPAN class="code-quote">&quot;factory.name&quot;</SPAN>
			property value=<SPAN class="code-quote">&quot;spell.checker.SpellCheck-0&quot;</SPAN> name=<SPAN class="code-quote">&quot;instance.name&quot;</SPAN>
	handler state=<SPAN class="code-quote">&quot;valid&quot;</SPAN> name=<SPAN class="code-quote">&quot;org.apache.felix.ipojo.handlers.architecture.ArchitectureHandler&quot;</SPAN>
</PRE>
</DIV></DIV>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Gogo</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
$ipojo:instance spell.checker.SpellCheck-0
instance component.type=<SPAN class="code-quote">&quot;spell.checker.SpellCheck&quot;</SPAN> state=<SPAN class="code-quote">&quot;valid&quot;</SPAN> bundle=<SPAN class="code-quote">&quot;8&quot;</SPAN> name=<SPAN class="code-quote">&quot;spell.checker.SpellCheck-0&quot;</SPAN>
	handler state=<SPAN class="code-quote">&quot;valid&quot;</SPAN> name=<SPAN class="code-quote">&quot;org.apache.felix.ipojo.handlers.dependency.DependencyHandler&quot;</SPAN>
		requires optional=<SPAN class="code-quote">&quot;<SPAN class="code-keyword">false</SPAN>&quot;</SPAN> aggregate=<SPAN class="code-quote">&quot;<SPAN class="code-keyword">false</SPAN>&quot;</SPAN> state=<SPAN class="code-quote">&quot;resolved&quot;</SPAN> binding-policy=<SPAN class="code-quote">&quot;dynamic&quot;</SPAN> specification=<SPAN class="code-quote">&quot;spell.services.DictionaryService&quot;</SPAN>
	handler state=<SPAN class="code-quote">&quot;valid&quot;</SPAN> name=<SPAN class="code-quote">&quot;org.apache.felix.ipojo.handlers.providedservice.ProvidedServiceHandler&quot;</SPAN>
		provides service.id=<SPAN class="code-quote">&quot;36&quot;</SPAN> state=<SPAN class="code-quote">&quot;registered&quot;</SPAN> specifications=<SPAN class="code-quote">&quot;[spell.services.SpellChecker]&quot;</SPAN>
			property value=<SPAN class="code-quote">&quot;spell.checker.SpellCheck&quot;</SPAN> name=<SPAN class="code-quote">&quot;factory.name&quot;</SPAN>
			property value=<SPAN class="code-quote">&quot;spell.checker.SpellCheck-0&quot;</SPAN> name=<SPAN class="code-quote">&quot;instance.name&quot;</SPAN>
	handler state=<SPAN class="code-quote">&quot;valid&quot;</SPAN> name=<SPAN class="code-quote">&quot;org.apache.felix.ipojo.handlers.architecture.ArchitectureHandler&quot;</SPAN>
</PRE>
</DIV></DIV>

<P>Instance architecture is organized as follows:<BR>
On the first line, are displayed the component type (i.e. factory), the instance state (<TT>valid</TT> or <TT>invalid</TT>), the bundle from which the instance is created, and the instance name.<BR>
Then, the information is organized handler by handler (a piece of container). For each handler plugged on the instance can participate to the instance architecture. For each handler its name (such as {{ org.apache.felix.ipojo.handlers.dependency.DependencyHandler}} for iPOJO service dependencies, {{ org.apache.felix.ipojo.handlers.providedservice.ProvidedServiceHandler}} for iPOJO service providing...) and the state (either <TT>valid</TT> or <TT>invalid</TT> are displayed. Remember that an instance is valid only and only if all plugged handlers are valid. <BR>
The <TT>org.apache.felix.ipojo.handlers.dependency.DependencyHandler</TT> provides data on service dependencies and more precisely on the state of service dependencies. In the previous example, the dependency on {{ spell.services.DictionaryService}} was resolved. On the following example, the same dependency is no more resolved:</P>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
instance component.type=<SPAN class="code-quote">&quot;spell.checker.SpellCheck&quot;</SPAN> state=<SPAN class="code-quote">&quot;invalid&quot;</SPAN> bundle=<SPAN class="code-quote">&quot;8&quot;</SPAN> name=<SPAN class="code-quote">&quot;spell.checker.SpellCheck-0&quot;</SPAN>
	handler state=<SPAN class="code-quote">&quot;invalid&quot;</SPAN> name=<SPAN class="code-quote">&quot;org.apache.felix.ipojo.handlers.dependency.DependencyHandler&quot;</SPAN>
		requires optional=<SPAN class="code-quote">&quot;<SPAN class="code-keyword">false</SPAN>&quot;</SPAN> aggregate=<SPAN class="code-quote">&quot;<SPAN class="code-keyword">false</SPAN>&quot;</SPAN> state=<SPAN class="code-quote">&quot;unresolved&quot;</SPAN> binding-policy=<SPAN class="code-quote">&quot;dynamic&quot;</SPAN> specification=<SPAN class="code-quote">&quot;spell.services.DictionaryService&quot;</SPAN>
	handler state=<SPAN class="code-quote">&quot;valid&quot;</SPAN> name=<SPAN class="code-quote">&quot;org.apache.felix.ipojo.handlers.providedservice.ProvidedServiceHandler&quot;</SPAN>
		provides state=<SPAN class="code-quote">&quot;unregistered&quot;</SPAN> specifications=<SPAN class="code-quote">&quot;[spell.services.SpellChecker]&quot;</SPAN>
			property value=<SPAN class="code-quote">&quot;spell.checker.SpellCheck&quot;</SPAN> name=<SPAN class="code-quote">&quot;factory.name&quot;</SPAN>
			property value=<SPAN class="code-quote">&quot;spell.checker.SpellCheck-0&quot;</SPAN> name=<SPAN class="code-quote">&quot;instance.name&quot;</SPAN>
	handler state=<SPAN class="code-quote">&quot;valid&quot;</SPAN> name=<SPAN class="code-quote">&quot;org.apache.felix.ipojo.handlers.architecture.ArchitectureHandler&quot;</SPAN>
</PRE>
</DIV></DIV>
<P>Notes that, the instance also becomes invalid and that the provided service is unregistered.<BR>
If the provider comes back, the dependency becomes <TT>resolved</TT> and the instance becomes <TT>valid</TT><BR>
If an instance begins to use a service, the bound providers are described in the instance architecture:</P>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Felix or Equinox</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
-&gt; arch -instance spell.checker.SpellCheck-0
instance component.type=<SPAN class="code-quote">&quot;spell.checker.SpellCheck&quot;</SPAN> state=<SPAN class="code-quote">&quot;valid&quot;</SPAN> bundle=<SPAN class="code-quote">&quot;8&quot;</SPAN> name=<SPAN class="code-quote">&quot;spell.checker.SpellCheck-0&quot;</SPAN>
	object name=<SPAN class="code-quote">&quot;spell.checker.SpellCheck@e222eb&quot;</SPAN>
	handler state=<SPAN class="code-quote">&quot;valid&quot;</SPAN> name=<SPAN class="code-quote">&quot;org.apache.felix.ipojo.handlers.dependency.DependencyHandler&quot;</SPAN>
		requires optional=<SPAN class="code-quote">&quot;<SPAN class="code-keyword">false</SPAN>&quot;</SPAN> aggregate=<SPAN class="code-quote">&quot;<SPAN class="code-keyword">false</SPAN>&quot;</SPAN> state=<SPAN class="code-quote">&quot;resolved&quot;</SPAN> binding-policy=<SPAN class="code-quote">&quot;dynamic&quot;</SPAN> specification=<SPAN class="code-quote">&quot;spell.services.DictionaryService&quot;</SPAN>
			uses service.id=<SPAN class="code-quote">&quot;41&quot;</SPAN> instance.name=<SPAN class="code-quote">&quot;spell.english.EnglishDictionary-0&quot;</SPAN>
	handler state=<SPAN class="code-quote">&quot;valid&quot;</SPAN> name=<SPAN class="code-quote">&quot;org.apache.felix.ipojo.handlers.providedservice.ProvidedServiceHandler&quot;</SPAN>
		provides service.id=<SPAN class="code-quote">&quot;42&quot;</SPAN> state=<SPAN class="code-quote">&quot;registered&quot;</SPAN> specifications=<SPAN class="code-quote">&quot;[spell.services.SpellChecker]&quot;</SPAN>
			property value=<SPAN class="code-quote">&quot;spell.checker.SpellCheck&quot;</SPAN> name=<SPAN class="code-quote">&quot;factory.name&quot;</SPAN>
			property value=<SPAN class="code-quote">&quot;spell.checker.SpellCheck-0&quot;</SPAN> name=<SPAN class="code-quote">&quot;instance.name&quot;</SPAN>
	handler state=<SPAN class="code-quote">&quot;valid&quot;</SPAN> name=<SPAN class="code-quote">&quot;org.apache.felix.ipojo.handlers.architecture.ArchitectureHandler&quot;</SPAN>
</PRE>
</DIV></DIV>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Gogo</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
$instance spell.checker.SpellCheck-0
instance component.type=<SPAN class="code-quote">&quot;spell.checker.SpellCheck&quot;</SPAN> state=<SPAN class="code-quote">&quot;valid&quot;</SPAN> bundle=<SPAN class="code-quote">&quot;8&quot;</SPAN> name=<SPAN class="code-quote">&quot;spell.checker.SpellCheck-0&quot;</SPAN>
	object name=<SPAN class="code-quote">&quot;spell.checker.SpellCheck@e222eb&quot;</SPAN>
	handler state=<SPAN class="code-quote">&quot;valid&quot;</SPAN> name=<SPAN class="code-quote">&quot;org.apache.felix.ipojo.handlers.dependency.DependencyHandler&quot;</SPAN>
		requires optional=<SPAN class="code-quote">&quot;<SPAN class="code-keyword">false</SPAN>&quot;</SPAN> aggregate=<SPAN class="code-quote">&quot;<SPAN class="code-keyword">false</SPAN>&quot;</SPAN> state=<SPAN class="code-quote">&quot;resolved&quot;</SPAN> binding-policy=<SPAN class="code-quote">&quot;dynamic&quot;</SPAN> specification=<SPAN class="code-quote">&quot;spell.services.DictionaryService&quot;</SPAN>
			uses service.id=<SPAN class="code-quote">&quot;41&quot;</SPAN> instance.name=<SPAN class="code-quote">&quot;spell.english.EnglishDictionary-0&quot;</SPAN>
	handler state=<SPAN class="code-quote">&quot;valid&quot;</SPAN> name=<SPAN class="code-quote">&quot;org.apache.felix.ipojo.handlers.providedservice.ProvidedServiceHandler&quot;</SPAN>
		provides service.id=<SPAN class="code-quote">&quot;42&quot;</SPAN> state=<SPAN class="code-quote">&quot;registered&quot;</SPAN> specifications=<SPAN class="code-quote">&quot;[spell.services.SpellChecker]&quot;</SPAN>
			property value=<SPAN class="code-quote">&quot;spell.checker.SpellCheck&quot;</SPAN> name=<SPAN class="code-quote">&quot;factory.name&quot;</SPAN>
			property value=<SPAN class="code-quote">&quot;spell.checker.SpellCheck-0&quot;</SPAN> name=<SPAN class="code-quote">&quot;instance.name&quot;</SPAN>
	handler state=<SPAN class="code-quote">&quot;valid&quot;</SPAN> name=<SPAN class="code-quote">&quot;org.apache.felix.ipojo.handlers.architecture.ArchitectureHandler&quot;</SPAN>
</PRE>
</DIV></DIV>
<P>In the previous case, the dependency on {{ spell.services.DictionaryService}} use the service 41 from the iPOJO instance named {{ spell.english.EnglishDictionary-0}}<BR>
You can also check created POJO objects (implementation class objet). Here, only one object was created (<TT>spell.checker.SpellCheck@e222eb</TT>).</P>

<H2><A name="iPOJO-Arch-Command-Listavailablefactories"></A>List available factories</H2>
<P>To list available factories (i.e. component types), launch the <TT>arch -factories</TT> command (or <TT>factories</TT> on Gogo):</P>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Felix or Equinox</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
-&gt; arch -factories
Factory spell.checker.SpellCheck (VALID)
Factory spell.gui.SpellCheckerGui (VALID)
Factory spell.english.EnglishDictionary (VALID)
</PRE>
</DIV></DIV>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Gogo</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
$factories
Factory spell.checker.SpellCheck (VALID)
Factory spell.gui.SpellCheckerGui (VALID)
Factory spell.english.EnglishDictionary (VALID)
</PRE>
</DIV></DIV>

<P>For each available (public) factories,the name and the sate are displayed. A factory is valid if and only if all required handlers are available. To get more information on a factory launch the <TT>arch -factory factory_name</TT> (or <TT>factory factory_name</TT> on Gogo) command:</P>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
factory implementation-class=<SPAN class="code-quote">&quot;spell.english.EnglishDictionary&quot;</SPAN> state=<SPAN class="code-quote">&quot;valid&quot;</SPAN> bundle=<SPAN class="code-quote">&quot;7&quot;</SPAN> name=<SPAN class="code-quote">&quot;spell.english.EnglishDictionary&quot;</SPAN>
	provides specification=<SPAN class="code-quote">&quot;spell.services.DictionaryService&quot;</SPAN>
	missinghandlers list=<SPAN class="code-quote">&quot;[]&quot;</SPAN>
	requiredhandlers list=<SPAN class="code-quote">&quot;[org.apache.felix.ipojo:provides, org.apache.felix.ipojo:architecture]&quot;</SPAN>
</PRE>
</DIV></DIV>
<P>On the first line, you get the implementation class of the type, the state of the factory, the bundle declaring the type and the name of the type. You also get the list of required and missing handlers.</P>
<H2><A name="iPOJO-Arch-Command-Listavailablehandlers"></A>List available handlers</H2>
<P>You can also list available handlers with the <TT>arch -handlers</TT> (or <TT>handlers</TT> on Gogo) command.</P>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Felix or Equinox</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
-&gt; arch -handlers
Handler org.apache.felix.ipojo:controller (VALID)
Handler org.apache.felix.ipojo:callback (VALID)
Handler org.apache.felix.ipojo:requires (VALID)
Handler org.apache.felix.ipojo:provides (VALID)
Handler org.apache.felix.ipojo:properties (VALID)
Handler org.apache.felix.ipojo:architecture (VALID)
Handler org.apache.felix.ipojo.handler.whiteboard:wbp (VALID)
</PRE>
</DIV></DIV>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Gogo</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
$handlers
Handler org.apache.felix.ipojo:controller (VALID)
Handler org.apache.felix.ipojo:callback (VALID)
Handler org.apache.felix.ipojo:requires (VALID)
Handler org.apache.felix.ipojo:provides (VALID)
Handler org.apache.felix.ipojo:properties (VALID)
Handler org.apache.felix.ipojo:architecture (VALID)
Handler org.apache.felix.ipojo.handler.whiteboard:wbp (VALID)
</PRE>
</DIV></DIV>
<P>Handlers with the <TT>org.apache.felix.ipojo</TT> namespace (section before <TT>:</TT>) are core handlers (provided by the iPOJO core bundles). Others are external handlers (provided by others bundles).
<BR class="atl-forced-newline">
<BR class="atl-forced-newline"></P>

 </DIV>
        <IMG src="http://felix.apache.org/ipojo/site/footer.png" class="footer">
</DIV>

<SCRIPT type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</SCRIPT>
<SCRIPT type="text/javascript">
try{
var pageTracker = _gat._getTracker("UA-1518442-4");
pageTracker._trackPageview();
} catch(err) {}
</SCRIPT>

        <DIV class="timestamp" style="margin-top: 30px; font-size: 80%; text-align: right;">
Last modified by clement.escoffier on 2010-05-08 04:02:15.0
        </DIV>
        <DIV class="trademarkFooter">
Apache Felix, Felix, Apache, the Apache feather logo, and the Apache Felix project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners.
        </DIV>
    </DIV>
  </BODY>
</HTML>
