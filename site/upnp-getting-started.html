
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<HTML>
  <HEAD>
    <TITLE>Apache Felix - UPnP Getting Started</TITLE>
    <LINK rel="stylesheet" href="http://felix.apache.org/site/media.data/site.css" type="text/css" media="all">
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8">
  </HEAD>
  <BODY>
    <DIV class="title"><DIV class="logo"><A href="http://felix.apache.org/site/index.html"><IMG border="0" alt="Apache Felix" src="http://felix.apache.org/site/media.data/logo.png"></A></DIV><DIV class="header"><A href="http://www.apache.org/"><IMG border="0" alt="Apache" src="http://felix.apache.org/site/media.data/apache.png"></A></DIV></DIV>
    <DIV class="menu">
<UL>
	<LI><A href="news.html" title="news">news</A></LI>
	<LI><A href="http://www.apache.org/licenses/" class="external-link" rel="nofollow">license</A></LI>
	<LI><A href="http://felix.apache.org/site/downloads.cgi" class="external-link" rel="nofollow">downloads</A></LI>
	<LI><A href="documentation.html" title="documentation">documentation</A></LI>
	<LI><A href="mailinglists.html" title="mailinglists">mailing lists</A></LI>
	<LI><A href="contributing.html" title="Contributing">contributing</A></LI>
	<LI><A href="http://www.apache.org/" class="external-link" rel="nofollow">asf</A></LI>
	<LI><A href="http://www.apache.org/security/" class="external-link" rel="nofollow">security</A></LI>
	<LI><A href="http://www.apache.org/foundation/sponsorship.html" class="external-link" rel="nofollow">sponsorship</A></LI>
	<LI><A href="http://www.apache.org/foundation/thanks.html" class="external-link" rel="nofollow">sponsors</A>
<!-- ApacheCon Ad -->
<IFRAME src="http://www.apache.org/ads/button.html" style="border-width:0; float: left" frameborder="0" scrolling="no" width="135" height="135"></IFRAME>
<P style="height: 100px">
<!-- ApacheCon Ad --></LI>
</UL>
    </DIV>
    <DIV class="main">
<H1><A name="UPnPGettingStarted-GettingStarted"></A>Getting Started</H1>

<P>Assuming that, as described in <A href="building-felix.html" title="Building Felix">Building Felix</A> web page, you have already checked out the Felix project in the $FELIX_HOME directory, the Felix UPnP project is located at $FELIX_HOME/trunk/upnp directory. The project is organized in different directories shown in Figure 1.</P>

<P><SPAN class="image-wrap" style=""><IMG src="upnp-getting-started.data/UPnP-Project-Structure.jpg" style="border: 0px solid black"></SPAN><BR>
<B>Figure 1</B> The Felix UPnP project structure</P>

<P>The <EM>basedriver</EM> directory contains the project of the bundle implementing the UPnP spec. In the <EM>samples</EM>directory there are three projects implementing simple test devices, while the <EM>tester</EM> and <EM>extra</EM> directories are projects providing additional utilities for the UPnP development. At last, the <EM>doc</EM> directory contains this documentation and a script file to launch all the Felix UPnP bundles.</P>

<P>After building the Felix project, you can start the script file &quot;upnp.sh.bat&quot; inside the /upnp/doc directory; it launches a Felix runtime with all the UPnP bundles released by the project. The script file defines a profile called &quot;upnp&quot; and the list of bundles[1]installed with the profile is shown in Figure 2. The UPnP Tester is a bundle that provides a browser utility to control and subscribe all the UPnP devices registered with the OSGi framework. After executing the script, you should see in the window opened by the UPnP Tester bundle three UPnP devices (left panel in Figure 3.a), which correspond to the TV, Clock and BinaryLight devices shown in Figure 3. Of course the number of discovered devices may be higher if other UPnP devices are installed in your local network</P>

<P><SPAN class="image-wrap" style=""><IMG src="upnp-getting-started.data/Bundle-List.jpg" style="border: 0px solid black"></SPAN><BR>
<B>Figure 2</B> Bundles installed by the script &quot;upnp.sh.bat&quot;</P>

<P>To stop the devices launched by the script you can close their windows, while to start them again type &quot;start 10 11 12 13&quot; from the Felix shell. See the sections &quot;<A href="upnp-testing-devices.html" title="UPnP Testing Devices">Testing UPnP devices</A>&quot; and &quot;<A href="upnp-examples.html" title="UPnP Examples">The UPnP Examples</A>&quot; for details on how to use the these bundles.</P>
<DIV class="table-wrap">
<TABLE class="confluenceTable"><TBODY>
<TR>
<TD class="confluenceTd"> <SPAN class="image-wrap" style=""><IMG src="upnp-getting-started.data/UPnPTester.jpg" style="border: 0px solid black"></SPAN> <BR class="atl-forced-newline">
a) UPnP Tester <BR class="atl-forced-newline"> </TD>
<TD class="confluenceTd"> <SPAN class="image-wrap" style=""><IMG src="upnp-getting-started.data/UPnPClock.jpg" style="border: 0px solid black"></SPAN> <BR class="atl-forced-newline">
b) UPnP Clock <BR class="atl-forced-newline"> </TD>
<TD class="confluenceTd"> <BR class="atl-forced-newline"> </TD>
</TR>
<TR>
<TD class="confluenceTd"> <SPAN class="image-wrap" style=""><IMG src="upnp-getting-started.data/UPnPTV.jpg" style="border: 0px solid black"></SPAN><BR class="atl-forced-newline">
 c) UPnP TV </TD>
<TD class="confluenceTd"> &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;  &nbsp;&nbsp;  &nbsp;&nbsp;  &nbsp;&nbsp;  &nbsp;&nbsp; <BR class="atl-forced-newline">
 &nbsp; <BR class="atl-forced-newline">
&nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;  &nbsp;&nbsp;  &nbsp;&nbsp;  &nbsp;&nbsp;  &nbsp;&nbsp;  &nbsp;&nbsp; <SPAN class="image-wrap" style=""><IMG src="upnp-getting-started.data/UPnPLight.jpg" style="border: 0px solid black"></SPAN><BR class="atl-forced-newline">
&nbsp; <BR class="atl-forced-newline">
 &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; d) UPnP BinaryLight </TD>
</TR>
</TBODY></TABLE>
</DIV>

<P><B>Figure 3</B> The GUIs started by the script &quot;upnp.sh.bat&quot;</P>

<P>The Felix build process by default uses the JDK1.4 as target class library for all the UPnP bundles. The UPnP Base Driver can be built also with the JDK1.3 as target; to this end you have to define the &quot;platform&quot; property in the command line: type &quot;mvn Dplatform=jdk13 install&quot; from the /upnp/basedriver directory. For details on configuring your Eclipse IDE see [3].</P>

<H3><A name="UPnPGettingStarted-CommonIssues"></A>Common Issues</H3>

<P>If you experience problems discovering the UPnP devices of your network:</P>
<UL>
	<LI>Check the configuration of your firewalls. UPnP discovery is based on multicast messages over UDP that usually are not filtered by firewalls, on the contrary the XML description of devices is retrieved using HTTP protocol; usually bound to non standard ports which might be blocked. Check whether firewall is active on your host or on the host of the device you want discover.</LI>
	<LI>Install a loopback interface if needed. The base driver by default is configured for not using the localhost as loopback interface. If you want to run and test UPnP devices on a machine disconnected by any network, you should install and activate a loopback interface. Pay attention to disable the loopback interface when you are connected to a network again, otherwise both interfaces will be used to expose the UPnP services registered with the framework.
<BR class="atl-forced-newline">
<BR class="atl-forced-newline"></LI>
</UL>


<H5><A name="UPnPGettingStarted-IntroductionApacheFelixUPnP%3C%3C%5C%3E%3EOverviewoftheBaseDriverArchitectureUPnPDriverarchitecture"></A><A href="apache-felix-upnp.html" title="Apache Felix UPnP">Introduction </A> &lt;&lt; &#124; &gt;&gt; <A href="upnp-driver-architecture.html" title="UPnP Driver architecture">Overview of the Base Driver Architecture</A></H5>

<HR>
<P>[1] The actual version of the bundles may be different</P>
        <DIV class="timestamp" style="margin-top: 30px; font-size: 80%; text-align: right;">
Last modified by francesco.furfari@isti.cnr.it on 2008-04-15 14:37:56.0
        </DIV>
        <DIV class="trademarkFooter">
Apache Felix, Felix, Apache, the Apache feather logo, and the Apache Felix project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners.
        </DIV>
    </DIV>
  </BODY>
</HTML>
