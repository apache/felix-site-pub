
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<HTML>
  <HEAD>
    <TITLE>Apache Felix - 3. Installation</TITLE>
    <LINK rel="stylesheet" href="http://felix.apache.org/site/media.data/site.css" type="text/css" media="all">
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8">
  </HEAD>
  <BODY>
    <DIV class="title"><DIV class="logo"><A href="http://felix.apache.org/site/index.html"><IMG border="0" alt="Apache Felix" src="http://felix.apache.org/site/media.data/logo.png"></A></DIV><DIV class="header"><A href="http://www.apache.org/"><IMG border="0" alt="Apache" src="http://felix.apache.org/site/media.data/apache.png"></A></DIV></DIV>
    <DIV class="menu">
<UL>
	<LI><A href="news.html" title="news">news</A></LI>
	<LI><A href="license.html" title="license">license</A></LI>
	<LI><A href="http://felix.apache.org/site/downloads.cgi" class="external-link" rel="nofollow">downloads</A></LI>
	<LI><A href="documentation.html" title="documentation">documentation</A></LI>
	<LI><A href="mailinglists.html" title="mailinglists">mailing lists</A></LI>
	<LI><A href="contributing.html" title="Contributing">contributing</A></LI>
	<LI><A href="http://www.apache.org/" class="external-link" rel="nofollow">asf</A></LI>
	<LI><A href="http://www.apache.org/foundation/sponsorship.html" class="external-link" rel="nofollow">sponsorship</A></LI>
	<LI><A href="http://www.apache.org/foundation/thanks.html" class="external-link" rel="nofollow">sponsors</A>
<!-- ApacheCon Ad -->
<IFRAME src="http://www.apache.org/ads/button.html" style="border-width:0; float: left" frameborder="0" scrolling="no" width="135" height="135"></IFRAME>
<P style="height: 100px">
<!-- ApacheCon Ad --></LI>
</UL>
    </DIV>
    <DIV class="main">
<STYLE type="text/css">/*<![CDATA[*/
table.ScrollbarTable  {border: none;padding: 3px;width: 100%;padding: 3px;margin: 0px;background-color: #f0f0f0}
table.ScrollbarTable td.ScrollbarPrevIcon {text-align: center;width: 16px;border: none;}
table.ScrollbarTable td.ScrollbarPrevName {text-align: left;border: none;}
table.ScrollbarTable td.ScrollbarParent {text-align: center;border: none;}
table.ScrollbarTable td.ScrollbarNextName {text-align: right;border: none;}
table.ScrollbarTable td.ScrollbarNextIcon {text-align: center;width: 16px;border: none;}

/*]]>*/</STYLE><DIV class="Scrollbar"><TABLE class="ScrollbarTable"><TR><TD class="ScrollbarPrevIcon"><A href="2-quick-start.html"><IMG border="0" align="middle" src="http://cwiki.apache.org/confluence/images/icons/back_16.gif" width="16" height="16"></A></TD><TD width="33%" class="ScrollbarPrevName"><A href="2-quick-start.html">2. Quick Start</A>&nbsp;</TD><TD width="33%" class="ScrollbarParent"><SUP><A href="karaf-users-guide.html"><IMG border="0" align="middle" src="http://cwiki.apache.org/confluence/images/icons/up_16.gif" width="8" height="8"></A></SUP><A href="karaf-users-guide.html">Karaf Users' Guide</A></TD><TD width="33%" class="ScrollbarNextName">&nbsp;<A href="4-understanding-karaf.html">4. Understanding Karaf</A></TD><TD class="ScrollbarNextIcon"><A href="4-understanding-karaf.html"><IMG border="0" align="middle" src="http://cwiki.apache.org/confluence/images/icons/forwd_16.gif" width="16" height="16"></A></TD></TR></TABLE></DIV>
<P><A name="3.Installation-top"></A></P>

<H1><A name="3.Installation-3.Installation"></A>3. Installation</H1>

<P>This document describes how to install and configure Apache Felix Karaf for both Unix and Windows' platforms.<BR>
Here you will find information about what are pre requisite software, where to download Karaf from and how to customize the installation to use custom ports other than the defaults.</P>

<P>This article contains the following sections:</P>
<DIV>
<UL>
    <LI><A href="#3.Installation-PreInstallationRequirements">Pre-Installation Requirements</A></LI>
    <LI><A href="#3.Installation-InstallationProcedureforWindows">Installation Procedure for Windows</A></LI>
<UL>
    <LI><A href="#3.Installation-WindowsBinaryInstallation">Windows Binary Installation</A></LI>
    <LI><A href="#3.Installation-WindowsSourceInstallation">Windows Source Installation</A></LI>
</UL>
    <LI><A href="#3.Installation-InstallationProcedureForUnix">Installation Procedure For Unix</A></LI>
<UL>
    <LI><A href="#3.Installation-UnixBinaryInstallation">Unix Binary Installation</A></LI>
    <LI><A href="#3.Installation-UnixSourceInstallation">Unix Source Installation</A></LI>
</UL>
    <LI><A href="#3.Installation-StartingKaraf">Starting Karaf</A></LI>
<UL>
    <LI><A href="#3.Installation-OnWindows">On Windows</A></LI>
    <LI><A href="#3.Installation-OnUnix">On Unix</A></LI>
</UL>
    <LI><A href="#3.Installation-TestingtheInstallation">Testing the Installation</A></LI>
    <LI><A href="#3.Installation-StoppingKaraf">Stopping Karaf</A></LI>
</UL></DIV>

<H2><A name="3.Installation-PreInstallationRequirements"></A>Pre-Installation Requirements</H2>

<P><B>Hardware:</B></P>
<UL>
	<LI>5 MB of free disk space for the Apache Felix Karaf x.y binary distribution.</LI>
	<LI>3 MB of free disk space for the Apache Felix Karaf x.y source distributions or SVN checkout. The Maven build requires roughly 57 MB disk space and for the dependencies Maven downloads during building further 76 MB are required. As a lot of small files are produced, the exact space demands depend greatly on your cluster utilization ratio.</LI>
</UL>


<P><B>Operating Systems:</B></P>
<UL>
	<LI>Windows: Windows XP SP2, Windows 2000.</LI>
	<LI>Unix: Ubuntu Linux, Powerdog Linux, MacOS, AIX, HP-UX, Solaris, any Unix platform that supports Java.</LI>
</UL>


<P><B>Environment:</B></P>
<UL>
	<LI>Java Developer Kit (JDK) 1.5.x or greater (<A href="http://java.sun.com/" class="external-link" rel="nofollow">http://java.sun.com/</A>).</LI>
	<LI>The JAVA_HOME environment variable must be set to the directory where the JDK is installed, e.g., <TT>c:\Program Files\jdk.1.5.0_06</TT>. To accomplish that, press Windows key and Break key together, switch to &quot;Advanced&quot; tab and click on &quot;Environment Variables&quot;. Here, check for the variable and, if necessary, add it.</LI>
	<LI>Apache Maven 2.0.8 (<A href="http://maven.apache.org/download.html" class="external-link" rel="nofollow">http://maven.apache.org/download.html</A>).</LI>
</UL>


<H2><A name="3.Installation-InstallationProcedureforWindows"></A>Installation Procedure for Windows</H2>

<P>This section of the Getting Started guide explains how to install binary and source distributions of Karaf on a Windows system.</P>
<DIV class="panelMacro"><TABLE class="tipMacro"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://cwiki.apache.org/confluence/images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B>Handy Hint</B><BR>In case you have to install Karaf into a very deep path or a path containing illegal characters for Java paths, e.g. &#33;, % etc., you may add a bat file to <EM>start &#45;&gt; startup</EM> that executes
<DIV class="preformatted panel" style="border-width: 1px;"><DIV class="preformattedContent panelContent">
<PRE>subst S: &quot;C:\your very % problematic path!\KARAF&quot;
</PRE>
</DIV></DIV>
<P>so your Karaf root directory is S: &mdash; which works for sure and is short to type.</P></TD></TR></TABLE></DIV>

<H3><A name="3.Installation-WindowsBinaryInstallation"></A>Windows Binary Installation</H3>

<P>This procedure explains how to download and install the binary distribution on a Windows system.</P>
<OL>
	<LI>From a browser, navigate to <A href="http://felix.apache.org/site/downloads.cgi" class="external-link" rel="nofollow">http://felix.apache.org/site/downloads.cgi</A>.</LI>
	<LI>Scroll down to the &quot;Apache Felix Karaf&quot; section and select the desired distribution.<BR>
For a binary distribution, the filename will be similar to: <TT>apache-felix-karaf-x.y.zip</TT>.</LI>
	<LI>Extract the files from the ZIP file into a directory of your choice. Please remember the restrictions concerning illegal characters in Java paths, e.g. &#33;, % etc.</LI>
	<LI>Proceed to the <A href="#3.Installation-StartingKaraf">Starting Karaf</A> section of this document.</LI>
	<LI>Following start-up, go to the <A href="#3.Installation-TestingtheInstallation">Testing the Installation</A> section of this document.</LI>
	<LI>Optional: see <A href="71-enabling-colorized-console-output-on-windows.html" title="7.1. Enabling Colorized Console Output On Windows">7.1. Enabling Colorized Console Output On Windows</A></LI>
</OL>


<H3><A name="3.Installation-WindowsSourceInstallation"></A>Windows Source Installation</H3>

<P>This procedure explains how to download and install the source distribution on a Windows system. <B>NOTE:</B> Karaf requires Java 5 is compile, build and run.</P>
<OL>
	<LI>From a browser, navigate to <A href="http://felix.apache.org/site/downloads.cgi" class="external-link" rel="nofollow">http://felix.apache.org/site/downloads.cgi</A>.</LI>
	<LI>Scroll down to the &quot;Apache Felix Karaf&quot; section and select the desired distribution.<BR>
For a source distribution, the filename will be similar to: <TT>apache-felix-karaf-x.y-src.zip</TT>.</LI>
	<LI>Extract Karaf from the ZIP file into a directory of your choice. Please remember the restrictions concerning illegal characters in Java paths, e.g. &#33;, % etc.</LI>
	<LI><A name="3.Installation-WindowsSourceInstallation"></A> Build Karaf using Maven 2.0.8 or greater and Java 5.<BR>
The recommended method of building Karaf is the following:
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
cd [karaf_install_dir]\\src
</PRE>
</DIV></DIV>
<P> where <TT>[karaf_install_dir]</TT> is the directory in which Karaf was installed.</P>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
mvn
</PRE>
</DIV></DIV>
<P>Both steps take around 10 to 15 minutes.</P></LI>
	<LI>Unzip the distribution using your favorite zip tool. The windows distribution is available at
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
[karaf_install_dir]\assembly\target\apache-felix-karaf-x.y.zip
</PRE>
</DIV></DIV></LI>
	<LI>Proceed to the <A href="#3.Installation-StartingKaraf">Starting Karaf</A> section of this document.</LI>
	<LI>Following start-up, go to the <A href="#3.Installation-TestingtheInstallation">Testing the Installation</A> section of this document.</LI>
	<LI>Optional: see <A href="71-enabling-colorized-console-output-on-windows.html" title="7.1. Enabling Colorized Console Output On Windows">7.1. Enabling Colorized Console Output On Windows</A></LI>
</OL>


<H2><A name="3.Installation-InstallationProcedureForUnix"></A>Installation Procedure For Unix</H2>

<H3><A name="3.Installation-UnixBinaryInstallation"></A>Unix Binary Installation</H3>

<P>This procedure explains how to download and install the binary distribution on a Unix system.</P>
<OL>
	<LI>From a browser, navigate to <A href="http://felix.apache.org/site/downloads.cgi" class="external-link" rel="nofollow">http://felix.apache.org/site/downloads.cgi</A>.</LI>
	<LI>Scroll down to the &quot;Apache Felix Karaf&quot; section and select the desired distribution.<BR>
For a binary Unix distribution, the filename will be similar to: apache-felix-karaf-x.y.tar.gz.</LI>
	<LI>Extract the files from the gzip file into a directory of your choice. For example:
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
gunzip apache-felix-karaf-x.y.tar.gz
tar xvf apache-felix-karaf-x.y.tar
</PRE>
</DIV></DIV>
<P>Please remember the restrictions concerning illegal characters in Java paths, e.g. &#33;, % etc.</P></LI>
	<LI>Proceed to the <A href="#3.Installation-StartingKaraf">Starting Karaf</A> section of this document.</LI>
	<LI>Following start-up, go to the <A href="#3.Installation-TestingtheInstallation">Testing the Installation</A> section.</LI>
</OL>


<H3><A name="3.Installation-UnixSourceInstallation"></A>Unix Source Installation</H3>

<P>This procedure explains how to download and install the source distribution on a Unix system. This procedure assumes the Unix machine has a browser. Please see the previous <A href="#3.Installation-UnixBinaryInstallation">Unix Binary Installation</A> section for ideas on how to install Karaf without a browser. <B>NOTE:</B> Karaf requires Java 5 to compile, build and run.</P>
<OL>
	<LI>From a browser, navigate to <A href="http://felix.apache.org/site/downloads.cgi" class="external-link" rel="nofollow">http://felix.apache.org/site/downloads.cgi</A>.</LI>
	<LI>Scroll down to the &quot;Apache Felix Karaf&quot; section and select the desired distribution.<BR>
For a source distribution, the filename will be similar to: <TT>apache-felix-karaf-x.y-src.tar.gz</TT>.</LI>
	<LI>Extract the files from the ZIP file into a directory of your choice. For example:
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
gunzip apache-felix-karaf-x.y-src.tar.gz
tar xvf apache-felix-karaf-x.y-src.tar
</PRE>
</DIV></DIV>
<P>Please remember the restrictions concerning illegal characters in Java paths, e.g. &#33;, % etc.</P></LI>
	<LI>Build Karaf using Maven 2.0.8 or greater and Java 5:
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
The preferred method of building Karaf is the following:
cd [karaf_install_dir]/src
 where [karaf_install_dir] is the directory in which Karaf was installed.
mvn
</PRE>
</DIV></DIV></LI>
	<LI>Uncompress the distribution that has just been created
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
cd [karaf_install_dir]/assembly/target
gunzip apache-felix-karaf-x.y.tar.gz
tar xvf apache-felix-karaf-x.y.tar
</PRE>
</DIV></DIV></LI>
	<LI>Proceed to the <A href="#3.Installation-StartingKaraf">Starting Karaf</A> section of this document.</LI>
	<LI>Following start-up, go to the <A href="#3.Installation-TestingtheInstallation">Testing the Installation</A> section.</LI>
</OL>



<H2><A name="3.Installation-StartingKaraf"></A>Starting Karaf</H2>


<H3><A name="3.Installation-OnWindows"></A>On Windows</H3>

<P>From a console window, change to the installation directory and run <TT>Karaf</TT>. For the binary distribution, go to</P>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
cd [karaf_install_dir]
</PRE>
</DIV></DIV>
<P>and for the source distribution go to the target directory, for example:</P>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
cd [karaf_install_dir]\src\assembly\target\apache-felix-karaf-x.y-SNAPSHOT
</PRE>
</DIV></DIV>
<P>where <TT>karaf_install_dir</TT> is the directory in which Karaf was installed, e.g., <TT>c:\Program Files\apache-felix-karaf-x.y</TT>.</P>

<P>Then type:</P>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
bin\karaf.bat
</PRE>
</DIV></DIV>
<P><EM>Note:</EM> Working directories get created relative to the current directory. For the working directories to be created in the proper place, Karaf must be launched from its home/installation directory.</P>

<H3><A name="3.Installation-OnUnix"></A>On Unix</H3>

<P>From a command shell, change to the installation directory and run <TT>Karaf</TT>. For the binary distribution, go to</P>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
cd [karaf_install_dir]
</PRE>
</DIV></DIV>
<P>and for the source distribution go to the target directory, for example:</P>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
cd [karaf_install_dir]/src/assembly/target/apache-felix-karaf-x.y
</PRE>
</DIV></DIV>
<P>where <TT>karaf_install_dir</TT> is the directory in which Karaf was installed, e.g., <TT>/usr/local/apache-felix-karaf-x.y</TT>.</P>

<P>Then type:</P>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
bin/karaf.sh
</PRE>
</DIV></DIV>

<DIV class="panelMacro"><TABLE class="warningMacro"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="http://cwiki.apache.org/confluence/images/icons/emoticons/forbidden.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B>Warning</B><BR>Do NOT close the console or shell in which Karaf was started, as that will terminate Karaf (unless Karaf was started with nohup).</TD></TR></TABLE></DIV>

<H2><A name="3.Installation-TestingtheInstallation"></A>Testing the Installation</H2>

<P>If Karaf is up and running without problems, the Window's console window or the Unix command shell will display something similar to the following log line:</P>
<DIV class="code panel" style="border-style: solid;border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
        __ __                  ____      
       / <SPAN class="code-comment">//_/____ __________ _/ __/      
</SPAN>      / ,&lt;  / __ `/ ___/ __ `/ /_        
     / /| |/ /_/ / /  / /_/ / __/        
    /_/ |_|\__,_/_/   \__,_/_/         

  Apache Felix Karaf (1.0.0)

Hit '&lt;tab&gt;' <SPAN class="code-keyword">for</SPAN> a list of available commands
and '[cmd] --help' <SPAN class="code-keyword">for</SPAN> help on a specific command.

karaf@root&gt; 
</PRE>
</DIV></DIV>

<H2><A name="3.Installation-StoppingKaraf"></A>Stopping Karaf</H2>

<P>For both Windows and Unix installations, you can perform a clean shutdown of Karaf Kernel by using the following command:</P>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
osgi:shutdown
</PRE>
</DIV></DIV>

<P>If Karaf was started in the background on Unix, the process can be killed, with the following:</P>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
ps -ef | grep karaf
kill [PID]
 where [PID] is the process id of the Karaf process.
</PRE>
</DIV></DIV>

<P><A href="#3.Installation-top">top</A></P>
<STYLE type="text/css">/*<![CDATA[*/
table.ScrollbarTable  {border: none;padding: 3px;width: 100%;padding: 3px;margin: 0px;background-color: #f0f0f0}
table.ScrollbarTable td.ScrollbarPrevIcon {text-align: center;width: 16px;border: none;}
table.ScrollbarTable td.ScrollbarPrevName {text-align: left;border: none;}
table.ScrollbarTable td.ScrollbarParent {text-align: center;border: none;}
table.ScrollbarTable td.ScrollbarNextName {text-align: right;border: none;}
table.ScrollbarTable td.ScrollbarNextIcon {text-align: center;width: 16px;border: none;}

/*]]>*/</STYLE><DIV class="Scrollbar"><TABLE class="ScrollbarTable"><TR><TD class="ScrollbarPrevIcon"><A href="2-quick-start.html"><IMG border="0" align="middle" src="http://cwiki.apache.org/confluence/images/icons/back_16.gif" width="16" height="16"></A></TD><TD width="33%" class="ScrollbarPrevName"><A href="2-quick-start.html">2. Quick Start</A>&nbsp;</TD><TD width="33%" class="ScrollbarParent"><SUP><A href="karaf-users-guide.html"><IMG border="0" align="middle" src="http://cwiki.apache.org/confluence/images/icons/up_16.gif" width="8" height="8"></A></SUP><A href="karaf-users-guide.html">Karaf Users' Guide</A></TD><TD width="33%" class="ScrollbarNextName">&nbsp;<A href="4-understanding-karaf.html">4. Understanding Karaf</A></TD><TD class="ScrollbarNextIcon"><A href="4-understanding-karaf.html"><IMG border="0" align="middle" src="http://cwiki.apache.org/confluence/images/icons/forwd_16.gif" width="16" height="16"></A></TD></TR></TABLE></DIV>
    </DIV>
  </BODY>
</HTML>
