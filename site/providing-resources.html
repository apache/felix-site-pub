
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<HTML>
  <HEAD>
    <TITLE>Apache Felix - Providing Resources</TITLE>
    <LINK rel="stylesheet" href="http://felix.apache.org/site/media.data/site.css" type="text/css" media="all">
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8">
  </HEAD>
  <BODY>
    <DIV class="title"><DIV class="logo"><A href="http://felix.apache.org/site/index.html"><IMG border="0" alt="Apache Felix" src="http://felix.apache.org/site/media.data/logo.png"></A></DIV><DIV class="header"><A href="http://www.apache.org/"><IMG border="0" alt="Apache" src="http://felix.apache.org/site/media.data/apache.png"></A></DIV></DIV>
    <DIV class="menu">
<UL>
	<LI><A href="news.html" title="news">news</A></LI>
	<LI><A href="http://www.apache.org/licenses/" class="external-link" rel="nofollow">license</A></LI>
	<LI><A href="http://felix.apache.org/site/downloads.cgi" class="external-link" rel="nofollow">downloads</A></LI>
	<LI><A href="documentation.html" title="documentation">documentation</A></LI>
	<LI><A href="mailinglists.html" title="mailinglists">mailing lists</A></LI>
	<LI><A href="contributing.html" title="Contributing">contributing</A></LI>
	<LI><A href="http://www.apache.org/" class="external-link" rel="nofollow">asf</A></LI>
	<LI><A href="http://www.apache.org/security/" class="external-link" rel="nofollow">security</A></LI>
	<LI><A href="http://www.apache.org/foundation/sponsorship.html" class="external-link" rel="nofollow">sponsorship</A></LI>
	<LI><A href="http://www.apache.org/foundation/thanks.html" class="external-link" rel="nofollow">sponsors</A>
<!-- ApacheCon Ad -->
<IFRAME src="http://www.apache.org/ads/button.html" style="border-width:0; float: left" frameborder="0" scrolling="no" width="135" height="135"></IFRAME>
<P style="height: 100px">
<!-- ApacheCon Ad --></LI>
</UL>
    </DIV>
    <DIV class="main">
<H1><A name="ProvidingResources-ProvidingResources"></A>Providing Resources</H1>


<P>Extending the Apache Felix Web Console with new functionality is as easy as registering a <TT>javax.servlet.Servlet</TT> with at least the <TT>felix.webconsole.label</TT> service registration property set (see above). Providing resources is a bit more complex and requires more work on behalf of the plugin.</P>

<P>Out of the box the Apache Felix Web Console plugin servces resources through the OSGi <TT>HttpContext</TT> used to register the web console with OSGi <TT>HttpService</TT>. This is done by registering resources with the <TT>HttpService</TT> below the <TT>/res</TT> alias. This mechanism though does not lend itself for easy extensibility. Therefore another mechanism has been chosen, which relies on similar mechanisms.</P>

<P>A web console plugin may implement a <TT>getResource</TT> method which is looked up using reflection. This method is called by the <TT>AbstractWebConsole.doGet</TT> to check whether the request is actually for a resource.</P>

<P>The method has the following signature:</P>

<DIV class="preformatted panel" style="border-width: 1px;"><DIV class="preformattedContent panelContent">
<PRE>modifier URL getResource(String path);
</PRE>
</DIV></DIV>

<P>Where the <EM>modifier</EM> may be <TT>public</TT>, <TT>protected</TT>, or <TT>private</TT> (if the method is declared in the class of the resource provider). It is suggested to use the <TT>private</TT> modifier if the method is declared in the resource provider class or the <TT>protected</TT> modifier if the method is declared in a base class of the resource provider.</P>

<P>This method is called with the path info of the request (<TT>HttpServletRequest.getPathInfo()</TT>) and expects and URL to the resource to be sent to the client. If the path cannot be resolved to a resource the <TT>getResource</TT> method is expected to return <TT>null</TT> thus causing regular processing of rendering the page.</P>

<P>If the <TT>getResource</TT> method returns an accessible non-<TT>null</TT> URL, the request is serviced by sending back the contents of the given URL. Simple caching support is included which handles the <TT>If-Modified-Since</TT> header and sets the <TT>Last-Modified</TT> header from the resource URL.</P>


        <DIV class="timestamp" style="margin-top: 30px; font-size: 80%; text-align: right;">
Last modified by fmeschbe on 2009-09-07 08:22:27.0
        </DIV>
        <DIV class="trademarkFooter">
Apache Felix, Felix, Apache, the Apache feather logo, and the Apache Felix project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners.
        </DIV>
    </DIV>
  </BODY>
</HTML>
