
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<HTML>
  <HEAD>
    <TITLE>Apache Felix - Apache Felix Framework FAQ</TITLE>
    <LINK rel="stylesheet" href="http://felix.apache.org/site/media.data/site.css" type="text/css" media="all">
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8">
  </HEAD>
  <BODY>
    <DIV class="title"><DIV class="logo"><A href="http://felix.apache.org/site/index.html"><IMG border="0" alt="Apache Felix" src="http://felix.apache.org/site/media.data/logo.png"></A></DIV><DIV class="header"><A href="http://www.apache.org/"><IMG border="0" alt="Apache" src="http://felix.apache.org/site/media.data/apache.png"></A></DIV></DIV>
    <DIV class="menu">
<UL>
	<LI><A href="news.html" title="news">news</A></LI>
	<LI><A href="http://www.apache.org/licenses/" class="external-link" rel="nofollow">license</A></LI>
	<LI><A href="http://felix.apache.org/site/downloads.cgi" class="external-link" rel="nofollow">downloads</A></LI>
	<LI><A href="documentation.html" title="documentation">documentation</A></LI>
	<LI><A href="mailinglists.html" title="mailinglists">mailing lists</A></LI>
	<LI><A href="contributing.html" title="Contributing">contributing</A></LI>
	<LI><A href="http://www.apache.org/" class="external-link" rel="nofollow">asf</A></LI>
	<LI><A href="http://www.apache.org/security/" class="external-link" rel="nofollow">security</A></LI>
	<LI><A href="http://www.apache.org/foundation/sponsorship.html" class="external-link" rel="nofollow">sponsorship</A></LI>
	<LI><A href="http://www.apache.org/foundation/thanks.html" class="external-link" rel="nofollow">sponsors</A>
<!-- ApacheCon Ad -->
<IFRAME src="http://www.apache.org/ads/button.html" style="border-width:0; float: left" frameborder="0" scrolling="no" width="135" height="135"></IFRAME>
<P style="height: 100px">
<!-- ApacheCon Ad --></LI>
</UL>
    </DIV>
    <DIV class="main">
<H1><A name="ApacheFelixFrameworkFAQ-ApacheFelixFrameworkFrequentlyAskedQuestions"></A>Apache Felix Framework Frequently Asked Questions</H1>

<STYLE type="text/css">/*<![CDATA[*/
div.rbtoc1316450395397 {margin-left: 1.5em;padding: 0px;}
div.rbtoc1316450395397 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1316450395397 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</STYLE><DIV class="rbtoc1316450395397">
<UL>
    <LI><A href="#ApacheFelixFrameworkFAQ-ApacheFelixFrameworkFrequentlyAskedQuestions">Apache Felix Framework Frequently Asked Questions</A></LI>
<UL>
    <LI><A href="#ApacheFelixFrameworkFAQ-IstheFelixframeworkcompliantwiththeOSGispecification%253F">Is the Felix framework compliant with the OSGi specification?</A></LI>
    <LI><A href="#ApacheFelixFrameworkFAQ-IfIusebundlesfromFelix%252CwillmyapplicationbetiedtotheFelixframework%253F">If I use bundles from Felix, will my application be tied to the Felix framework?</A></LI>
    <LI><A href="#ApacheFelixFrameworkFAQ-WhenIupdatemybundle%252Cwhyaremybundle%2527soldclassesstillbeingused%253F">When I update my bundle, why are my bundle's old classes still being used?</A></LI>
    <LI><A href="#ApacheFelixFrameworkFAQ-WhydoIgetan%2522Unknownprotocol%253Ahttp%2522exceptionwhenIrunFelixonanonSunJRE%253F">Why do I get an &quot;Unknown protocol: http&quot; exception when I run Felix on a non-Sun JRE?</A></LI>
    <LI><A href="#ApacheFelixFrameworkFAQ-Whatisthedaemonstatusofframeworkcreatedthreads%253F">What is the daemon status of framework created threads?</A></LI>
</UL>
</UL></DIV>

<H2><A name="ApacheFelixFrameworkFAQ-IstheFelixframeworkcompliantwiththeOSGispecification%3F"></A>Is the Felix framework compliant with the OSGi specification?</H2>

<P>Refer to the <A href="https://cwiki.apache.org/confluence/pages/createpage.action?spaceKey=FELIX&title=Apache%20Felix%20Framework%20OSGi%20R4.2%20CT%20Results&linkCreation=true&fromPageId=81453" class="createlink">Apache Felix Framework OSGi R4.2 CT Results</A> document.</P>

<H2><A name="ApacheFelixFrameworkFAQ-IfIusebundlesfromFelix%2CwillmyapplicationbetiedtotheFelixframework%3F"></A>If I use bundles from Felix, will my application be tied to the Felix framework?</H2>

<P>See the answer in the <A href="apache-felix-osgi-faq.html#ApacheFelixOSGiFAQ-felixdependencies">OSGi FAQ</A>.</P>

<H2><A name="ApacheFelixFrameworkFAQ-WhenIupdatemybundle%2Cwhyaremybundle%27soldclassesstillbeingused%3F"></A>When I update my bundle, why are my bundle's old classes still being used?</H2>

<P>See the answer in the <A href="apache-felix-osgi-faq.html#ApacheFelixOSGiFAQ-bundlenotupdated">OSGi FAQ</A>.</P>

<H2><A name="ApacheFelixFrameworkFAQ-WhydoIgetan%22Unknownprotocol%3Ahttp%22exceptionwhenIrunFelixonanonSunJRE%3F"></A>Why do I get an &quot;Unknown protocol: http&quot; exception when I run Felix on a non-Sun JRE?</H2>

<P>Felix installs the URL Handlers service by default. If you do not want this service you can disable it, by setting the <TT>felix.service.urlhandlers</TT> property to <TT>false</TT> in the <TT>config.properties</TT> file. It is not recommended to disable this, but the main reason for doing so it because the URL Handlers implementation invokes methods to set the singleton factories for URL stream and content handler factories. Assuming that you want to use URL Handlers service, you must configure it if you aren't running on the standard Sun JRE.</P>

<P>The URL Handlers service extends the standard Java URL stream and content handler mechanism to work in an OSGi environment. The way that built-in URL protocol and content handlers are discovered is by probing packages for the appropriate classes to handle the protocol/content. For example, the default package for Sun protocol handlers is:</P>

<DIV class="preformatted panel" style="border-width: 1px;"><DIV class="preformattedContent panelContent">
<PRE>sun.net.www.protocol
</PRE>
</DIV></DIV>

<P>If someone tries to create a URL for the &quot;http&quot; protocol, then the class to handle the protocol will be:</P>

<DIV class="preformatted panel" style="border-width: 1px;"><DIV class="preformattedContent panelContent">
<PRE>sun.net.www.protocol.http.Handler
</PRE>
</DIV></DIV>

<P>A similar process is followed for content handlers, whose default package is:</P>

<DIV class="preformatted panel" style="border-width: 1px;"><DIV class="preformattedContent panelContent">
<PRE>sun.net.www.content
</PRE>
</DIV></DIV>

<P>If you are running on a VM that is different than Sun's, then you must determine what are the default packages used for its protocol and content handlers. Once you know this information, then you can configure Felix to use those packages instead of the default one. You can configure Felix by setting the following system properties:</P>

<DIV class="preformatted panel" style="border-width: 1px;"><DIV class="preformattedContent panelContent">
<PRE>java.protocol.handler.pkgs
</PRE>
</DIV></DIV>

<P>and</P>

<DIV class="preformatted panel" style="border-width: 1px;"><DIV class="preformattedContent panelContent">
<PRE>java.content.handler.pkgs
</PRE>
</DIV></DIV>

<P>The value of these properties is a list of &quot;|&quot; delimited package names to be searched for protocol and content handlers, respectively. See the Java documentation for <A href="http://java.sun.com/javase/6/docs/api/java/net/URL.html#URL(java.lang.String,%2520java.lang.String,%2520int,%2520java.lang.String)" class="external-link" rel="nofollow">stream</A> and <A href="http://java.sun.com/javase/6/docs/api/java/net/URLConnection.html#getContent()" class="external-link" rel="nofollow">content</A> handlers for more information.</P>

<P>There are two ways to set these system properties. The first way is using the standard <TT>-D&lt;property&gt;=&lt;value&gt;</TT> syntax when executing <TT>java</TT> or if you are using Felix' standard <TT>Main.java</TT> launcher, you can put the system properties into the <TT>conf/system.properties</TT> file so that they get set automatically each time you execute Felix.</P>

<H2><A name="ApacheFelixFrameworkFAQ-Whatisthedaemonstatusofframeworkcreatedthreads%3F"></A>What is the daemon status of framework created threads?</H2>

<P>The framework creates a few threads for handling specific tasks, such as event delivery or handling start level change requests. All framework threads are explicitly started as daemon threads except the event dispatcher thread. The logic behind this is that the event dispatcher thread should exit when it is done delivering events. However, if an application is hosting an instance of the framework, it is possible to make the event dispatcher thread a daemon by starting your framework instance from a daemon thread, in which case the event dispatcher thread will inherit this setting.</P>

<P>For bundle developers, it is probably best to explicitly define any created threads as daemon or non-daemon to avoid any ambiguity.</P>

        <DIV class="timestamp" style="margin-top: 30px; font-size: 80%; text-align: right;">
Last modified by heavy@ungoverned.org on Mon Sep 19 12:39:53 EDT 2011
        </DIV>
        <DIV class="trademarkFooter">
Apache Felix, Felix, Apache, the Apache feather logo, and the Apache Felix project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners.
        </DIV>
    </DIV>
  </BODY>
</HTML>
