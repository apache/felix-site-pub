
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<HTML>
  <HEAD>
    <TITLE>Apache Felix - Apache Felix User Admin - Getting Started</TITLE>
    <LINK rel="stylesheet" href="http://felix.apache.org/site/media.data/site.css" type="text/css" media="all">
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8">
  </HEAD>
  <BODY>
    <DIV class="title"><DIV class="logo"><A href="http://felix.apache.org/site/index.html"><IMG border="0" alt="Apache Felix" src="http://felix.apache.org/site/media.data/logo.png"></A></DIV><DIV class="header"><A href="http://www.apache.org/"><IMG border="0" alt="Apache" src="http://felix.apache.org/site/media.data/apache.png"></A></DIV></DIV>
    <DIV class="menu">
<UL>
	<LI><A href="news.html" title="news">news</A></LI>
	<LI><A href="http://www.apache.org/licenses/" class="external-link" rel="nofollow">license</A></LI>
	<LI><A href="http://felix.apache.org/site/downloads.cgi" class="external-link" rel="nofollow">downloads</A></LI>
	<LI><A href="documentation.html" title="documentation">documentation</A></LI>
	<LI><A href="mailinglists.html" title="mailinglists">mailing lists</A></LI>
	<LI><A href="contributing.html" title="Contributing">contributing</A></LI>
	<LI><A href="http://www.apache.org/" class="external-link" rel="nofollow">asf</A></LI>
	<LI><A href="http://www.apache.org/security/" class="external-link" rel="nofollow">security</A></LI>
	<LI><A href="http://www.apache.org/foundation/sponsorship.html" class="external-link" rel="nofollow">sponsorship</A></LI>
	<LI><A href="http://www.apache.org/foundation/thanks.html" class="external-link" rel="nofollow">sponsors</A>
<!-- ApacheCon Ad -->
<IFRAME src="http://www.apache.org/ads/button.html" style="border-width:0; float: left" frameborder="0" scrolling="no" width="135" height="135"></IFRAME>
<P style="height: 100px">
<!-- ApacheCon Ad --></LI>
</UL>
    </DIV>
    <DIV class="main">
<H2><A name="ApacheFelixUserAdmin-GettingStarted-Authentication"></A>Authentication</H2>

<P>To test whether an initiator of an action is known to the UserAdmin service, it should be authenticated. To authenticate a user, you typically do something like:</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
<SPAN class="code-keyword">private</SPAN> UserAdmin m_userAdmin;
<SPAN class="code-comment">// ...
</SPAN>User user = m_userAdmin.getUser(<SPAN class="code-quote">&quot;username&quot;</SPAN>, getUserName());
<SPAN class="code-keyword">if</SPAN> (user == <SPAN class="code-keyword">null</SPAN> || !user.hasCredential(<SPAN class="code-quote">&quot;password&quot;</SPAN>, getPassword())) {
  <SPAN class="code-keyword">throw</SPAN> <SPAN class="code-keyword">new</SPAN> InvalidUsernameOrPasswordException();
}
</PRE>
</DIV></DIV>

<H2><A name="ApacheFelixUserAdmin-GettingStarted-Authorization"></A>Authorization</H2>

<P>Only authorized users should be able to initiate privileged actions. Whether a user is authorized to do so depends on its membership in groups. The UserAdmin service aids in this by providing an <TT>Authorization</TT> facade that helps you to determine whether or not users are authorized to initiate certain actions.</P>

<P>Note that the UserAdmin only provides answer to the question whether a user is allowed to initiate a certain action, it does not actually shield it from doing this, like, for example, the SecurityManager in Java. This means that the common pattern used to authorize users with UserAdmin looks something like:</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
<SPAN class="code-keyword">private</SPAN> UserAdmin m_userAdmin;
<SPAN class="code-comment">// ...
</SPAN>User user = m_userAdmin.getUser(<SPAN class="code-quote">&quot;username&quot;</SPAN>, getUserName());
<SPAN class="code-comment">// assume user is already authenticated...
</SPAN>Authorization auth = m_userAdmin.getAuthorization(user);
<SPAN class="code-keyword">if</SPAN> (!auth.hasRole(<SPAN class="code-quote">&quot;admin&quot;</SPAN>)) {
  <SPAN class="code-keyword">throw</SPAN> <SPAN class="code-keyword">new</SPAN> InsufficientRightsException();
}
</PRE>
</DIV></DIV>
        <DIV class="timestamp" style="margin-top: 30px; font-size: 80%; text-align: right;">
Last modified by jawi on Fri Dec 07 09:53:59 EST 2012
        </DIV>
        <DIV class="trademarkFooter">
Apache Felix, Felix, Apache, the Apache feather logo, and the Apache Felix project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners.
        </DIV>
    </DIV>
  </BODY>
</HTML>
