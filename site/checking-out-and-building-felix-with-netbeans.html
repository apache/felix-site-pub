
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<HTML>
  <HEAD>
    <TITLE>Apache Felix - Checking Out and Building Felix with NetBeans</TITLE>
    <LINK rel="stylesheet" href="http://felix.apache.org/site/media.data/site.css" type="text/css" media="all">
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8">
  </HEAD>
  <BODY>
    <DIV class="title"><DIV class="logo"><A href="http://felix.apache.org/site/index.html"><IMG border="0" alt="Apache Felix" src="http://felix.apache.org/site/media.data/logo.png"></A></DIV><DIV class="header"><A href="http://www.apache.org/"><IMG border="0" alt="Apache" src="http://felix.apache.org/site/media.data/apache.png"></A></DIV></DIV>
    <DIV class="menu">
<UL>
	<LI><A href="news.html" title="news">news</A></LI>
	<LI><A href="http://www.apache.org/licenses/" class="external-link" rel="nofollow">license</A></LI>
	<LI><A href="http://felix.apache.org/site/downloads.cgi" class="external-link" rel="nofollow">downloads</A></LI>
	<LI><A href="documentation.html" title="documentation">documentation</A></LI>
	<LI><A href="mailinglists.html" title="mailinglists">mailing lists</A></LI>
	<LI><A href="contributing.html" title="Contributing">contributing</A></LI>
	<LI><A href="http://www.apache.org/" class="external-link" rel="nofollow">asf</A></LI>
	<LI><A href="http://www.apache.org/security/" class="external-link" rel="nofollow">security</A></LI>
	<LI><A href="http://www.apache.org/foundation/sponsorship.html" class="external-link" rel="nofollow">sponsorship</A></LI>
	<LI><A href="http://www.apache.org/foundation/thanks.html" class="external-link" rel="nofollow">sponsors</A>
<!-- ApacheCon Ad -->
<IFRAME src="http://www.apache.org/ads/button.html" style="border-width:0; float: left" frameborder="0" scrolling="no" width="135" height="135"></IFRAME>
<P style="height: 100px">
<!-- ApacheCon Ad --></LI>
</UL>
    </DIV>
    <DIV class="main">
<H1><A name="CheckingOutandBuildingFelixwithNetBeans-CheckingoutandbuildingFelixwithNetBeans"></A>Checking out and building Felix with NetBeans</H1>

<P>In this how-to we describe the process of checking out and building Felix from source using the NetBeans IDE.</P>

<H2><A name="CheckingOutandBuildingFelixwithNetBeans-RequiredSoftware%3A"></A>Required Software:</H2>

<OL>
	<LI>NetBeans 6.1 - You can get NetBeans from the <A href="http://www.netbeans.org/" class="external-link" rel="nofollow">NetBeans web site</A>.</LI>
	<LI>Subversion command-line client - NetBeans uses the Subversion command-line client for its Subversion integration. You can get the Subversion command-line client from <A href="http://subversion.tigris.org/" class="external-link" rel="nofollow">Tigris</A> or if you are working on a Unix machine it will most likely be available in your OS's package repository.</LI>
	<LI>NetBeans Maven plugin - You can install this from within NetBeans by selecting &quot;<TT>Tools-&gt;Plugins</TT>&quot; menu item, then choosing the Maven plugin from the &quot;<TT>Available Plugins</TT>&quot; tab and pressing the &quot;<TT>Install</TT>&quot; button on the bottom of the dialog. For a good introduction on what you can do with this plugin see the <A href="http://wiki.netbeans.org/MavenBestPractices" class="external-link" rel="nofollow">Maven Best Practices</A> page on the NetBeans wiki.</LI>
	<LI>Maven - You will also need to locally install Maven to complete this how-to. You can download Maven from the <A href="http://maven.apache.org/" class="external-link" rel="nofollow">Maven web site</A>.
<BR class="atl-forced-newline">
<BR class="atl-forced-newline">
<DIV class="panelMacro"><TABLE class="noteMacro"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="https://cwiki.apache.org/confluence/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B>Why do we need maven?</B><BR>The NetBeans Maven plugin comes pre-packaged with Maven so why do we need a locally installed copy of Maven? The version of Maven that comes prepackaged with NetBeans is a 2.1-SNAPSHOT which currently has issues building Felix so we need a locally installed copy of the current release of Maven so we can use that instead.</TD></TR></TABLE></DIV></LI>
</OL>


<H2><A name="CheckingOutandBuildingFelixwithNetBeans-CheckingoutFelix"></A>Checking out Felix</H2>

<P><B>1)</B> From NetBeans' main menu select &quot;<TT>Versioning-&gt;Subversion-&gt;Checkout</TT>&quot; as shown in Figure 1.</P>

<DIV style="css" align="center"><P><FONT color="#4f81bd">Figure 1: NetBeans Subversion Menu</FONT><BR>
<SPAN class="image-wrap" style=""><IMG src="checking-out-and-building-felix-with-netbeans.data/figure1.png" style="border: 0px solid black"></SPAN></P></DIV>

<P><B>2)</B> Now we need to fill in the checkout dialog box. For this dialog box all we need to do is fill in the &quot;<TT>Repository URL</TT>&quot; (See below for what this should be). Once you have set the Repository URL you can press the &quot;<TT>Next</TT>&quot; button. See Figure 2 for what the dialog should look like when you are done.</P>

<DIV style="css" align="center"><P><FONT color="#4f81bd">Figure 2: NetBeans checkout dialog box</FONT><BR>
<SPAN class="image-wrap" style=""><IMG src="checking-out-and-building-felix-with-netbeans.data/figure2.png" style="border: 0px solid black"></SPAN></P></DIV>

<P><B>3)</B> In the next panel of the checkout dialog box we need to set where we want to put the source code as well as some parameters that will get passed to the subversion client.</P>

<UL>
	<LI>Repository Folder(s) - This should be set for you, but if it is not it should be &quot;<TT>felix/trunk</TT>&quot;</LI>
	<LI>Repository Revision - Leave this one blank. <B>NOTE:</B> If you want to check out a particular version of Felix you can put the revision number here and that revision will be checked out. For our purposes here we want to get the latest revision.</LI>
	<LI>Skip &quot;trunk&quot; check box - Check this. This option means that the source code will be checked out into the root of the folder/directory that we supply.</LI>
	<LI>Local Folder - This is where the source code will be checked out locally. You can press the browse button to select a directory. <B>NOTE:</B> If you need to create a sub-directory pick the parent then in the edit box add it to the path. It will be created for you during the check out.</LI>
	<LI>Scan for NetBeans Projects after checkout check box - You can either check or uncheck this box. Either way NetBeans will not open any of the projects because there are approximately 183 projects in the Felix source tree. Later we will pick the specific project we need for compiling Felix.</LI>
</UL>


<P>Once you have filled in the second panel of the checkout dialog press the &quot;<TT>Finish</TT>&quot; button at the bottom of the dialog. See Figure 3 for how the dialog should look.</P>

<DIV style="css" align="center"><P><FONT color="#4f81bd">Figure 3: NetBeans checkout dialog box (panel 2)</FONT><BR>
<SPAN class="image-wrap" style=""><IMG src="checking-out-and-building-felix-with-netbeans.data/figure3.png" style="border: 0px solid black"></SPAN></P></DIV>

<P><B>4)</B> It may take a while for the checkout to complete. If you want to see what is happening, take a look at the output window at the bottom of the NetBeans window. If you don't see it select &quot;<TT>Window-&gt;Output-&gt;Output</TT>&quot; to make it display. You should see something like what is shown in Figure 4.</P>

<DIV style="css" align="center"><P><FONT color="#4f81bd">Figure 4: NetBeans output window</FONT><BR>
<SPAN class="image-wrap" style=""><IMG src="checking-out-and-building-felix-with-netbeans.data/figure4.png" style="border: 0px solid black"></SPAN></P>
</DIV>

<P><B>5)</B> If you left the &quot;<TT>Scan for NetBeans Projects after checkout</TT>&quot; check box checked you will see the dialog in Figure 5 when Subversion finishes checking out Felix. For now just press the &quot;<TT>Cancel</TT>&quot; button.</P>

<DIV style="css" align="center"><P><FONT color="#4f81bd">Figure 5: NetBeans open project dialog</FONT><BR>
<SPAN class="image-wrap" style=""><IMG src="checking-out-and-building-felix-with-netbeans.data/figure5.png" style="border: 0px solid black"></SPAN></P></DIV>

<P><B>6)</B> This concludes the section on checking out the Felix source code.</P>

<H2><A name="CheckingOutandBuildingFelixwithNetBeans-BuildingFelix"></A>Building Felix</H2>

<P>In this section we will be going over how to build Felix from within NetBeans. </P>

<P><B>1)</B> Setup external Maven in NetBeans</P>

<P>Before we can build Felix, we need to set up NetBeans so that it can use our external Maven instead of the one bundled with the Maven plugin. You do this in the NetBeans options dialog (&quot;<TT>Tools-&gt;Options</TT>&quot;). Select the &quot;<TT>Miscellaneous</TT>&quot; icon at the top of the dialog. Then select the &quot;<TT>Maven 2</TT>&quot; tab. What we want to do here is tell NetBeans where we installed Maven. You can press the &quot;<TT>Browse</TT>&quot; button to browse to the directory where you installed Maven. You can leave the rest of the options as they are. See Figure 6 for how this dialog looks and how to set it up.</P>

<DIV style="css" align="center"><P><FONT color="#4f81bd">Figure 6: NetBeans Maven option dialog</FONT><BR>
<SPAN class="image-wrap" style=""><IMG src="checking-out-and-building-felix-with-netbeans.data/figure6.png" style="border: 0px solid black"></SPAN></P></DIV>

<P><B>2)</B> Open the Felix project folder</P>

<P>Now we need to open the Felix build project folder. This will be the &quot;<TT>pom</TT>&quot; project. It is located in the directory where you checked out the source code. When you locate it select the project and press the <TT>Open Project</TT> button. See Figure 7 for how this looks.</P>

<DIV style="css" align="center"><P><FONT color="#4f81bd">Figure 7: NetBeans Open Project dialog</FONT><BR>
<SPAN class="image-wrap" style=""><IMG src="checking-out-and-building-felix-with-netbeans.data/figure7.png" style="border: 0px solid black"></SPAN></P></DIV>

<P>When the project is opened your &quot;<TT>Projects</TT>&quot; pane should look something like Figure 8.</P>

<DIV style="css" align="center"><P><FONT color="#4f81bd">Figure8 : NetBeans Project pane</FONT><BR>
<SPAN class="image-wrap" style=""><IMG src="checking-out-and-building-felix-with-netbeans.data/figure8.png" style="border: 0px solid black"></SPAN></P></DIV>

<P><B>3)</B> Configure the project</P>

<P>We now need to change one aspect of the project configuration. So right click on the project and select the &quot;<TT>Properties</TT>&quot; menu item, then select the &quot;<TT>Actions</TT>&quot; category. What we need to do here is check the &quot;<TT>Use external Maven for build execution</TT>&quot; checkbox. Once you have done this you can press the &quot;<TT>OK</TT>&quot; Button. See Figure 9 for how this should look.</P>

<DIV style="css" align="center"><P><FONT color="#4f81bd">Figure 9: NetBeans Project properties dialog</FONT><BR>
<SPAN class="image-wrap" style=""><IMG src="checking-out-and-building-felix-with-netbeans.data/figure9.png" style="border: 0px solid black"></SPAN></P></DIV>

<P><B>4)</B> Select a build profile</P>

<P>Felix is built in two phases. These two phases are controlled by Maven profiles so we want to set the profile that we want to build. You do this by right clicking on the project then select &quot;<TT>Profiles-&gt;packaging-plugins</TT>&quot; to select the profile, see Figure 10.</P>

<DIV style="css" align="center"><P><FONT color="#4f81bd">Figure 10: NetBeans Project profiles</FONT><BR>
<SPAN class="image-wrap" style=""><IMG src="checking-out-and-building-felix-with-netbeans.data/figure10.png" style="border: 0px solid black"></SPAN></P></DIV>

<P><B>5)</B> Build Felix plugins</P>

<P>Now that we have selected the correct profile all we have to do is build it. Right click on the project and select the &quot;<TT>Clean and Build</TT>&quot; menu item. You should see something like Figure 11 when the build is complete. <B>NOTE:</B> If you have not done this before it may take a little while, since Maven needs to download a bunch of plugins.</P>

<DIV style="css" align="center"><P><FONT color="#4f81bd">Figure 11: Plugins build output</FONT><BR>
<SPAN class="image-wrap" style=""><IMG src="checking-out-and-building-felix-with-netbeans.data/figure11.png" style="border: 0px solid black"></SPAN></P></DIV>

<P><B>6)</B> Build Felix bundle</P>

<P>Now that we have built the plugins it is time to build the Felix bundle. Like in step 4, we right click on the project and select &quot;<TT>Profiles-&gt;packaging-plugins</TT>&quot; (to unselect it), then do it again but this time select &quot;<TT>Profiles-&gt;packaging-bundle</TT>&quot;. Once you have done that you can &quot;<TT>Clean and Build</TT>&quot; the project. See Figure 12 for what you should see in the output window when the build completes.</P>

<DIV class="panelMacro"><TABLE class="noteMacro"><COLGROUP><COL width="24"><COL></COLGROUP><TR><TD valign="top"><IMG src="https://cwiki.apache.org/confluence/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></TD><TD><B>Did you get a OutOfMemoryError during the bundle build?</B><BR>Sometimes, the Felix bundle build throws this error. Just try to build it again and it should go away after you do it a couple of times as there will be less to build each time. Or if you want you can increase the memory available to Maven. I have found that setting the environment variable MAVEN_OPTS to &quot;-Xmx1024m -Xms512m&quot; allows me to build Felix completely the first time though. It should be noted that if you change this you may need to shut down and restart NetBeans before Maven will see this environment variable as Maven inherits its environment variables from NetBeans and NetBeans will not get the new or updated variable until you restart it.</TD></TR></TABLE></DIV>

<DIV style="css" align="center"><P><FONT color="#4f81bd">Figure 12: Bundle build output</FONT><BR>
<SPAN class="image-wrap" style=""><IMG src="checking-out-and-building-felix-with-netbeans.data/figure12.png" style="border: 0px solid black"></SPAN></P></DIV>

<H2><A name="CheckingOutandBuildingFelixwithNetBeans-Conclusion"></A>Conclusion</H2>

<P>If every thing went as expected then you should have a built and ready to run Felix installation in the &quot;<TT>main</TT>&quot; directory under the directory where you checked out Felix. You can now run Felix from the command line by changing to that directory and running this command:</P>

<DIV class="preformatted panel" style="border-width: 1px;"><DIV class="preformattedContent panelContent">
<PRE>java -jar bin/felix.jar
</PRE>
</DIV></DIV>

<H2><A name="CheckingOutandBuildingFelixwithNetBeans-Otherdocumentation"></A>Other documentation</H2>

<P>You may also want to read:</P>

<UL>
	<LI><A href="integrating-felix-with-netbeans.html" title="Integrating Felix with NetBeans">Integrating Felix with NetBeans</A> - A how-to style document that shows how to run Felix under NetBeans.</LI>
	<LI><A href="apache-felix-framework-usage-documentation.html" title="Apache Felix Framework Usage Documentation">Felix usage</A> - Go to the Felix usage page to learn how to launch the Felix framework.</LI>
</UL>


<H2><A name="CheckingOutandBuildingFelixwithNetBeans-Howtogethelp"></A>How to get help</H2>

<P>If you need any help or have questions about this document you can ask on the Felix Users Mailing list. See <A href="mailinglists.html" title="mailinglists">Felix Mailing lists</A> for how to subscribe to the list.</P>
        <DIV class="timestamp" style="margin-top: 30px; font-size: 80%; text-align: right;">
Last modified by heavy@ungoverned.org on 2009-05-05 09:02:52.0
        </DIV>
        <DIV class="trademarkFooter">
Apache Felix, Felix, Apache, the Apache feather logo, and the Apache Felix project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners.
        </DIV>
    </DIV>
  </BODY>
</HTML>
