
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<HTML>
  <HEAD>
    <TITLE>Apache Felix - iPOJO-Reference-Card</TITLE>
    <LINK rel="stylesheet" href="http://felix.apache.org/site/media.data/site.css" type="text/css" media="all">
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8">
  </HEAD>
  <BODY>
    <DIV class="title"><DIV class="logo"><A href="http://felix.apache.org/site/index.html"><IMG border="0" alt="Apache Felix" src="http://felix.apache.org/site/media.data/logo.png"></A></DIV><DIV class="header"><A href="http://www.apache.org/"><IMG border="0" alt="Apache" src="http://felix.apache.org/site/media.data/apache.png"></A></DIV></DIV>
    <DIV class="menu">
<UL>
	<LI><A href="news.html" title="news">news</A></LI>
	<LI><A href="http://www.apache.org/licenses/" class="external-link" rel="nofollow">license</A></LI>
	<LI><A href="http://felix.apache.org/site/downloads.cgi" class="external-link" rel="nofollow">downloads</A></LI>
	<LI><A href="documentation.html" title="documentation">documentation</A></LI>
	<LI><A href="mailinglists.html" title="mailinglists">mailing lists</A></LI>
	<LI><A href="contributing.html" title="Contributing">contributing</A></LI>
	<LI><A href="http://www.apache.org/" class="external-link" rel="nofollow">asf</A></LI>
	<LI><A href="http://www.apache.org/security/" class="external-link" rel="nofollow">security</A></LI>
	<LI><A href="http://www.apache.org/foundation/sponsorship.html" class="external-link" rel="nofollow">sponsorship</A></LI>
	<LI><A href="http://www.apache.org/foundation/thanks.html" class="external-link" rel="nofollow">sponsors</A>
<!-- ApacheCon Ad -->
<IFRAME src="http://www.apache.org/ads/button.html" style="border-width:0; float: left" frameborder="0" scrolling="no" width="135" height="135"></IFRAME>
<P style="height: 100px">
<!-- ApacheCon Ad --></LI>
</UL>
    </DIV>
    <DIV class="main">
<STYLE type="text/css">
 @import url(http://felix.apache.org/ipojo/site/superfish.css); 
</STYLE>

<STYLE type="text/css">
 @import url(http://felix.apache.org/ipojo/site/style.css); 
</STYLE>

<P>
<SCRIPT class="javascript" src="http://cwiki.apache.org/confluence/download/resources/confluence.ext.code:code/shCore.js"></SCRIPT>
<SCRIPT class="javascript" src="http://cwiki.apache.org/confluence/download/resources/confluence.ext.code:code/shBrushCSharp.js"></SCRIPT>
<SCRIPT class="javascript" src="http://cwiki.apache.org/confluence/download/resources/confluence.ext.code:code/shBrushPhp.js"></SCRIPT>
<SCRIPT class="javascript" src="http://cwiki.apache.org/confluence/download/resources/confluence.ext.code:code/shBrushJScript.js"></SCRIPT>
<SCRIPT class="javascript" src="http://cwiki.apache.org/confluence/download/resources/confluence.ext.code:code/shBrushVb.js"></SCRIPT>
<SCRIPT class="javascript" src="http://cwiki.apache.org/confluence/download/resources/confluence.ext.code:code/shBrushSql.js"></SCRIPT>
<SCRIPT class="javascript" src="http://cwiki.apache.org/confluence/download/resources/confluence.ext.code:code/shBrushXml.js"></SCRIPT>
<SCRIPT class="javascript" src="http://cwiki.apache.org/confluence/download/resources/confluence.ext.code:code/shBrushShell.js"></SCRIPT>
<SCRIPT class="javascript" src="http://cwiki.apache.org/confluence/download/resources/confluence.ext.code:code/shBrushDelphi.js"></SCRIPT>
<SCRIPT class="javascript" src="http://cwiki.apache.org/confluence/download/resources/confluence.ext.code:code/shBrushPython.js"></SCRIPT>
<SCRIPT class="javascript" src="http://cwiki.apache.org/confluence/download/resources/confluence.ext.code:code/shBrushJava.js"></SCRIPT>

<SCRIPT type="text/javascript" src="http://felix.apache.org/ipojo/site/jquery-1.js"></SCRIPT>
<SCRIPT type="text/javascript" src="http://felix.apache.org/ipojo/site/hoverIntent.js"></SCRIPT>
<SCRIPT type="text/javascript" src="http://felix.apache.org/ipojo/site/superfish.js"></SCRIPT> 
<SCRIPT type="text/javascript" src="http://felix.apache.org/ipojo/site/supersubs.js"></SCRIPT> 

<SCRIPT type="text/javascript"> 
 
    $(document).ready(function(){ 
        $("ul.sf-menu").supersubs({ 
            minWidth:    14,   // minimum width of sub-menus in em units 
            maxWidth:    30,   // maximum width of sub-menus in em units 
            extraWidth:  1     // extra width can ensure lines don't sometimes turn over 
                               // due to slight rounding differences and font-family 
        }).superfish();  // call supersubs first, then superfish, so that subs are 
                         // not display:none when measuring. Call before initialising 
                         // containing tabs for same reason. 
    }); 
 
</SCRIPT>
<DIV class="main">
<DIV class="page-header">
<IMG src="http://felix.apache.org/ipojo/site/header.png" class="header">
<A href="http://ipojo.org/"><IMG src="http://felix.apache.org/ipojo/site/ipojo.png" width="225" class="header-logo"></A>
<UL class="sf-menu sf-js-enabled sf-shadow" id="ipojo-menu">
<LI class="current">
<!-- Menu Overview -->
<A href="" class="sf-with-ul">Overview<SPAN class="sf-sub-indicator"> &raquo;</SPAN><SPAN class="sf-sub-indicator"> &raquo;</SPAN></A>
<UL>
	<LI>
	<A href="apache-felix-ipojo.html" title="Apache Felix iPOJO">Home</A>							
	</LI>
	<LI>
	<A href="apache-felix-ipojo-why-choose-ipojo.html" title="apache-felix-ipojo-why-choose-ipojo">Why choose iPOJO</A>
	</LI>
	<LI>
	<A href="apache-felix-ipojo-successstories.html" title="apache-felix-ipojo-successstories">Success stories</A>
	</LI>
	<LI>
	<A href="apache-felix-ipojo-feature-overview.html" title="Apache Felix iPOJO Feature Overview">Features</A>
	</LI>
</UL>
</LI>	

<LI class="">			
<!-- Menu download -->
<LI>
<A href="download.html" title="Download">Download </A>
</LI>

<LI class="">					
<!-- Menu Documentation -->
<A href="" class="sf-with-ul">Documentation<SPAN class="sf-sub-indicator"> &raquo;</SPAN><SPAN class="sf-sub-indicator"> &raquo;</SPAN></A>
<UL>
    <!-- sub- menu : getting started -->
    <LI class="">
    <A href="" class="sf-with-ul">Getting Started<SPAN class="sf-sub-indicator"> &raquo;</SPAN><SPAN class="sf-sub-indicator"> &raquo;</SPAN></A>
    <UL>
     <LI><A href="ipojo-in-10-minutes.html" title="iPOJO in 10 minutes">iPOJO in 10 minutes</A></LI>
     <LI><A href="how-to-use-ipojo-annotations.html" title="How to use iPOJO Annotations">Using Annotations</A></LI>
     <LI><A href="ipojo-hello-word-maven-based-tutorial.html" title="iPOJO Hello Word (Maven-Based) tutorial">Maven tutorial</A></LI>
     <LI><A href="ipojo-advanced-tutorial.html" title="iPOJO Advanced Tutorial">Advanced tutorial</A></LI>
     <LI><A href="apache-felix-ipojo-dosgi.html" title="apache-felix-ipojo-dosgi">Using Distributed OSGi</A></LI>
     <LI><A href="ipojo-composition-tutorial.html" title="iPOJO Composition Tutorial">Application Composition</A></LI>
    </UL>
    </LI> <!-- end of getting started -->
    <!-- sub menu : Describing Components -->
     <LI class="">
        <A href="http://felix.apache.org/site/describing-components.html" class="sf-with-ul">Describing components<SPAN class="sf-sub-indicator"> &raquo;</SPAN><SPAN class="sf-sub-indicator"> &raquo;</SPAN></A>
        <UL>
        <LI><A href="service-requirement-handler.html" title="Service Requirement Handler">Requiring a service</A></LI>
        <LI><A href="providing-osgi-services.html" title="Providing OSGi services">Providing a service</A></LI>
        <LI><A href="lifecycle-callback-handler.html" title="Lifecycle Callback Handler">Lifecycle management</A></LI>
        <LI><A href="configuration-handler.html" title="Configuration Handler">Configuration</A></LI>
        <LI><A href="architecture-handler.html" title="Architecture Handler">Introspection</A></LI>
        <LI><A href="controller-lifecycle-handler.html" title="Controller Lifecycle Handler">Impacting the lifecycle</A></LI>
        <LI><A href="event-admin-handlers.html" title="Event Admin Handlers">Asynchronous communication</A></LI>
        <LI><A href="ipojo-jmx-handler.html" title="iPOJO JMX Handler">JMX management</A></LI>
        <LI><A href="extender-pattern-handler.html" title="Extender Pattern Handler">Extender pattern</A></LI>
        <LI><A href="white-board-pattern-handler.html" title="White Board Pattern Handler">Whiteboard pattern</A></LI>
        <LI><A href="temporal-service-dependency.html" title="Temporal Service Dependency">Temporal dependencies</A></LI>
        </UL>
     </LI> <!-- End of describing components -->
    <!-- sub- menu : User Guide -->
    <LI class="">
    <A href="" class="sf-with-ul">User Guide<SPAN class="sf-sub-indicator"> &raquo;</SPAN><SPAN class="sf-sub-indicator"> &raquo;</SPAN></A>
        <UL>
        <LI><A href="combining-ipojo-and-configuration-admin.html" title="Combining iPOJO and Configuration Admin">iPOJO and config admin</A></LI>
        <LI><A href="how-to-use-ipojo-factories.html" title="How-to use iPOJO factories">Factories and Instances</A></LI>
        <LI><A href="using-xml-schemas.html" title="Using XML Schemas">XML Schemas</A></LI>
        <LI><A href="apache-felix-ipojo-api.html" title="apache-felix-ipojo-api">API</A></LI>
        <LI><A href="apache-felix-ipojo-testing-components.html" title="apache-felix-ipojo-testing-components">Testing components</A></LI>
        <LI><A href="apache-felix-ipojo-eclipse-integration.html" title="apache-felix-ipojo-eclipse-integration">Eclipse Integration</A></LI>
        <LI><A href="ipojo-faq.html" title="iPOJO FAQ">FAQ</A></LI>
        <LI><A href="" title="iPOJO-Reference-Card">Reference Card</A></LI>
        </UL>
    </LI> <!-- end of user guide -->
    <!-- sub- menu : Dev Guide -->
    <LI> 
    <A href="" class="sf-with-ul">Advanced Topics<SPAN class="sf-sub-indicator"> &raquo;</SPAN><SPAN class="sf-sub-indicator"> &raquo;</SPAN></A>
       <UL>
        <LI><A href="http://felix.apache.org/ipojo/api/1.6.0" class="external-link" rel="nofollow">Javadoc</A></LI>
        <LI><A href="how-to-write-your-own-handler.html" title="How to write your own handler">Handler development</A></LI>
        <LI><A href="how-to-use-ipojo-manipulation-metadata.html" title="How to use iPOJO Manipulation Metadata">Manipulation Metadata </A></LI>
        <LI><A href="dive-into-the-ipojo-manipulation-depths.html" title="Dive into the iPOJO Manipulation depths">Dive into the iPOJO Manipulation depths</A></LI>
       </UL>
    </LI> <!-- End of Dev guide -->
</UL> 
</LI> <!-- End of doc -->
<!-- Menu 4 : Tools -->
<LI class="">
<A href="" class="sf-with-ul">Tools<SPAN class="sf-sub-indicator"> &raquo;</SPAN><SPAN class="sf-sub-indicator"> &raquo;</SPAN></A>
<UL>
   <LI><A href="ipojo-ant-task.html" title="iPOJO Ant Task">Ant Task</A></LI>
   <LI><A href="ipojo-eclipse-plug-in.html" title="iPOJO Eclipse Plug-in">Eclipse Plugin</A></LI>
   <LI><A href="ipojo-maven-plug-in.html" title="iPOJO Maven Plug-in">Maven Plugin</A></LI>
   <LI><A href="ipojo-arch-command.html" title="iPOJO-Arch-Command"><TT>arch</TT> shell command</A></LI>
   <LI><A href="apache-felix-ipojo-online-manipulator.html" title="apache-felix-ipojo-online-manipulator">Online Manipulator</A></LI>
   <LI><A href="ipojo-webconsole-plugin.html" title="iPOJO Webconsole Plugin">Webconsole plugin</A></LI>
   <LI><A href="apache-felix-ipojo-junit4osgi.html" title="apache-felix-ipojo-junit4osgi">Junit4OSGi</A></LI>
</UL>   
</LI><!-- End of tools -->	
<!-- Menu 5 : Support -->
<LI>
<A href="ipojo-support.html" title="ipojo-support">Support </A>
</LI>
<!-- End of the menu 5 -->			
<!-- Menu 6 : Misc -->
<LI class="">
<A href="" class="sf-with-ul">Misc<SPAN class="sf-sub-indicator"> &raquo;</SPAN><SPAN class="sf-sub-indicator"> &raquo;</SPAN></A>
<UL>
   <LI><A href="apache-felix-ipojo-supportedvms.html" title="apache-felix-ipojo-supportedVMs">Supported JVMs</A></LI>
   <LI><A href="apache-felix-ipojo-supportedosgi.html" title="apache-felix-ipojo-supportedOSGi">Supported OSGi Implementations</A></LI>
   <LI><A href="http://ipojo-dark-side.blogspot.com/" class="external-link" rel="nofollow">iPOJO's Dark Side Blog</A></LI>
   <LI><A href="article-presentations.html" title="Article & Presentations">Article &amp; Presentations</A></LI>
   <LI><A href="http://www.apache.org/">ASF</A></LI>
   <LI><A href="http://www.apache.org/foundation/sponsorship.html">Sponsorship</A></LI>
   <LI><A href="http://www.apache.org/foundation/thanks.html">Sponsors</A></LI>
</UL>
</LI><!-- End of misc -->
</UL> <!-- End of the menu -->
</DIV> <!-- Page header -->
</P>

<DIV class="content">

<H1><A name="iPOJO-Reference-Card-Declaringcomponenttypes"></A>Declaring component types</H1>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>XML</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-xml">
&lt;component
    classname=<SPAN class="code-quote">&quot;my.Implementation&quot;</SPAN>
    name=<SPAN class="code-quote">&quot;my-type&quot;</SPAN>&gt;
<SPAN class="code-tag">&lt;/component&gt;</SPAN>
</PRE>
</DIV></DIV>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Annotations</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
@Component(name=<SPAN class="code-quote">&quot;my-type&quot;</SPAN>)
<SPAN class="code-keyword">public</SPAN> class Implementation {
  <SPAN class="code-comment">// ...
</SPAN>}
</PRE>
</DIV></DIV>
<DIV class="borderedTable"><DIV class="" align="center"><DIV class="table-wrap">
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh">Attribute name </TH>
<TH class="confluenceTh"> Required </TH>
<TH class="confluenceTh"> Default value </TH>
<TH class="confluenceTh">&nbsp;</TH>
</TR>
<TR>
<TD class="confluenceTd"> classname </TD>
<TD class="confluenceTd"> yes </TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd"> indicates the implementation class (automatic when using annotations). </TD>
</TR>
<TR>
<TD class="confluenceTd"> name </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> implementation class name </TD>
<TD class="confluenceTd"> specifies the component type name. </TD>
</TR>
<TR>
<TD class="confluenceTd"> public <BR class="atl-forced-newline"> (public_factory for annotations) </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> true </TD>
<TD class="confluenceTd"> specifies if the component type is accessible from others bundle or is private.</TD>
</TR>
<TR>
<TD class="confluenceTd"> factory-method <BR class="atl-forced-newline"> (factory_method for annotations) </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd"> specifies a static method to call instead of the 'regular' constructor to create POJO objects.</TD>
</TR>
</TBODY></TABLE>
</DIV>
</DIV>
</DIV>
<UL>
	<LI><A href="how-to-use-ipojo-factories.html" title="How-to use iPOJO factories">How&#45;to use iPOJO factories</A></LI>
</UL>


<H1><A name="iPOJO-Reference-Card-Creatingcomponentinstances"></A>Creating component instances</H1>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>XML</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-xml">
<SPAN class="code-tag">&lt;instance component=<SPAN class="code-quote">&quot;my-type&quot;</SPAN>/&gt;</SPAN>
<SPAN class="code-tag">&lt;instance component=<SPAN class="code-quote">&quot;my.Implementation&quot;</SPAN>/&gt;</SPAN>
<SPAN class="code-tag">&lt;instance component=<SPAN class="code-quote">&quot;my-type&quot;</SPAN> name=<SPAN class="code-quote">&quot;my-instance&quot;</SPAN>/&gt;</SPAN>
<SPAN class="code-tag">&lt;instance component=<SPAN class="code-quote">&quot;my-type&quot;</SPAN> name=<SPAN class="code-quote">&quot;my-instance&quot;</SPAN>&gt;</SPAN>
    <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;property1&quot;</SPAN> value=<SPAN class="code-quote">&quot;value1&quot;</SPAN>/&gt;</SPAN>
<SPAN class="code-tag">&lt;/instance&gt;</SPAN>
</PRE>
</DIV></DIV>
<DIV class="borderedTable"><DIV class="" align="center"><DIV class="table-wrap">
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh">Attribute name </TH>
<TH class="confluenceTh"> Required </TH>
<TH class="confluenceTh"> Default value </TH>
<TH class="confluenceTh">&nbsp;</TH>
</TR>
<TR>
<TD class="confluenceTd"> component </TD>
<TD class="confluenceTd"> yes </TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd"> specifies the component type (either by using the name or the class name) </TD>
</TR>
<TR>
<TD class="confluenceTd"> name </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> generated </TD>
<TD class="confluenceTd"> specifies the instance name. </TD>
</TR>
</TBODY></TABLE>
</DIV>
</DIV>
</DIV>
<UL>
	<LI>Instances can contains a configuration given under the <TT>key-value</TT> form. Properties can also by complex type.</LI>
	<LI><A href="how-to-use-ipojo-factories.html" title="How-to use iPOJO factories">How&#45;to use iPOJO factories</A></LI>
</UL>


<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Annotations</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
@Component(name=<SPAN class="code-quote">&quot;my-type&quot;</SPAN>)
@Instantiate
<SPAN class="code-keyword">public</SPAN> class Implementation {
  <SPAN class="code-comment">// ...
</SPAN>}
</PRE>
</DIV></DIV>

<H1><A name="iPOJO-Reference-Card-Providingservices"></A>Providing services</H1>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>XML</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-xml">
<SPAN class="code-tag">&lt;component classname=<SPAN class="code-quote">&quot;my.service.implementation&quot;</SPAN> name=<SPAN class="code-quote">&quot;my-service-impl&quot;</SPAN>&gt;</SPAN>
   <SPAN class="code-tag">&lt;provides/&gt;</SPAN>
<SPAN class="code-tag">&lt;/component&gt;</SPAN>
<SPAN class="code-tag">&lt;instance name=<SPAN class="code-quote">&quot;my-service-impl&quot;</SPAN>/&gt;</SPAN>
</PRE>
</DIV></DIV>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Annotations</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
@Component
@Provides
<SPAN class="code-keyword">public</SPAN> class Implementation <SPAN class="code-keyword">implements</SPAN> FooService {
   ...
}
</PRE>
</DIV></DIV>
<UL>
	<LI>Only instances provides really services, so don't forget to declare an instance.</LI>
	<LI>Published service interfaces must be implemented by your component implementation
<DIV class="borderedTable"><DIV class="" align="center"><DIV class="table-wrap">
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh">Attribute name </TH>
<TH class="confluenceTh"> Required </TH>
<TH class="confluenceTh"> Default value </TH>
<TH class="confluenceTh">&nbsp;</TH>
</TR>
<TR>
<TD class="confluenceTd"> specifications </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> all implemented interfaces </TD>
<TD class="confluenceTd"> specifies the published service interfaces </TD>
</TR>
<TR>
<TD class="confluenceTd"> strategy </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> <TT>singleton</TT> </TD>
<TD class="confluenceTd"> specifies the service object creation policy among <TT>singleton</TT>, <TT>service</TT> (OSGi Service Factory), <TT>method</TT> (use the factory method), <TT>instance</TT> (an object per instance) </TD>
</TR>
</TBODY></TABLE>
</DIV>
</DIV>
</DIV></LI>
	<LI><A href="providing-osgi-services.html" title="Providing OSGi services">Providing OSGi services</A></LI>
</UL>


<H1><A name="iPOJO-Reference-Card-Publishingserviceproperties"></A>Publishing service properties</H1>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>XML</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-xml">
<SPAN class="code-tag">&lt;component classname=<SPAN class="code-quote">&quot;my.service.implementation&quot;</SPAN> name=<SPAN class="code-quote">&quot;my-service-impl&quot;</SPAN>&gt;</SPAN>
  <SPAN class="code-tag">&lt;provides&gt;</SPAN>
	<SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;foo&quot;</SPAN> field=<SPAN class="code-quote">&quot;m_foo&quot;</SPAN> /&gt;</SPAN>
	<SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;bar&quot;</SPAN> field=<SPAN class="code-quote">&quot;m_bar&quot;</SPAN> mandatory=<SPAN class="code-quote">&quot;true&quot;</SPAN> /&gt;</SPAN>
	<SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;baz&quot;</SPAN> type=<SPAN class="code-quote">&quot;java.lang.String&quot;</SPAN> /&gt;</SPAN> <SPAN class="code-tag"><SPAN class="code-comment">&lt;!-- Static property (do not change at runtime) --&gt;</SPAN></SPAN>
  <SPAN class="code-tag">&lt;/provides&gt;</SPAN>
<SPAN class="code-tag">&lt;/component&gt;</SPAN>
<SPAN class="code-tag">&lt;instance name=<SPAN class="code-quote">&quot;my-service-impl&quot;</SPAN>&gt;</SPAN> <SPAN class="code-tag"><SPAN class="code-comment">&lt;!-- The configuration has to inject value in unvalued mandatory properties --&gt;</SPAN></SPAN>
  <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;bar&quot;</SPAN> value=<SPAN class="code-quote">&quot;5&quot;</SPAN>/&gt;</SPAN>
  <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;baz&quot;</SPAN> value=<SPAN class="code-quote">&quot;my string&quot;</SPAN>/&gt;</SPAN>
<SPAN class="code-tag">&lt;instance/&gt;</SPAN>
</PRE>
</DIV></DIV>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Annotations</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
@Component
@Provides(specifications= {FooService.class, BarService.class},
properties= {
	@StaticServiceProperty(name=<SPAN class="code-quote">&quot;baz&quot;</SPAN>, type=<SPAN class="code-quote">&quot;java.lang.<SPAN class="code-object">String</SPAN>&quot;</SPAN>)})
<SPAN class="code-keyword">public</SPAN> class ProvidesProperties <SPAN class="code-keyword">implements</SPAN> FooService, BarService {
    
    @ServiceProperty(name = <SPAN class="code-quote">&quot;foo&quot;</SPAN>)
    <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">int</SPAN> m_foo = 0;
    
    @ServiceProperty(name=<SPAN class="code-quote">&quot;bar&quot;</SPAN>, mandatory=<SPAN class="code-keyword">true</SPAN>)
    <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">int</SPAN> m_bar;
    
<SPAN class="code-comment">// ...
</SPAN>}
</PRE>
</DIV></DIV>
<DIV class="borderedTable"><DIV class="" align="center"><DIV class="table-wrap">
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh">Attribute name </TH>
<TH class="confluenceTh"> Required </TH>
<TH class="confluenceTh"> Default value </TH>
<TH class="confluenceTh">&nbsp;</TH>
</TR>
<TR>
<TD class="confluenceTd"> name </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> field name </TD>
<TD class="confluenceTd"> specifies the published property name </TD>
</TR>
<TR>
<TD class="confluenceTd"> mandatory </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> false </TD>
<TD class="confluenceTd"> specifies if the property has to receive a value from the instance configuration </TD>
</TR>
<TR>
<TD class="confluenceTd"> value </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd"> specifies the default property value </TD>
</TR>
<TR>
<TD class="confluenceTd"> field </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> (automatic with annotations) </TD>
<TD class="confluenceTd"> specifies the field attached to the service property </TD>
</TR>
<TR>
<TD class="confluenceTd"> type </TD>
<TD class="confluenceTd"> Only if there is no field (generated) </TD>
<TD class="confluenceTd"> Type of the property </TD>
</TR>
</TBODY></TABLE>
</DIV>

</DIV>
</DIV>
<UL>
	<LI><A href="providing-osgi-services.html" title="Providing OSGi services">Providing OSGi services</A></LI>
</UL>


<H1><A name="iPOJO-Reference-Card-Usingserviceswithfieldinjection"></A>Using services with field injection</H1>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>XML</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-xml">
<SPAN class="code-tag">&lt;component classname=<SPAN class="code-quote">&quot;my.consumer.Implementation&quot;</SPAN>&gt;</SPAN>
    <SPAN class="code-tag">&lt;requires field=<SPAN class="code-quote">&quot;fs&quot;</SPAN> /&gt;</SPAN>
    <SPAN class="code-tag">&lt;requires field=<SPAN class="code-quote">&quot;bs&quot;</SPAN> /&gt;</SPAN>
<SPAN class="code-tag">&lt;/component&gt;</SPAN>
</PRE>
</DIV></DIV>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Annotations</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
@Component
<SPAN class="code-keyword">public</SPAN> class Dependency {

    @Requires
    <SPAN class="code-keyword">public</SPAN> FooService fs;

    @Requires
    <SPAN class="code-keyword">public</SPAN> BarService[] bs;
    
    <SPAN class="code-comment">//...
</SPAN>}
</PRE>
</DIV></DIV>
<DIV class="borderedTable"><DIV class="" align="center"><DIV class="table-wrap">
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh">Attribute name </TH>
<TH class="confluenceTh"> Required </TH>
<TH class="confluenceTh"> Default value </TH>
<TH class="confluenceTh">&nbsp;</TH>
</TR>
<TR>
<TD class="confluenceTd"> id </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> field name </TD>
<TD class="confluenceTd"> dependency id </TD>
</TR>
<TR>
<TD class="confluenceTd"> field </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> automatically detected with annotations </TD>
<TD class="confluenceTd"> injected field </TD>
</TR>
<TR>
<TD class="confluenceTd"> optional </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> false </TD>
<TD class="confluenceTd"> specifies if the dependency if optional </TD>
</TR>
<TR>
<TD class="confluenceTd"> aggregate </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> false <BR class="atl-forced-newline"> (automatically detected with fields) </TD>
<TD class="confluenceTd"> specifies if the dependency is aggregate of <TT>scalar</TT> </TD>
</TR>
<TR>
<TD class="confluenceTd"> specification </TD>
<TD class="confluenceTd"> yes/no </TD>
<TD class="confluenceTd"> can be discovered from the code </TD>
<TD class="confluenceTd"> specifies the required service specification. This attribute is required when the service type cannot be inferred from the code (Collection type for fields, callbacks without service objects) </TD>
</TR>
<TR>
<TD class="confluenceTd"> filter </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> no filter </TD>
<TD class="confluenceTd"> specifies the dependency LDAP filter </TD>
</TR>
<TR>
<TD class="confluenceTd"> from </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd"> specifies a specific provider by its name </TD>
</TR>
<TR>
<TD class="confluenceTd"> policy </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> <TT>dynamic</TT> </TD>
<TD class="confluenceTd"> specifies the binding policy among <TT>dynamic</TT>, <TT>static</TT> and <TT>dynamic-priority</TT>  </TD>
</TR>
<TR>
<TD class="confluenceTd"> nullable </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> true </TD>
<TD class="confluenceTd"> enables/disables nullable object injection for optional dependencies  </TD>
</TR>
<TR>
<TD class="confluenceTd"> default-implementation // defaultimplementation for annotations </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd"> specifies the default-implementation for optional dependencies  </TD>
</TR>
<TR>
<TD class="confluenceTd"> comparator </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd"> specifies the comparator class used to sort service providers </TD>
</TR>
</TBODY></TABLE>
</DIV>
</DIV>
</DIV>
<UL>
	<LI><A href="service-requirement-handler.html" title="Service Requirement Handler">Service Requirement Handler</A></LI>
</UL>


<H1><A name="iPOJO-Reference-Card-Usingserviceswithmethodinjection"></A>Using services with method injection</H1>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>XML</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-xml">
<SPAN class="code-tag">&lt;component classname=<SPAN class="code-quote">&quot;my.consumer.Implementation&quot;</SPAN>&gt;</SPAN>
    <SPAN class="code-tag">&lt;requires&gt;</SPAN>
	<SPAN class="code-tag">&lt;callback type=<SPAN class="code-quote">&quot;bind&quot;</SPAN> method=<SPAN class="code-quote">&quot;bind&quot;</SPAN> /&gt;</SPAN>
	<SPAN class="code-tag">&lt;callback type=<SPAN class="code-quote">&quot;unbind&quot;</SPAN> method=<SPAN class="code-quote">&quot;unbind&quot;</SPAN> /&gt;</SPAN>
        <SPAN class="code-tag">&lt;callback type=<SPAN class="code-quote">&quot;modified&quot;</SPAN> method=<SPAN class="code-quote">&quot;modified&quot;</SPAN> /&gt;</SPAN> <SPAN class="code-tag"><SPAN class="code-comment">&lt;!-- for filtered service dependencies, to be notified when a service is modified but still match --&gt;</SPAN></SPAN>
    <SPAN class="code-tag">&lt;/requires&gt;</SPAN>	
<SPAN class="code-tag">&lt;/component&gt;</SPAN>
</PRE>
</DIV></DIV>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Annotations</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
@Component
<SPAN class="code-keyword">public</SPAN> class Dependency {

    @Unbind
    <SPAN class="code-keyword">public</SPAN> <SPAN class="code-keyword">synchronized</SPAN> void unbindBaz(BazService bz) {
        <SPAN class="code-comment">//...
</SPAN>    }
    
    @Bind
    <SPAN class="code-keyword">public</SPAN> <SPAN class="code-keyword">synchronized</SPAN> void bindBaz(BazService bz) {
        <SPAN class="code-comment">// ...
</SPAN>    }

    @Modified
    <SPAN class="code-keyword">public</SPAN> <SPAN class="code-keyword">synchronized</SPAN> void modifiedBaz() {
        <SPAN class="code-comment">// ...
</SPAN>    }

  <SPAN class="code-comment">//...
</SPAN>}
</PRE>
</DIV></DIV>
<DIV class="borderedTable"><DIV class="" align="center"><DIV class="table-wrap">
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh">Attribute name </TH>
<TH class="confluenceTh"> Required </TH>
<TH class="confluenceTh"> Default value </TH>
<TH class="confluenceTh">&nbsp;</TH>
</TR>
<TR>
<TD class="confluenceTd"> id </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> field name </TD>
<TD class="confluenceTd"> dependency id </TD>
</TR>
<TR>
<TD class="confluenceTd"> field </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> automatically detected with annotations </TD>
<TD class="confluenceTd"> injected field </TD>
</TR>
<TR>
<TD class="confluenceTd"> optional </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> false </TD>
<TD class="confluenceTd"> specifies if the dependency if optional </TD>
</TR>
<TR>
<TD class="confluenceTd"> aggregate </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> false <BR class="atl-forced-newline"> (automatically detected with fields) </TD>
<TD class="confluenceTd"> specifies if the dependnency is aggregate of <TT>scalar</TT> </TD>
</TR>
<TR>
<TD class="confluenceTd"> specification </TD>
<TD class="confluenceTd"> yes/no </TD>
<TD class="confluenceTd"> can be discovered from the code </TD>
<TD class="confluenceTd"> specifies the required service specification. This attribute is required when the service type cannot be infered from the code (Collection type for fields, callbacks without service objects) </TD>
</TR>
<TR>
<TD class="confluenceTd"> filter </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> no filter </TD>
<TD class="confluenceTd"> specifies the dependency LDAP filter </TD>
</TR>
<TR>
<TD class="confluenceTd"> from </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd"> specifies a specific provider by its name </TD>
</TR>
<TR>
<TD class="confluenceTd"> policy </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> <TT>dynamic</TT> </TD>
<TD class="confluenceTd"> specifies the binding policy among <TT>dynamic</TT>, <TT>static</TT> and <TT>dynamic-priority</TT>  </TD>
</TR>
<TR>
<TD class="confluenceTd"> nullable </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> true </TD>
<TD class="confluenceTd"> enables/disables nullable object injection for optional dependencies  </TD>
</TR>
<TR>
<TD class="confluenceTd"> default-implementation // default implementation for annotations </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd"> specifies the default-implementation for optional dependencies  </TD>
</TR>
<TR>
<TD class="confluenceTd"> comparator </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd"> specifies the comparator class used to sort service providers </TD>
</TR>
</TBODY></TABLE>
</DIV>


<DIV class="table-wrap">
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh"> Sub-Element name </TH>
<TH class="confluenceTh"> Required </TH>
<TH class="confluenceTh"> Default value </TH>
<TH class="confluenceTh">&nbsp;</TH>
</TR>
<TR>
<TD class="confluenceTd"> callback </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> callback specifies bind and unbind method. Two attributes are required (discovered automatically with annotations). <TT>type</TT> specified if the callback is a bind or unbind method (among {<TT>bind</TT>, <TT>unbind</TT>, <TT>modified</TT>}. The <TT>method</TT> attribute specified the method to call. The <TT>modified</TT> callback is called when the service properties of a bound service are modified and the service still match the filter.</TD>
</TR>
</TBODY></TABLE>
</DIV>
</DIV>
</DIV>
<UL>
	<LI><A href="service-requirement-handler.html" title="Service Requirement Handler">Service Requirement Handler</A></LI>
</UL>


<H1><A name="iPOJO-Reference-Card-Configuringservicedependenciesintheinstanceconfiguration"></A>Configuring service dependencies in the instance configuration</H1>
<H2><A name="iPOJO-Reference-Card-Configuringthe%7B%7Bfrom%7D%7Dattribute"></A>Configuring the <TT>from</TT> attribute</H2>
<UL>
	<LI>Thanks to the <TT>requires.from</TT> property, it is possible to override the <TT>from</TT> attribute value.</LI>
</UL>


<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-xml">
&lt;component 
   classname=<SPAN class="code-quote">&quot;...MyComponent&quot;</SPAN>
   name=<SPAN class="code-quote">&quot;FOO&quot;</SPAN>&gt;
	<SPAN class="code-tag">&lt;requires field=<SPAN class="code-quote">&quot;m_foo&quot;</SPAN> id=<SPAN class="code-quote">&quot;id1&quot;</SPAN>&gt;</SPAN>
		<SPAN class="code-tag">&lt;callback type=<SPAN class="code-quote">&quot;bind&quot;</SPAN> method=<SPAN class="code-quote">&quot;bind&quot;</SPAN>/&gt;</SPAN>
		<SPAN class="code-tag">&lt;callback type=<SPAN class="code-quote">&quot;unbind&quot;</SPAN> method=<SPAN class="code-quote">&quot;unbind&quot;</SPAN>/&gt;</SPAN>
	<SPAN class="code-tag">&lt;/requires&gt;</SPAN>
<SPAN class="code-tag">&lt;/component&gt;</SPAN>

<SPAN class="code-tag">&lt;instance name=<SPAN class="code-quote">&quot;FOO1&quot;</SPAN> component=<SPAN class="code-quote">&quot;FOO&quot;</SPAN>/&gt;</SPAN> <SPAN class="code-tag"><SPAN class="code-comment">&lt;!-- Use the default 'from' value --&gt;</SPAN></SPAN>

<SPAN class="code-tag">&lt;instance name=<SPAN class="code-quote">&quot;FOO2&quot;</SPAN> component=<SPAN class="code-quote">&quot;FOO&quot;</SPAN>&gt;</SPAN>
	<SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;requires.from&quot;</SPAN>&gt;</SPAN>
		<SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;id1&quot;</SPAN> value=<SPAN class="code-quote">&quot;myprovider&quot;</SPAN>/&gt;</SPAN>
	<SPAN class="code-tag">&lt;/property&gt;</SPAN>
<SPAN class="code-tag">&lt;/instance&gt;</SPAN>
</PRE>
</DIV></DIV>
<H2><A name="iPOJO-Reference-Card-Configuringthe%7B%7Bfilter%7D%7Dattribute"></A>Configuring the <TT>filter</TT> attribute</H2>
<UL>
	<LI>Thanks to the <TT>requires.filters</TT> property, it is possible to override the <TT>filter</TT> attribute value.</LI>
</UL>


<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-xml">
&lt;component 
   classname=<SPAN class="code-quote">&quot;org.apache.felix.ipojo.example.FilteredDependency&quot;</SPAN> 
   name=<SPAN class="code-quote">&quot;FOO&quot;</SPAN>&gt;
	<SPAN class="code-tag">&lt;requires field=<SPAN class="code-quote">&quot;m_foo&quot;</SPAN> fiter=<SPAN class="code-quote">&quot;(foo.property=FOO)&quot;</SPAN> id=<SPAN class="code-quote">&quot;id1&quot;</SPAN>&gt;</SPAN>
		<SPAN class="code-tag">&lt;callback type=<SPAN class="code-quote">&quot;bind&quot;</SPAN> method=<SPAN class="code-quote">&quot;bind&quot;</SPAN>/&gt;</SPAN>
		<SPAN class="code-tag">&lt;callback type=<SPAN class="code-quote">&quot;unbind&quot;</SPAN> method=<SPAN class="code-quote">&quot;unbind&quot;</SPAN>/&gt;</SPAN>
	<SPAN class="code-tag">&lt;/requires&gt;</SPAN>
<SPAN class="code-tag">&lt;/component&gt;</SPAN>

<SPAN class="code-tag">&lt;instance name=<SPAN class="code-quote">&quot;FOO1&quot;</SPAN> component=<SPAN class="code-quote">&quot;FOO&quot;</SPAN>/&gt;</SPAN> <SPAN class="code-tag"><SPAN class="code-comment">&lt;!-- Use the default 'filter' value --&gt;</SPAN></SPAN>

<SPAN class="code-tag">&lt;instance name=<SPAN class="code-quote">&quot;FOO2&quot;</SPAN> component=<SPAN class="code-quote">&quot;FOO&quot;</SPAN>&gt;</SPAN>
	<SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;requires.filters&quot;</SPAN>&gt;</SPAN>
		<SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;id1&quot;</SPAN> value=<SPAN class="code-quote">&quot;(foo.property=BAR)&quot;</SPAN>/&gt;</SPAN>
	<SPAN class="code-tag">&lt;/property&gt;</SPAN>
<SPAN class="code-tag">&lt;/instance&gt;</SPAN>
</PRE>
</DIV></DIV>

<H1><A name="iPOJO-Reference-Card-Reactingtolifecyclestatechanges"></A>Reacting to lifecycle state changes</H1>
<H2><A name="iPOJO-Reference-Card-Immediatecomponents"></A>Immediate components</H2>
<UL>
	<LI>A POJO object (implementation object) is created as soons as the instance becomes valid</LI>
	<LI>Instances that don't provide services becomes automatically immediate
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>XML</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-xml">
<SPAN class="code-tag">&lt;component classname=<SPAN class="code-quote">&quot;my.service.implementation&quot;</SPAN> name=<SPAN class="code-quote">&quot;my-service-impl&quot;</SPAN> immediate=<SPAN class="code-quote">&quot;true&quot;</SPAN>&gt;</SPAN>
   <SPAN class="code-tag">&lt;provides/&gt;</SPAN>
<SPAN class="code-tag">&lt;/component&gt;</SPAN>
</PRE>
</DIV></DIV>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Annotations</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
@Component(immediate=<SPAN class="code-keyword">true</SPAN>)
@Provides
<SPAN class="code-keyword">public</SPAN> class Implementation <SPAN class="code-keyword">implements</SPAN> FooService {
   ...
}
</PRE>
</DIV></DIV>
<DIV class="borderedTable"><DIV class="" align="center"><DIV class="table-wrap">
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh">Attribute name </TH>
<TH class="confluenceTh"> Required </TH>
<TH class="confluenceTh"> Default value </TH>
<TH class="confluenceTh">&nbsp;</TH>
</TR>
<TR>
<TD class="confluenceTd"> immediate </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> false // true for instances that don't provide a service </TD>
<TD class="confluenceTd"> specifies if the instance is immediate or not </TD>
</TR>
</TBODY></TABLE>
</DIV>
</DIV>
</DIV></LI>
	<LI><A href="lifecycle-callback-handler.html" title="Lifecycle Callback Handler">Lifecycle Callback Handler</A></LI>
</UL>


<H2><A name="iPOJO-Reference-Card-Lifecyclecallbacks"></A>Lifecycle callbacks</H2>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>XML</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-xml">
<SPAN class="code-tag">&lt;component classname=<SPAN class="code-quote">&quot;my.implementation&quot;</SPAN> name=<SPAN class="code-quote">&quot;my-impl&quot;</SPAN>&gt;</SPAN>
    <SPAN class="code-tag">&lt;callback transition=<SPAN class="code-quote">&quot;validate&quot;</SPAN> method=<SPAN class="code-quote">&quot;start&quot;</SPAN> /&gt;</SPAN>
    <SPAN class="code-tag">&lt;callback transition=<SPAN class="code-quote">&quot;invalidate&quot;</SPAN> method=<SPAN class="code-quote">&quot;stop&quot;</SPAN> /&gt;</SPAN>
<SPAN class="code-tag">&lt;/component&gt;</SPAN>
</PRE>
</DIV></DIV>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Annotations</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
@Component
<SPAN class="code-keyword">public</SPAN> class Implementation {
    
    @Validate
    <SPAN class="code-keyword">public</SPAN> void start() {
        
    }
    
    @Invalidate
    <SPAN class="code-keyword">public</SPAN> void stop() {
        
    }
}
</PRE>
</DIV></DIV>
<UL>
	<LI><A href="lifecycle-callback-handler.html" title="Lifecycle Callback Handler">Lifecycle Callback Handler</A></LI>
</UL>


<H1><A name="iPOJO-Reference-Card-Declaringproperties"></A>Declaring properties</H1>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>XML</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-xml">
<SPAN class="code-tag">&lt;component classname=<SPAN class="code-quote">&quot;my.Implementation&quot;</SPAN> name=<SPAN class="code-quote">&quot;my-impl&quot;</SPAN>&gt;</SPAN>
    <SPAN class="code-tag">&lt;properties propagation=<SPAN class="code-quote">&quot;true&quot;</SPAN> managedservice=<SPAN class="code-quote">&quot;MyPID&quot;</SPAN>&gt;</SPAN>
        <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;boo&quot;</SPAN> method=<SPAN class="code-quote">&quot;setBoo&quot;</SPAN> /&gt;</SPAN>
	<SPAN class="code-tag">&lt;property field=<SPAN class="code-quote">&quot;m_bar&quot;</SPAN> mandatory=<SPAN class="code-quote">&quot;true&quot;</SPAN>/&gt;</SPAN>
	<SPAN class="code-tag">&lt;property field=<SPAN class="code-quote">&quot;m_foo&quot;</SPAN> value=<SPAN class="code-quote">&quot;4&quot;</SPAN>/&gt;</SPAN>
    <SPAN class="code-tag">&lt;/properties&gt;</SPAN>
<SPAN class="code-tag">&lt;/component&gt;</SPAN>
<SPAN class="code-tag">&lt;instance component=<SPAN class="code-quote">&quot;my-impl&quot;</SPAN>&gt;</SPAN>
    <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;boo&quot;</SPAN> value=<SPAN class="code-quote">&quot;...&quot;</SPAN>/&gt;</SPAN>
    <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;m_bar&quot;</SPAN> value=<SPAN class="code-quote">&quot;...&quot;</SPAN>/&gt;</SPAN>
<SPAN class="code-tag">&lt;/instance&gt;</SPAN>
<SPAN class="code-tag">&lt;instance component=<SPAN class="code-quote">&quot;my-impl&quot;</SPAN>&gt;</SPAN>
    <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;boo&quot;</SPAN> value=<SPAN class="code-quote">&quot;...&quot;</SPAN>/&gt;</SPAN>
    <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;m_bar&quot;</SPAN> value=<SPAN class="code-quote">&quot;...&quot;</SPAN>/&gt;</SPAN>
    <SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;managed.service.pid&quot;</SPAN> value=<SPAN class="code-quote">&quot;AnotherPID&quot;</SPAN>/&gt;</SPAN>
<SPAN class="code-tag">&lt;/instance&gt;</SPAN>
</PRE>
</DIV></DIV>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Annotations</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
@Component(managedservice=<SPAN class="code-quote">&quot;MyPID&quot;</SPAN>, propagation=<SPAN class="code-keyword">true</SPAN>)
<SPAN class="code-keyword">public</SPAN> class Implementation {
    
    @Property(name=<SPAN class="code-quote">&quot;boo&quot;</SPAN>)
    <SPAN class="code-keyword">public</SPAN> void setBoo(<SPAN class="code-object">int</SPAN> boo) {
        <SPAN class="code-comment">//...
</SPAN>    }
        
    @Property(mandatory=<SPAN class="code-keyword">true</SPAN>)
    <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">int</SPAN> m_bar;

    @Property(value=<SPAN class="code-quote">&quot;4&quot;</SPAN>)
    <SPAN class="code-keyword">public</SPAN> <SPAN class="code-object">int</SPAN> m_foo;
}
</PRE>
</DIV></DIV>
<DIV class="borderedTable"><DIV class="" align="center"><DIV class="table-wrap">
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh">Attribute name </TH>
<TH class="confluenceTh"> Required </TH>
<TH class="confluenceTh"> Default value </TH>
<TH class="confluenceTh">&nbsp;</TH>
</TR>
<TR>
<TD class="confluenceTd"> propagation </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> false </TD>
<TD class="confluenceTd"> specifies if the properties propagation (properties are also published as service properties) is enabled or disabled </TD>
</TR>
<TR>
<TD class="confluenceTd"> managedservice </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> instance name </TD>
<TD class="confluenceTd"> specifies the PID of the published managed service. // This value can be overidden by the <TT>managed.service.pid</TT> instance property </TD>
</TR>
<TR>
<TD class="confluenceTd"> name </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> field name or computed from the method name </TD>
<TD class="confluenceTd"> specifies if the the property name </TD>
</TR>
<TR>
<TD class="confluenceTd"> value </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd"> specifies the default property value </TD>
</TR>
<TR>
<TD class="confluenceTd"> field </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> automatically detected with annotations </TD>
<TD class="confluenceTd"> specifies the field in which the property value will be injected </TD>
</TR>
<TR>
<TD class="confluenceTd"> method </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> automatically detected with annotations </TD>
<TD class="confluenceTd"> specifies the setter method in which the property value will be injected </TD>
</TR>
<TR>
<TD class="confluenceTd"> mandatory </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> false </TD>
<TD class="confluenceTd"> specifies if the property has to receive a value from the instance configuration </TD>
</TR>
</TBODY></TABLE>
</DIV>
</DIV>
</DIV>
<UL>
	<LI><A href="configuration-handler.html" title="Configuration Handler">Configuration Handler</A></LI>
</UL>


<H1><A name="iPOJO-Reference-Card-PostRegistrationandPostUnregistrationcallbacks"></A>PostRegistration and PostUnregistration callbacks</H1>
<UL>
	<LI>This feature is part of the provided service handler, and so requires that the component provides a service.</LI>
	<LI>The callback receives a <TT>ServiceReference</TT> as parameter.
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>XML</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-xml">
&lt;component
     classname=<SPAN class="code-quote">&quot;...&quot;</SPAN>&gt;
    &lt;provides
	post-unregistration=<SPAN class="code-quote">&quot;unregistered&quot;</SPAN> post-registration=<SPAN class="code-quote">&quot;registered&quot;</SPAN>/&gt;
<SPAN class="code-tag">&lt;/component&gt;</SPAN>
</PRE>
</DIV></DIV>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Annotations</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
@PostRegistration
<SPAN class="code-keyword">public</SPAN> void registered(ServiceReference ref) {
	<SPAN class="code-object">System</SPAN>.out.println(<SPAN class="code-quote">&quot;Registered&quot;</SPAN>);
}

@PostUnregistration
<SPAN class="code-keyword">public</SPAN> void unregistered(ServiceReference ref) {
	<SPAN class="code-object">System</SPAN>.out.println(<SPAN class="code-quote">&quot;Unregistered&quot;</SPAN>);
}
</PRE>
</DIV></DIV></LI>
	<LI><A href="http://felix.apache.org/site/providing-osgi-services.html#ProvidingOSGiservices-Beingnotifiedoftheserviceregistrationandunregistration" class="external-link" rel="nofollow">Provided Service Handler</A></LI>
</UL>


<H1><A name="iPOJO-Reference-Card-Controllingservicepublication"></A>Controlling service publication</H1>
<UL>
	<LI>This feature is part of the provided service handler, and so requires that the component provides a service.</LI>
	<LI>It allows a component to force the un-publication of a service.
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>XML</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-xml">
&lt;component
     classname=<SPAN class="code-quote">&quot;...&quot;</SPAN>&gt;
    <SPAN class="code-tag">&lt;provides&gt;</SPAN>
        <SPAN class="code-tag">&lt;controller field=<SPAN class="code-quote">&quot;controller&quot;</SPAN> value=<SPAN class="code-quote">&quot;false&quot;</SPAN>/&gt;</SPAN>
    <SPAN class="code-tag">&lt;/provides&gt;</SPAN>
<SPAN class="code-tag">&lt;/component&gt;</SPAN>
</PRE>
</DIV></DIV>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Annotations</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
@ServiceController(value=<SPAN class="code-quote">&quot;<SPAN class="code-keyword">false</SPAN>&quot;</SPAN>)
<SPAN class="code-keyword">private</SPAN> <SPAN class="code-object">boolean</SPAN> controller
</PRE>
</DIV></DIV></LI>
	<LI><A href="http://felix.apache.org/site/providing-osgi-services.html" class="external-link" rel="nofollow">Provided Service Handler</A></LI>
</UL>



<H1><A name="iPOJO-Reference-Card-Using%27arch%27"></A>Using 'arch'</H1>
<UL>
	<LI>Deploy the 'arch' command bundle (available for Felix and Equinox)</LI>
	<LI>Launch the 'arch' command in the OSGi Framework Shell
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Felix Shell</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
arch =&gt; displays instances name &amp; state (equivalent to arch \-instances)
arch -instance $instance_name =&gt; displays complete information about the instance $instance_name
arch -factories =&gt; display the list of available factories
arch -factory $factory_name =&gt; display complete information about the factory $factory_name
arch -handlers =&gt; list available handlers
</PRE>
</DIV></DIV>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Felix Gogo</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
ipojo:instances =&gt; displays instances name &amp; state (equivalent to arch \-instances)
ipojo:instance $instance_name =&gt; displays complete information about the instance $instance_name
ipojo:factories =&gt; display the list of available factories
ipojo:factory $factory_name =&gt; display complete information about the factory $factory_name
ipojo:handlers =&gt; list available handlers
</PRE>
</DIV></DIV></LI>
</UL>


<UL>
	<LI><A href="ipojo-arch-command.html" title="iPOJO-Arch-Command">iPOJO Arch Command</A></LI>
	<LI><A href="architecture-handler.html" title="Architecture Handler">Architecture Handler</A></LI>
</UL>


<H1><A name="iPOJO-Reference-Card-TemporalDependencies"></A>Temporal Dependencies</H1>
<UL>
	<LI>Temporal dependencies are injected in fields. When accessing to the service, the thread waits for the service availability. If a timeout is reached, a timeout policy is executed.</LI>
	<LI>Service objects can be injected as <TT>proxies</TT> and be given to collaborator objects.</LI>
	<LI>Temporal dependencies are implemented as an <EM>external handlers</EM>. To use them, deploy and start the temporal dependency handler bundle.</LI>
</UL>


<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>XML</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-xml">
<SPAN class="code-tag">&lt;iPOJO <SPAN class="code-keyword">xmlns:temporal</SPAN>=<SPAN class="code-quote">&quot;org.apache.felix.ipojo.handler.temporal&quot;</SPAN>&gt;</SPAN>
&lt;component
    className=<SPAN class="code-quote">&quot;my.Implementation&quot;</SPAN>&gt;

    <SPAN class="code-tag"><SPAN class="code-comment">&lt;!-- Temporal dependency configuration --&gt;</SPAN></SPAN>
    <SPAN class="code-tag">&lt;temporal:requires field=<SPAN class="code-quote">&quot;mytemporal&quot;</SPAN>/&gt;</SPAN>
    <SPAN class="code-tag">&lt;provides/&gt;</SPAN>
<SPAN class="code-tag">&lt;/component&gt;</SPAN>
<SPAN class="code-tag">&lt;/iPOJO&gt;</SPAN>
</PRE>
</DIV></DIV>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Annotations</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
<SPAN class="code-keyword">import</SPAN> org.apache.felix.ipojo.annotations.Component;
<SPAN class="code-keyword">import</SPAN> org.apache.felix.ipojo.handler.temporal.Requires;
<SPAN class="code-keyword">import</SPAN> org.apache.felix.ipojo.test.scenarios.annotations.service.FooService;

@Component
<SPAN class="code-keyword">public</SPAN> class Implementation {
    
    @Requires <SPAN class="code-comment">// org.apache.felix.ipojo.handler.temporal.Requires
</SPAN>    <SPAN class="code-keyword">private</SPAN> FooService mytemporal;
    
}
</PRE>
</DIV></DIV>
<DIV class="borderedTable"><DIV class="" align="center"><DIV class="table-wrap">
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh">Attribute name </TH>
<TH class="confluenceTh"> Required </TH>
<TH class="confluenceTh"> Default value </TH>
<TH class="confluenceTh">&nbsp;</TH>
</TR>
<TR>
<TD class="confluenceTd"> field </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> automatically detected with annotations </TD>
<TD class="confluenceTd"> specifies the field in which the service object will be injected </TD>
</TR>
<TR>
<TD class="confluenceTd"> timeout </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> 3000 ms </TD>
<TD class="confluenceTd"> specifies the timeout value (in ms). When the timeout is reached, the on timeout policy is executed </TD>
</TR>
<TR>
<TD class="confluenceTd"> onTimeout </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> Runtime Exception </TD>
<TD class="confluenceTd"> specifies the on timeout policy. Possible values are: <TT>null</TT>, <TT>nullable</TT>, <TT>empty</TT>, <EM>default-implementation</EM> (class name) </TD>
</TR>
<TR>
<TD class="confluenceTd"> specification </TD>
<TD class="confluenceTd"> only when using Collections </TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd"> specifies the required service specification. This attribute is required when the injected field is a Collection </TD>
</TR>
<TR>
<TD class="confluenceTd"> proxy </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> false </TD>
<TD class="confluenceTd"> enables/disables proxy injection. Service injected as proxies can be given to collaborators </TD>
</TR>
<TR>
<TD class="confluenceTd"> filter </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd">  no filter </TD>
<TD class="confluenceTd"> Filter use to discover matching filter. </TD>
</TR>
</TBODY></TABLE>
</DIV>
</DIV>
</DIV>
<UL>
	<LI><A href="temporal-service-dependency.html" title="Temporal Service Dependency">Temporal Service Dependency</A></LI>
</UL>



<H1><A name="iPOJO-Reference-Card-Sendingandreceivingevents"></A>Sending and receiving events</H1>

<H2><A name="iPOJO-Reference-Card-Receivingevents"></A>Receiving events</H2>

<UL>
	<LI>The event admin handler allows receiving events from the Event Admin.</LI>
	<LI>The event admin handler is implemented as an <EM>external handlers</EM>. To use it, deploy and start the event admin handler bundle and an implementation of the event admin service.</LI>
	<LI>Event (or data) are receive thanks to a callback method.</LI>
</UL>


<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>XML</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-xml">
&lt;ipojo
    <SPAN class="code-keyword">xmlns:ev</SPAN>=<SPAN class="code-quote">&quot;org.apache.felix.ipojo.handlers.event.EventAdminHandler&quot;</SPAN>&gt;
	<SPAN class="code-tag">&lt;component className=<SPAN class="code-quote">&quot;...MyComponent&quot;</SPAN>&gt;</SPAN>
		&lt;ev:subscriber
			name=<SPAN class="code-quote">&quot;mySubscriber&quot;</SPAN>
			callback=<SPAN class="code-quote">&quot;receive&quot;</SPAN>
			topics=<SPAN class="code-quote">&quot;foo&quot;</SPAN>/&gt;
	<SPAN class="code-tag">&lt;/component&gt;</SPAN>
<SPAN class="code-tag">&lt;/ipojo&gt;</SPAN>
</PRE>
</DIV></DIV>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Annotations</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
@Component
<SPAN class="code-keyword">public</SPAN> class MyComponent {
    
    @Subscriber(name=<SPAN class="code-quote">&quot;s1&quot;</SPAN>, data_key=<SPAN class="code-quote">&quot;data&quot;</SPAN>)
    <SPAN class="code-keyword">public</SPAN> void receive1(<SPAN class="code-object">Object</SPAN> foo) {
        <SPAN class="code-comment">// Nothing
</SPAN>    }
    
    @Subscriber(name=<SPAN class="code-quote">&quot;s2&quot;</SPAN>, topics=<SPAN class="code-quote">&quot;foo,bar&quot;</SPAN>, filter=<SPAN class="code-quote">&quot;(foo=<SPAN class="code-keyword">true</SPAN>)&quot;</SPAN>)
    <SPAN class="code-keyword">public</SPAN> void receive2(Event foo) {
        <SPAN class="code-comment">// Nothing
</SPAN>    }
    
    
    @Subscriber(name=<SPAN class="code-quote">&quot;s3&quot;</SPAN>, topics=<SPAN class="code-quote">&quot;foo&quot;</SPAN>, data_key=<SPAN class="code-quote">&quot;data&quot;</SPAN>, data_type=<SPAN class="code-quote">&quot;java.lang.<SPAN class="code-object">String</SPAN>&quot;</SPAN>)
    <SPAN class="code-keyword">public</SPAN> void receive3(<SPAN class="code-object">String</SPAN> foo) {
        <SPAN class="code-comment">// Nothing
</SPAN>    }
</PRE>
</DIV></DIV>
<DIV class="borderedTable"><DIV class="" align="center"><DIV class="table-wrap">
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh">Attribute name </TH>
<TH class="confluenceTh"> Required </TH>
<TH class="confluenceTh"> Default value </TH>
<TH class="confluenceTh">&nbsp;</TH>
</TR>
<TR>
<TD class="confluenceTd"> name </TD>
<TD class="confluenceTd"> yes </TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd"> specifies the name of the event subscriber, acting as a unique identifier. This name is used to configure event subscription in the instance configuration. </TD>
</TR>
<TR>
<TD class="confluenceTd"> callback (or method) </TD>
<TD class="confluenceTd"> yes <BR class="atl-forced-newline"> automatically detected with annotations </TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd"> specifies The name of the method called each time an event is received. This method takes only one parameter, of type <TT>org.osgi.service.event.Event</TT> by default, but this type can be overridden by defining the <TT>data-key</TT> and/or the <TT>data-type</TT> attributes. </TD>
</TR>
<TR>
<TD class="confluenceTd"> topics </TD>
<TD class="confluenceTd"> yes </TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd"> specifies the list (comma-separated-list) of the topics that the handler will listen to. Each event sent on a topic present in this list will be sent to the specified callback method. This parameter can be overridden by instances </TD>
</TR>
<TR>
<TD class="confluenceTd"> data-key <BR class="atl-forced-newline"> data_key when using annotations </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd"> specifies the data key used when you want to receive data events. This attribute's value is the key corresponding to the received data in the event's dictionary.<BR>
If you use this attribute, the parameter passed to the callback method is the the value associated to this key, not the whole event. This attribute is generally used with the <TT>data-type</TT> attribute to specify the received object type. If an event is received and it does not contain such a key, it is ignored (with a warning message).  </TD>
</TR>
<TR>
<TD class="confluenceTd"> data-type <BR class="atl-forced-newline"> data_type when using annotations </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> java.lang.Object </TD>
<TD class="confluenceTd"> specifies the type of objects (<TT>java.lang.Object</TT> by default) that the callback expects. It is used to determine the unique callback method (in case of multiple methods with the same name) and to check type compliance at event reception. Data events that are not corresponding to the specified type will be ignored (with a warning message).</TD>
</TR>
<TR>
<TD class="confluenceTd"> filter </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> no filter </TD>
<TD class="confluenceTd"> specifies the event LDAP filter used to filter incoming events before sending them to the callback. The syntax of this field is described in the OSGi EventAdmin Specification. If you don't specify a filter, all events sent on the listened topics will be considered.   </TD>
</TR>
</TBODY></TABLE>
</DIV>
</DIV>
</DIV>
<UL>
	<LI>Instance configuration
	<UL>
		<LI>event.topics : overrides <TT>topics</TT> attribute</LI>
		<LI>event.filter : overrides <TT>filter</TT> attribute</LI>
	</UL>
	</LI>
</UL>


<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Instance configuration</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-xml">
<SPAN class="code-tag">&lt;instance component=<SPAN class="code-quote">&quot;...MyComponent&quot;</SPAN>&gt;</SPAN>
		<SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;event.topics&quot;</SPAN>&gt;</SPAN>
			<SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;mySubscriber&quot;</SPAN> value=<SPAN class="code-quote">&quot;foo&quot;</SPAN>/&gt;</SPAN>
		<SPAN class="code-tag">&lt;/property&gt;</SPAN>
		<SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;event.filter&quot;</SPAN>&gt;</SPAN>
			&lt;property name=<SPAN class="code-quote">&quot;mySubscriber&quot;</SPAN>
				    value=<SPAN class="code-quote">&quot;|((arg=Minibar)(arg=Coconuts))&quot;</SPAN>/&gt;
		<SPAN class="code-tag">&lt;/property&gt;</SPAN>
	<SPAN class="code-tag">&lt;/instance&gt;</SPAN>
</PRE>
</DIV></DIV>

<UL>
	<LI><A href="event-admin-handlers.html" title="Event Admin Handlers">Event Admin Handlers</A></LI>
</UL>


<H2><A name="iPOJO-Reference-Card-Sendingevents"></A>Sending events</H2>

<UL>
	<LI>The event admin handler allows sending events to the Event Admin.</LI>
	<LI>The event admin handler is implemented as an <EM>external handlers</EM>. To use it, deploy and start the event admin handler bundle and an implementation of the event admin service.</LI>
	<LI>To send events, your code must contains a <TT>org.apache.felix.ipojo.handlers.event.publisher.Publisher</TT> field.</LI>
</UL>


<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>XML</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-xml">
&lt;ipojo
    <SPAN class="code-keyword">xmlns:ev</SPAN>=<SPAN class="code-quote">&quot;org.apache.felix.ipojo.handlers.event.EventAdminHandler&quot;</SPAN>&gt;
	<SPAN class="code-tag">&lt;component className=<SPAN class="code-quote">&quot;...MyComponent&quot;</SPAN>&gt;</SPAN>
		&lt;ev:publisher
			name=<SPAN class="code-quote">&quot;myPublisher&quot;</SPAN>
			field=<SPAN class="code-quote">&quot;m_publisher&quot;</SPAN>
			topics=<SPAN class="code-quote">&quot;bar,nuts&quot;</SPAN>/&gt;
	<SPAN class="code-tag">&lt;/component&gt;</SPAN>
	<SPAN class="code-tag">&lt;instance component=<SPAN class="code-quote">&quot;...MyComponent&quot;</SPAN>/&gt;</SPAN>
<SPAN class="code-tag">&lt;/ipojo&gt;</SPAN>
</PRE>
</DIV></DIV>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Annotations</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">

@Component
<SPAN class="code-keyword">public</SPAN> class MyComponent {
    <SPAN class="code-comment">// We use qualified names to avoid conflict.
</SPAN>    @org.apache.felix.ipojo.handlers.event.Publisher(name=<SPAN class="code-quote">&quot;p1&quot;</SPAN>, synchronous=<SPAN class="code-keyword">true</SPAN>)
    org.apache.felix.ipojo.handlers.event.publisher.Publisher publisher1;
    
    @org.apache.felix.ipojo.handlers.event.Publisher(name=<SPAN class="code-quote">&quot;p2&quot;</SPAN>, synchronous=<SPAN class="code-keyword">false</SPAN>, topics=<SPAN class="code-quote">&quot;foo,bar&quot;</SPAN>, data_key=<SPAN class="code-quote">&quot;data&quot;</SPAN>)
    org.apache.felix.ipojo.handlers.event.publisher.Publisher publisher2;
    
    @org.apache.felix.ipojo.handlers.event.Publisher(name=<SPAN class="code-quote">&quot;p3&quot;</SPAN>, synchronous=<SPAN class="code-keyword">true</SPAN>, topics=<SPAN class="code-quote">&quot;bar&quot;</SPAN>)
    org.apache.felix.ipojo.handlers.event.publisher.Publisher publisher3;

    <SPAN class="code-comment">// ...
</SPAN>
    <SPAN class="code-keyword">public</SPAN> void doSomething() {
        Dictionary e = <SPAN class="code-keyword">new</SPAN> Properties();
        <SPAN class="code-comment">//...
</SPAN>        <SPAN class="code-comment">// Fill out the event
</SPAN>
        <SPAN class="code-comment">// Send event
</SPAN>        publisher1.send(e);
    }
}
</PRE>
</DIV></DIV>

<UL>
	<LI><A href="event-admin-handlers.html" title="Event Admin Handlers">Event Admin Handlers</A></LI>
</UL>


<DIV class="borderedTable"><DIV class="" align="center"><DIV class="table-wrap">
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh">Attribute name </TH>
<TH class="confluenceTh"> Required </TH>
<TH class="confluenceTh"> Default value </TH>
<TH class="confluenceTh">&nbsp;</TH>
</TR>
<TR>
<TD class="confluenceTd"> name </TD>
<TD class="confluenceTd"> yes </TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd"> specifies the name of the event publisher, acting as a unique identifier. This name is used to configure event publishing in the instance configuration. </TD>
</TR>
<TR>
<TD class="confluenceTd"> field </TD>
<TD class="confluenceTd"> yes <BR class="atl-forced-newline"> automatically detected with annotations </TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd"> specifies The name of the field used to send events. The field is initialized at component instantiation time. The type of the field must be : <TT>org.apache.felix.ipojo.handlers.event.publisher.Publisher</TT>. </TD>
</TR>
<TR>
<TD class="confluenceTd"> topics </TD>
<TD class="confluenceTd"> yes </TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd"> specifies the list (comma-separated-list) of the topics on which events will be sent. This parameter can be overridden by instances </TD>
</TR>
<TR>
<TD class="confluenceTd"> data-key <BR class="atl-forced-newline"> data_key when using annotations </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> user.data </TD>
<TD class="confluenceTd"> specifies the data key used when you want to send data events.  This attribute's value is the key, in the event's dictionary, in which sent data are stored. When you use the <EM>sendData</EM> method of the Publisher, the given object is placed in the event dictionary, associated with the specified data-key.  </TD>
</TR>
<TR>
<TD class="confluenceTd"> synchronous </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd"> false </TD>
<TD class="confluenceTd"> specifies if event sending is synchronous or not.   </TD>
</TR>
</TBODY></TABLE>
</DIV>
</DIV>
</DIV>

<UL>
	<LI>Instance configuration
	<UL>
		<LI>event.topics : overrides <TT>topics</TT> attribute</LI>
	</UL>
	</LI>
</UL>


<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Instance configuration</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-xml">
<SPAN class="code-tag">&lt;instance component=<SPAN class="code-quote">&quot;...MyComponent&quot;</SPAN>&gt;</SPAN>
		<SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;event.topics&quot;</SPAN>&gt;</SPAN>
			<SPAN class="code-tag">&lt;property name=<SPAN class="code-quote">&quot;myPublisher&quot;</SPAN> value=<SPAN class="code-quote">&quot;foo&quot;</SPAN>/&gt;</SPAN>
		<SPAN class="code-tag">&lt;/property&gt;</SPAN>
	<SPAN class="code-tag">&lt;/instance&gt;</SPAN>
</PRE>
</DIV></DIV>

<H1><A name="iPOJO-Reference-Card-ExtenderPattern"></A>Extender Pattern</H1>
<UL>
	<LI>Allows implementing an <TT>Extender pattern</TT> without handling obscure details</LI>
	<LI>The extender pattern handler is implemented as an <EM>external handlers</EM>. To use it, deploy and start the external pattern handler bundle.</LI>
</UL>


<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>XML</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-xml">
<SPAN class="code-tag">&lt;ipojo <SPAN class="code-keyword">xmlns:extender</SPAN>=<SPAN class="code-quote">&quot;org.apache.felix.ipojo.extender&quot;</SPAN>&gt;</SPAN>
	&lt;component
		classname=<SPAN class="code-quote">&quot;org.apache.felix.ipojo.extender.Myextender&quot;</SPAN>&gt;
		
                <SPAN class="code-tag">&lt;!&mdash;Extender Pattern handler configuration --&gt;</SPAN>
		&lt;extender:extender 
                  extension=<SPAN class="code-quote">&quot;My-Extension&quot;</SPAN>
                  onArrival=<SPAN class="code-quote">&quot;onArrival&quot;</SPAN> 
                  onDeparture=<SPAN class="code-quote">&quot;onDeparture&quot;</SPAN> 
                /&gt;

		<SPAN class="code-tag">&lt;callback transition=<SPAN class="code-quote">&quot;invalidate&quot;</SPAN> method=<SPAN class="code-quote">&quot;stopping&quot;</SPAN> /&gt;</SPAN>
		<SPAN class="code-tag">&lt;callback transition=<SPAN class="code-quote">&quot;validate&quot;</SPAN> method=<SPAN class="code-quote">&quot;starting&quot;</SPAN> /&gt;</SPAN>
	<SPAN class="code-tag">&lt;/component&gt;</SPAN>
<SPAN class="code-tag">&lt;/ipojo&gt;</SPAN>

</PRE>
</DIV></DIV>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Annotations</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
@Component
@org.apache.felix.ipojo.extender.Extender(extension=<SPAN class="code-quote">&quot;My-Extension&quot;</SPAN>, onArrival=<SPAN class="code-quote">&quot;onArrival&quot;</SPAN>, onDeparture=<SPAN class="code-quote">&quot;onDeparture&quot;</SPAN>)
<SPAN class="code-keyword">public</SPAN> class Myextender {
    
    <SPAN class="code-keyword">public</SPAN> void onArrival(Bundle bundle, <SPAN class="code-object">String</SPAN> extension) {
        <SPAN class="code-comment">// handle matching bundle arrival
</SPAN>    }
    
    <SPAN class="code-keyword">public</SPAN> void onDeparture(Bundle bundle) {
        <SPAN class="code-comment">// handler matching bundle departure
</SPAN>    }
}
</PRE>
</DIV></DIV>
<DIV class="borderedTable"><DIV class="" align="center"><DIV class="table-wrap">
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh">Attribute name </TH>
<TH class="confluenceTh"> Required </TH>
<TH class="confluenceTh"> Default value </TH>
<TH class="confluenceTh">&nbsp;</TH>
</TR>
<TR>
<TD class="confluenceTd"> extension </TD>
<TD class="confluenceTd"> yes </TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd"> specifies the required extension (i.e. the required Manifest key) </TD>
</TR>
<TR>
<TD class="confluenceTd"> onArrival </TD>
<TD class="confluenceTd"> yes </TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd"> specifies the method called when a matching bundle arrives. The method receives the Bundle object and the extension value </TD>
</TR>
<TR>
<TD class="confluenceTd"> onDeparture </TD>
<TD class="confluenceTd"> yes </TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd"> specifies the method called when a matching bundle leaves. The method receives the Bundle object </TD>
</TR>
</TBODY></TABLE>
</DIV>
</DIV>
</DIV>
<UL>
	<LI><A href="extender-pattern-handler.html" title="Extender Pattern Handler">Extender Pattern Handler</A></LI>
</UL>



<H1><A name="iPOJO-Reference-Card-WhiteboardPattern"></A>Whiteboard Pattern</H1>
<UL>
	<LI>Allows implementing a <TT>Whiteboard pattern</TT> without handling obscure details</LI>
	<LI>The whiteboard pattern handler is implemented as an <EM>external handlers</EM>. To use it, deploy and start the whiteboard pattern handler bundle.</LI>
</UL>


<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>XML</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-xml">
<SPAN class="code-tag">&lt;ipojo <SPAN class="code-keyword">xmlns:wbp</SPAN>=<SPAN class="code-quote">&quot;org.apache.felix.ipojo.whiteboard&quot;</SPAN>&gt;</SPAN>
     &lt;component 
          classname=<SPAN class="code-quote">&quot;org.apache.felix.ipojo.test.MyWhiteBoardPattern&quot;</SPAN>
      &gt;
        &lt;wbp:wbp 
   	      filter=<SPAN class="code-quote">&quot;(my.property=1)&quot;</SPAN> 
              onArrival=<SPAN class="code-quote">&quot;onArrival&quot;</SPAN> 
              onDeparture=<SPAN class="code-quote">&quot;onDeparture&quot;</SPAN> 
              onModification=<SPAN class="code-quote">&quot;onModification&quot;</SPAN>
         /&gt;
       
         <SPAN class="code-tag">&lt;provides/&gt;</SPAN>
      <SPAN class="code-tag">&lt;/component&gt;</SPAN>
</PRE>
</DIV></DIV>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeHeader panelHeader" style="border-bottom-width: 1px;"><B>Annotations</B></DIV><DIV class="codeContent panelContent">
<PRE class="code-java">
@Component
@org.apache.felix.ipojo.whiteboard.Wbp(filter=<SPAN class="code-quote">&quot;(my.property=1)&quot;</SPAN>, 
        onArrival=<SPAN class="code-quote">&quot;onArrival&quot;</SPAN>, 
        onDeparture=<SPAN class="code-quote">&quot;onDeparture&quot;</SPAN>,
        onModification=<SPAN class="code-quote">&quot;onModification&quot;</SPAN>)
<SPAN class="code-keyword">public</SPAN> class WhiteBoardWIModification {
    
    <SPAN class="code-keyword">public</SPAN> void onArrival(ServiceReference ref) {
        <SPAN class="code-comment">// ...
</SPAN>    }
 
    <SPAN class="code-keyword">public</SPAN> void onDeparture(ServiceReference ref) {
        <SPAN class="code-comment">// ...
</SPAN>    }
    
    <SPAN class="code-keyword">public</SPAN> void onModification(ServiceReference ref) {
        <SPAN class="code-comment">// ...
</SPAN>    }

}
</PRE>
</DIV></DIV>

<DIV class="" align="center"><DIV class="table-wrap">
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh">Attribute name </TH>
<TH class="confluenceTh"> Required </TH>
<TH class="confluenceTh"> Default value </TH>
<TH class="confluenceTh">&nbsp;</TH>
</TR>
<TR>
<TD class="confluenceTd"> filter </TD>
<TD class="confluenceTd"> yes </TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd"> specifies LDAP filter used to detect required service providers </TD>
</TR>
<TR>
<TD class="confluenceTd"> onArrival </TD>
<TD class="confluenceTd"> yes </TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd"> specifies the method called when a matching service provider arrives. The method receives the ServiceReference object </TD>
</TR>
<TR>
<TD class="confluenceTd"> onDeparture </TD>
<TD class="confluenceTd"> yes </TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd"> specifies the method called when a matching service provider leaves. The method receives the ServiceReference object </TD>
</TR>
<TR>
<TD class="confluenceTd"> omModification </TD>
<TD class="confluenceTd"> no </TD>
<TD class="confluenceTd">&nbsp;</TD>
<TD class="confluenceTd"> specifies the method called when a matching service provider is modified and is still matching. The method receives the ServiceReference object </TD>
</TR>
</TBODY></TABLE>
</DIV>
</DIV>

<UL>
	<LI><A href="white-board-pattern-handler.html" title="White Board Pattern Handler">White Board Pattern Handler</A>
<BR class="atl-forced-newline">
<BR class="atl-forced-newline">

 </DIV>
        <IMG src="http://felix.apache.org/ipojo/site/footer.png" class="footer">
</DIV>

<SCRIPT type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</SCRIPT>
<SCRIPT type="text/javascript">
try{
var pageTracker = _gat._getTracker("UA-1518442-4");
pageTracker._trackPageview();
} catch(err) {}
</SCRIPT>
</LI>
</UL>

        <DIV class="timestamp" style="margin-top: 30px; font-size: 80%; text-align: right;">
Last modified by clement.escoffier on 2011-01-05 03:49:28.0
        </DIV>
        <DIV class="trademarkFooter">
Apache Felix, Felix, Apache, the Apache feather logo, and the Apache Felix project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners.
        </DIV>
    </DIV>
  </BODY>
</HTML>
