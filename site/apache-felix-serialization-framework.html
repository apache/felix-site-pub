
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<HTML>
  <HEAD>
    <TITLE>Apache Felix - Apache Felix Serialization Framework</TITLE>
    <LINK rel="stylesheet" href="http://felix.apache.org/site/media.data/site.css" type="text/css" media="all">
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8">
  </HEAD>
  <BODY>
    <DIV class="title"><DIV class="logo"><A href="http://felix.apache.org/site/index.html"><IMG border="0" alt="Apache Felix" src="http://felix.apache.org/site/media.data/logo.png"></A></DIV><DIV class="header"><A href="http://www.apache.org/"><IMG border="0" alt="Apache" src="http://felix.apache.org/site/media.data/apache.png"></A></DIV></DIV>
    <DIV class="menu">
<UL>
	<LI><A href="news.html" title="news">news</A></LI>
	<LI><A href="http://www.apache.org/licenses/" class="external-link" rel="nofollow">license</A></LI>
	<LI><A href="http://felix.apache.org/site/downloads.cgi" class="external-link" rel="nofollow">downloads</A></LI>
	<LI><A href="documentation.html" title="documentation">documentation</A></LI>
	<LI><A href="mailinglists.html" title="mailinglists">mailing lists</A></LI>
	<LI><A href="contributing.html" title="Contributing">contributing</A></LI>
	<LI><A href="http://www.apache.org/" class="external-link" rel="nofollow">asf</A></LI>
	<LI><A href="http://www.apache.org/security/" class="external-link" rel="nofollow">security</A></LI>
	<LI><A href="http://www.apache.org/foundation/sponsorship.html" class="external-link" rel="nofollow">sponsorship</A></LI>
	<LI><A href="http://www.apache.org/foundation/thanks.html" class="external-link" rel="nofollow">sponsors</A>
<!-- ApacheCon Ad -->
<IFRAME src="http://www.apache.org/ads/button.html" style="border-width:0; float: left" frameborder="0" scrolling="no" width="135" height="135"></IFRAME>
<P style="height: 100px">
<!-- ApacheCon Ad --></LI>
</UL>
    </DIV>
    <DIV class="main">
<H1><A name="ApacheFelixSerializationFramework-Problem"></A>Problem</H1>

<P>When you have an object graph that consists of objects that were created by different bundles, serializing and deserializing such a graph becomes a problem, since there is no single bundle that can &quot;see&quot; all (implementation) objects in the graph.</P>

<P>The problem manifests itself for example in Apache Wicket, but also in other applications. The serialization framework is a solution to this problem.</P>

<H1><A name="ApacheFelixSerializationFramework-Designdiscussionsketch"></A>Design discussion sketch</H1>

<P>Made at ApacheCon EU 2009, Robert, Martijn, Felix and Marcel produced the following design on the flipover:</P>

<P><SPAN class="image-wrap" style=""><A class="confluence-thumbnail-link 1024x1365" href="apache-felix-serialization-framework.data/sf_design.jpg"><IMG src="apache-felix-serialization-framework.data/sf_design.jpg.jpeg" style="border: 0px solid black"></A></SPAN></P>

<H1><A name="ApacheFelixSerializationFramework-Servicedesign"></A>Service design</H1>

<P>Basically, we need two services:</P>
<OL>
	<LI>The serialization service, that can serialize and deserialize an object graph to an output or input stream.</LI>
	<LI>Helpers that are used to (de)serialize specific objects.</LI>
</OL>


<H2><A name="ApacheFelixSerializationFramework-SerializationService"></A>Serialization Service</H2>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
<SPAN class="code-keyword">interface</SPAN> SerializationService {
    void serialize(<SPAN class="code-object">Object</SPAN> o, OutputStream s) <SPAN class="code-keyword">throws</SPAN> IOException, UnknownObjectException;
    <SPAN class="code-object">Object</SPAN> deserialize(InputStream s) <SPAN class="code-keyword">throws</SPAN> IOException, UnknownObjectException;
}
</PRE>
</DIV></DIV>

<P>The actual implementation of this service determines how objects are serialized.</P>

<H2><A name="ApacheFelixSerializationFramework-SerializationHelper"></A>Serialization Helper</H2>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
<SPAN class="code-keyword">interface</SPAN> SerializationHelper {
    <SPAN class="code-comment">// TODO
</SPAN>}
</PRE>
</DIV></DIV>

<P>We also discussed adding a special manifest header to a bundle to create a sort of declarative serialization helper. That way the bundle does not need to implement and register the service (if all of them use the same helper anyway).</P>

<P>Helpers in some way need to be linked to a specific serialization service (using an XML serialization with a JSON helper will probably not be what you want).</P>
        <DIV class="timestamp" style="margin-top: 30px; font-size: 80%; text-align: right;">
Last modified by marrs on 2009-03-27 09:46:23.0
        </DIV>
        <DIV class="trademarkFooter">
Apache Felix, Felix, Apache, the Apache feather logo, and the Apache Felix project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners.
        </DIV>
    </DIV>
  </BODY>
</HTML>
