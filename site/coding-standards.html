
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<HTML>
  <HEAD>
    <TITLE>Apache Felix - Coding Standards</TITLE>
    <LINK rel="stylesheet" href="http://felix.apache.org/site/media.data/site.css" type="text/css" media="all">
    <META http-equiv="Content-Type" content="text/html;charset=UTF-8">
  </HEAD>
  <BODY>
    <DIV class="title"><DIV class="logo"><A href="http://felix.apache.org/site/index.html"><IMG border="0" alt="Apache Felix" src="http://felix.apache.org/site/media.data/logo.png"></A></DIV><DIV class="header"><A href="http://www.apache.org/"><IMG border="0" alt="Apache" src="http://felix.apache.org/site/media.data/apache.png"></A></DIV></DIV>
    <DIV class="menu">
<UL>
	<LI><A href="news.html" title="news">news</A></LI>
	<LI><A href="http://www.apache.org/licenses/" class="external-link" rel="nofollow">license</A></LI>
	<LI><A href="http://felix.apache.org/site/downloads.cgi" class="external-link" rel="nofollow">downloads</A></LI>
	<LI><A href="documentation.html" title="documentation">documentation</A></LI>
	<LI><A href="mailinglists.html" title="mailinglists">mailing lists</A></LI>
	<LI><A href="contributing.html" title="Contributing">contributing</A></LI>
	<LI><A href="http://www.apache.org/" class="external-link" rel="nofollow">asf</A></LI>
	<LI><A href="http://www.apache.org/security/" class="external-link" rel="nofollow">security</A></LI>
	<LI><A href="http://www.apache.org/foundation/sponsorship.html" class="external-link" rel="nofollow">sponsorship</A></LI>
	<LI><A href="http://www.apache.org/foundation/thanks.html" class="external-link" rel="nofollow">sponsors</A>
<!-- ApacheCon Ad -->
<IFRAME src="http://www.apache.org/ads/button.html" style="border-width:0; float: left" frameborder="0" scrolling="no" width="135" height="135"></IFRAME>
<P style="height: 100px">
<!-- ApacheCon Ad --></LI>
</UL>
    </DIV>
    <DIV class="main">
<H1><A name="CodingStandards-Codingstandards"></A>Coding standards</H1>

<H2><A name="CodingStandards-GuidelinesSummary"></A>Guidelines Summary</H2>

<P>This style guide is intended to help the computer professional produce better Java programs. It presents a set of specific guidelines for using the features of Java in a disciplined manner. The goal is to develop high quality, reliable, reusable, portable software. For a number of reasons, no programming language can ensure the achievements of these desirable objectives on its own. Programming must be embedded in a disciplined development process that addresses a number of topics in a well managed way. The use of Java is one of those. It must conform to good programming practices be based on well established software engineering principles. This style guide is intended to bridge the gap between these principles and the actual practice of programming in Java.</P>

<P>Clear, readable, understandable source text eases program evolution, adaptation and maintenance. First, such source text is more likely to be correct and reliable. Second, effective code adaptation is a prerequisite to code reuse, a technique that has the potential for drastic reductions in system development costs. Easy adaptation requires thorough understanding of the software, and that is facilitated considerably by clarity. Finally, since maintenance (really evolution) is a costly process that continues throughout the life of a system, clarity plays a major role in keeping maintenance costs down. Over the entire life cycle, code has to be read and understood far more often than it is written; the investment of effort in writing readable, understandable code is thus well worthwhile. Many of the guidelines in this style guide are designed to promote clarity of the source text.</P>

<P>This style guide is intended for those involved in the development of real software systems written in Java. Different roles in a software project can exploit the style guide in different ways. The programmer can use it as a reference on good Java style. It can be used in code reviews as a common reference. Finally, lessons learned in real projects can be captured by extending the style guide.</P>

<H2><A name="CodingStandards-Classlayoutandcomments"></A>Class layout and comments</H2>

<H3><A name="CodingStandards-Filesandfilenames"></A>Files and filenames</H3>

<P>Files longer than 2000 lines are cumbersome and should be avoided.</P>

<H4><A name="CodingStandards-Filenames"></A>File names</H4>

<P>The file must be named after the class it represents. As for most cases each file contains only one class, this is an easy naming convention. For nested or inner classes the name of the main class must be the name of the file. As names in Java are case-sensitive, the filename is case-sensitive also.</P>

<H4><A name="CodingStandards-Fileorganization"></A>File organization</H4>

<P>Each Java source file contains a single class or interface. Of course, this excludes inner classes as these must be defined without an (outer) class, and thus in the same file.</P>

<P>Java source files have the following ordering:</P>

<UL class="alternate" type="square">
	<LI>Beginning comments</LI>
	<LI>Package and import statements</LI>
	<LI>Class and interface declarations</LI>
</UL>


<H4><A name="CodingStandards-Beginningcomments"></A>Beginning comments</H4>

<P>All source files must begin with the comments shown in the following code sample.</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
/*
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with <SPAN class="code-keyword">this</SPAN> work <SPAN class="code-keyword">for</SPAN> additional information
 * regarding copyright ownership.  The ASF licenses <SPAN class="code-keyword">this</SPAN> file
 * to you under the Apache License, Version 2.0 (the
 * <SPAN class="code-quote">&quot;License&quot;</SPAN>); you may not use <SPAN class="code-keyword">this</SPAN> file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http:<SPAN class="code-comment">//www.apache.org/licenses/LICENSE-2.0
</SPAN> *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * <SPAN class="code-quote">&quot;AS IS&quot;</SPAN> BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License <SPAN class="code-keyword">for</SPAN> the
 * specific language governing permissions and limitations
 * under the License.
 */
</PRE>
</DIV></DIV>

<P>Note that this comment part is not according to the JavaDoc style (See: How to write doc comments for JavaDoc - Sun Microsystems, Inc.) as this is file specific information that is not relevant in generated API documentation.</P>

<H5><A name="CodingStandards-PackageandimportStatements"></A>Package and import Statements</H5>

<P>The first non-comment line of most Java source files is a package statement. After an empty line import statements can follow. For example:</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
<SPAN class="code-keyword">package</SPAN> org.apache.felix.whatever.<SPAN class="code-keyword">this</SPAN>.is;

<SPAN class="code-keyword">import</SPAN> java.awt.Frame;
<SPAN class="code-keyword">import</SPAN> java.io.InputStream;
<SPAN class="code-keyword">import</SPAN> java.util.Vector;
</PRE>
</DIV></DIV>

<P>A few notes must be made here:</P>
<OL>
	<LI>Package rules.<BR>
  When not using an explicit package statement in your code the code still is in a package, the default package. This easily results in name clashes and as package naming should be a part of the design, always use an explicit package name. For naming rules of packages see 3.4 Naming conventions.</LI>
	<LI>Import statements need to be explicit in order to overcome name clashes.<BR>
  They should be grouped by name. When the number of import statements of the same package exceeds the 'readability' limit (please use common sense), then import the complete package by adding '.*'.</LI>
	<LI>Import order.<BR>
  First in this section should be the standard Java imports like: java.lang.Throwable. Second should be the Java extensions (i.e. javax), third, the third party stuff. Finally the project-specific imports should be added.</LI>
</OL>


<H5><A name="CodingStandards-ClassandinterfaceDeclarations"></A>Class and interface Declarations</H5>

<P>The following comment block is an example for the comment that belongs to the declaration of a class or an interface. The combination of JavaDoc syntax and keywords that are expanded by the source integrity tool result in the following block:</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
/**
 * This class is not really a class, because <SPAN class="code-keyword">this</SPAN> file is just
 * a template that shows how the file header and class header
 * should look like.
 *
 * @author &lt;a href=<SPAN class="code-quote">&quot;mailto:dev@felix.apache.org&quot;</SPAN>&gt;Felix Project Team&lt;/a&gt;
 */
</PRE>
</DIV></DIV>

<P>The following table describes the parts of a class or interface declaration, in the order that they should appear.</P>

<DIV class="table-wrap">
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh"> Part of Class/Interface Declaration </TH>
<TH class="confluenceTh"> Notes </TH>
</TR>
<TR>
<TD class="confluenceTd">Class/Interface documentation</TD>
<TD class="confluenceTd">According to comment block as shown above.</TD>
</TR>
<TR>
<TD class="confluenceTd">Class or interface statement</TD>
<TD class="confluenceTd">&nbsp;</TD>
</TR>
<TR>
<TD class="confluenceTd">Class (static) variables</TD>
<TD class="confluenceTd">These should be grouped by functionality rather than by scope.</TD>
</TR>
<TR>
<TD class="confluenceTd">Instance variables</TD>
<TD class="confluenceTd">These should be grouped by functionality rather than by scope.</TD>
</TR>
<TR>
<TD class="confluenceTd">Constructors</TD>
<TD class="confluenceTd">Start with the default constructor if any.</TD>
</TR>
<TR>
<TD class="confluenceTd">Methods that belong to the class (see also 2.1.3.4 Class methods versus specific interface methods and event methods)</TD>
<TD class="confluenceTd">These methods should also be grouped by functionality rather than by scope or accessibility. E.g. a private class method can be in between two public instance methods. The goal is to make reading and understanding the code easier. When implementing an interface, group the methods that are part of the interface.</TD>
</TR>
<TR>
<TD class="confluenceTd">Methods of interfaces that are implemented by the class.</TD>
<TD class="confluenceTd">Automatically grouped by functionality if grouped by interface.</TD>
</TR>
<TR>
<TD class="confluenceTd">Inner classes</TD>
<TD class="confluenceTd">As they are only visible within their top-level class, they are placed at the bottom of the file.</TD>
</TR>
</TBODY></TABLE>
</DIV>


<H3><A name="CodingStandards-Indentation"></A>Indentation</H3>

<P>Four spaces should be used as unit of indentation. Use spaces or let your editor convert tabs to spaces as some editors might show the tabs different than they were intended! Tabs must be set exactly every 4 spaces.</P>

<H4><A name="CodingStandards-Linelength"></A>Line length</H4>

<P>There is no explicit limit for the length of a line. Make sure that the flow of the code is clear and that, when printing the file, it is well formed when using a reasonable font. A reasonable length would be around 80 characters.</P>

<H4><A name="CodingStandards-Wrappinglines"></A>Wrapping lines</H4>

<P>When an expression will not fit on a single line, break it according to these general principles:</P>
<UL class="alternate" type="square">
	<LI>break after a comma;</LI>
	<LI>break before an operator;</LI>
	<LI>prefer higher level breaks to lower level breaks;</LI>
	<LI>align the new line with the beginning of the expression after the assignment;</LI>
	<LI>if the above rules lead to confusing code or to code that's squished up against the right margin, please use common sense.</LI>
</UL>


<P>Some examples breaking an arithmetic expression. The first is preferred, since the break occurs outside the parenthesised expression:</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
longName1 = longName2 * (longName3 + longName4 - longName5)
    + 4; <SPAN class="code-comment">// preferred
</SPAN>longName1 = longName2 * (longName3 + longName4 
    - longName5) + 4;
</PRE>
</DIV></DIV>

<H3><A name="CodingStandards-Comment"></A>Comment</H3>

<H4><A name="CodingStandards-Commentstyles"></A>Comment styles</H4>

<P>The Java language supports three different kinds of comments:</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
<SPAN class="code-comment">// text </SPAN>
</PRE>
</DIV></DIV>

<P>The compiler ignores everything from // to the end of the line. Use this style when adding a description or some kind of explanation at the same line of code. </P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
/* text */ 
</PRE>
</DIV></DIV>

<P>The compiler ignores everything from /* to */. The next documentation style is preferred.</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
/** Documentation. */ 
</PRE>
</DIV></DIV>

<P>This indicates a documentation comment (doc comment, for short). The compiler ignores this kind of comment, just like it ignores comments that use /* and */. The JDK JavaDoc tool uses doc comments when preparing automatically generated documentation (See: JavaDoc keywords and HTML tags). But JavaDoc only uses this documentation when it occurs at an expected position in the file like the class definition or a member declaration. </P>

<H4><A name="CodingStandards-Blockcomments"></A>Block comments</H4>

<P>Block comments are used to provide English descriptions of the contents of files, the task of methods and the description of data structures and algorithms. Block comments should be used at the beginning of each file and before each method. They can also be used in other places, such as within methods.</P>

<P>For a description of class comment see 2.1.3.3 Class and Interface Declarations. A method block comment looks as follows:</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
/**
 * Position the splitter location at a specified position.
 * This method can <SPAN class="code-keyword">for</SPAN> instance be used when the last position
 * is stored as a preference setting <SPAN class="code-keyword">for</SPAN> the user.
 *
 * @param position  New position of divider, defined in pixels
 *     from the left of the containing window
 * @see com.sun.java.swing.JSplitPane
 * @exception org.apache.felix.player.PositionException
 *     Whenever an invalid position is passed.
 */
<SPAN class="code-keyword">public</SPAN> void setSplitterLocation(<SPAN class="code-object">int</SPAN> position) <SPAN class="code-keyword">throws</SPAN> PositionException
</PRE>
</DIV></DIV>

<H4><A name="CodingStandards-JavaDockeywordsandHTMLtags"></A>JavaDoc keywords and HTML tags</H4>

<P>For class headers, method headers and member variables JavaDoc is used in order to generate API documentation from the source later on (See: JavaDoc homepage - Sun Microsystems, Inc.).<BR>
A few specific JavaDoc keywords are:</P>

<DIV class="table-wrap">
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh">Keyword</TH>
<TH class="confluenceTh">Short description</TH>
</TR>
<TR>
<TD class="confluenceTd">@version</TD>
<TD class="confluenceTd">Can be used to label a specific version of a package or application so the documentation shows this version number also.</TD>
</TR>
<TR>
<TD class="confluenceTd">@author</TD>
<TD class="confluenceTd">The name entered here is shown as the author.</TD>
</TR>
<TR>
<TD class="confluenceTd">@param</TD>
<TD class="confluenceTd">Used to define one parameter and describe this parameter.</TD>
</TR>
<TR>
<TD class="confluenceTd">@see</TD>
<TD class="confluenceTd">When there are similarities with another class this tag is used to offer the reader a hyperlink to the mentioned class.</TD>
</TR>
<TR>
<TD class="confluenceTd">@exception or @throws</TD>
<TD class="confluenceTd">Offered as hyperlink to the exception that can be thrown by a method.</TD>
</TR>
<TR>
<TD class="confluenceTd">@return</TD>
<TD class="confluenceTd">Return value of a method</TD>
</TR>
</TBODY></TABLE>
</DIV>


<P>Some HTML-tags that can be used in order to make the comment blocks more readable:</P>

<DIV class="table-wrap">
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh">Tag</TH>
<TH class="confluenceTh">Short description</TH>
</TR>
<TR>
<TD class="confluenceTd">&lt;p&gt;</TD>
<TD class="confluenceTd">New paragraph.</TD>
</TR>
<TR>
<TD class="confluenceTd">&lt;br&gt;</TD>
<TD class="confluenceTd">Break, a carriage return. For separation of two paragraphs, usage of &lt;p&gt; is preferred.</TD>
</TR>
<TR>
<TD class="confluenceTd">&lt;ul&gt;&lt;li&gt;&lt;/li&gt;&lt;/ul&gt;</TD>
<TD class="confluenceTd">Unordered list of items; each item should start with a &lt;li&gt; tag. By most browsers, this is formatted as a bulleted list.</TD>
</TR>
<TR>
<TD class="confluenceTd">&lt;code&gt;&lt;/code&gt;</TD>
<TD class="confluenceTd">Code samples; use this when refering to class names, method names, parameter names, etc.</TD>
</TR>
<TR>
<TD class="confluenceTd">&lt;pre&gt;&lt;/pre&gt;</TD>
<TD class="confluenceTd">Preformatted text. Use these tags to protect figures and schemas &quot;drawn&quot; in Ascii, against formatting by the browser (which normally ignores whitespace and line breaks)</TD>
</TR>
<TR>
<TD class="confluenceTd">&lt;dl&gt;&lt;dt&gt;&lt;/dt&gt;&lt;dd&gt;&lt;/dd&gt;&lt;/dl&gt;</TD>
<TD class="confluenceTd">Definition lists; &lt;dt&gt; specifies the term that is defined and &lt;dd&gt; the definition of this term. Not frequently used.</TD>
</TR>
</TBODY></TABLE>
</DIV>


<P>Note: there is no need to embed the parameter name in the @param tag in &lt;code&gt; tags; this is done by javadoc automatically. The same holds for the exception name in the @exception or @throws tag. In the clarifying text however, use the &lt;code&gt; tags when refering to parameter names etc. The example below shows the &lt;code&gt; tag being used for the array parameter in the text, but not in its definition. </P>

<P>Example:</P>
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
/**
 * Prints a range from an object array. The range
 * is specified by the first element to print, and
 * ranges to the last element of the array.
 *
 * @param array contains the objects to print
 * @param first index of first element in 
 *     the &lt;code&gt;array&lt;/code&gt; to print
 */
<SPAN class="code-keyword">public</SPAN> void printRange(<SPAN class="code-object">Object</SPAN>[] array, <SPAN class="code-object">int</SPAN> first)
</PRE>
</DIV></DIV>

<H2><A name="CodingStandards-Javasyntaxanditslayout"></A>Java syntax and its layout</H2>

<H3><A name="CodingStandards-Declarations"></A>Declarations</H3>

<P>When declaring a variable or method make the accessibility as restrictive as possible. When using multiple keywords use the following ordering of keywords:</P>

<OL>
	<LI>accessibility<BR>
  Start with the accessibility as it makes clear if the method or variable is reachable at all.</LI>
	<LI>static (if applicable)</LI>
	<LI>final (if applicable)</LI>
	<LI>return type (methods only) or type (for variables)<BR>
  The type is for readability as close as possible to the name.</LI>
</OL>


<P>This order is also compatible with the order that is used in Java for the main() method. This results in following sequence:</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
<SPAN class="code-comment">// A familiar one:
</SPAN><SPAN class="code-keyword">public</SPAN> <SPAN class="code-keyword">static</SPAN> void main(<SPAN class="code-object">String</SPAN>[] args) {}
<SPAN class="code-keyword">private</SPAN> <SPAN class="code-keyword">static</SPAN> <SPAN class="code-object">String</SPAN> m_lastCreated = <SPAN class="code-keyword">null</SPAN>;
<SPAN class="code-keyword">private</SPAN> <SPAN class="code-keyword">static</SPAN> <SPAN class="code-keyword">final</SPAN> <SPAN class="code-object">int</SPAN> RED = 4711;
</PRE>
</DIV></DIV>

<H4><A name="CodingStandards-Numberperline"></A>Number per line</H4>

<P>One declaration per line is recommended since it encourages commenting and it does not lead to confusing code. It also is more clear about the explicit initialization of variables as discussed in Initialization.</P>

<P>Example:</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
<SPAN class="code-object">int</SPAN> level = 0;           <SPAN class="code-comment">// level where user enters the system
</SPAN><SPAN class="code-object">int</SPAN> horizontalSize = 0;  <SPAN class="code-comment">// horizontal size of current level layer</SPAN>
</PRE>
</DIV></DIV>

<P>is preferred over:</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
<SPAN class="code-object">int</SPAN> level, horizontalSize; <SPAN class="code-comment">// level and size of current level layer</SPAN>
</PRE>
</DIV></DIV>

<H4><A name="CodingStandards-Placement"></A>Placement</H4>

<P>In a method, declare local variables just before they are needed. This overcomes the problem of a big list of parameters at the beginning of a method and the use of a variable becomes more clearly in the context of the code, .e.g. its initialization.</P>

<H4><A name="CodingStandards-Initialization"></A>Initialization</H4>

<P>The initialization of class variables is strictly not necessary because of the default initialization that takes place for these kinds of members. For some types, e.g. Booleans, this requires detailed knowledge of all the default values so it is more clear and explicit to initialize each member. <BR>
Variables that are used and declared within methods must always be initialized explicitly (the compiler will generate an error when you forget this).</P>

<H4><A name="CodingStandards-ClassandInterfaceDeclarations"></A>Class and Interface Declarations</H4>

<P>When coding Java classes and interfaces, the following formatting rules should be followed:</P>

<UL class="alternate" type="square">
	<LI>no space between a method and its parameter list</LI>
	<LI>&quot;{&quot; is on a line by itself indented to match its corresponding opening statetment, except when it is a null statement, in which case the &quot;{&quot; should appear on the same line as the opening statement</LI>
	<LI>&quot;}&quot; starts a line by itself indented to match its corresponding opening statement, except when it is a null statement, in which the case the &quot;}&quot; should appear immediately after the &quot;{&quot;.</LI>
</UL>


<P>Example:</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
class ShipmoTrial <SPAN class="code-keyword">extends</SPAN> Trial
{
    <SPAN class="code-object">int</SPAN> m_index = 0;

    ShipmoTrial(<SPAN class="code-object">int</SPAN> index)
    {
        m_index = index;
    }

    void emptyMethod() {}
}
</PRE>
</DIV></DIV>

<H3><A name="CodingStandards-Statements"></A>Statements</H3>

<H4><A name="CodingStandards-Simplestatements"></A>Simple statements</H4>

<P>Each line should contain at most one statement.</P>

<P>Example:</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
<SPAN class="code-comment">// Do not use <SPAN class="code-keyword">this</SPAN>
</SPAN>argv++; argc++;
</PRE>
</DIV></DIV>

<H4><A name="CodingStandards-Compoundstatements"></A>Compound statements</H4>

<P>Compound statements are statements that contain lists of statements enclosed in braces (&quot;{...}&quot;):</P>

<UL class="alternate" type="square">
	<LI>The enclosed statements should be indented one more level than the compound statement.</LI>
	<LI>The opening brace should be at the end of the line that begins the compound statement; the closing brace should begin a line and be indented to the beginning of the compound statement.</LI>
	<LI>Braces are used around all statements, even single statements, when they are part of a control structure, such as a if-else or for statement. This makes it easier to add statements without accidentally introducing bugs due to forgetting to add braces.</LI>
</UL>


<H4><A name="CodingStandards-if%2Cifelse%2Cifelseifelsestatements"></A>if, if-else, if else-if else statements</H4>

<P>There are a lot of nested possibilities for if-else constructions. All these variations can be programmed in very cryptic ways that easily and often will lead to buggy code. By being more explicit in the used coding style a lot of confusion can be taken away.</P>

<P>Note: When using only one statement in a compound block brackets are optional. It can be a good practice to use always brackets because mistakes can be made easily when adding a second statement and brackets are forgotten.</P>

<P>The following example illustrates the correct use of brackets in a few different if-then-else constructions:</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
<SPAN class="code-keyword">if</SPAN> (condition)
{
    statement1;
    statement2;
}
<SPAN class="code-keyword">else</SPAN>
{
    statement3;
}

<SPAN class="code-keyword">if</SPAN> (condition)
{
    statement1;
    statement2;
}
<SPAN class="code-keyword">else</SPAN> <SPAN class="code-keyword">if</SPAN> (condition1)
{
    statement3;
    statement4;
}
<SPAN class="code-keyword">else</SPAN>
{
    statement5;
    statement6;
}
</PRE>
</DIV></DIV>

<P>Note that in the example the else if construction is started at a new line so the statement can not be overlooked.</P>

<H4><A name="CodingStandards-switch"></A>switch</H4>

<P>When using a switch statement use following guidelines:</P>

<UL class="alternate" type="square">
	<LI>Every switch statement should include a default case. The break in the default case is redundant, but it prevents a fall-through error if later another case is added.</LI>
	<LI>The so-called fall-through construction should be avoided. Only when there are good reasons to use it, make sure that  it is very clear that a fall-through is used (comment it).</LI>
</UL>


<P>The next example shows the sample code that uses the guidelines for a switch statement:</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
<SPAN class="code-keyword">switch</SPAN> (condition)
{
    <SPAN class="code-keyword">case</SPAN> A:
        statements;
        <SPAN class="code-comment">// falls through here!!
</SPAN>    <SPAN class="code-keyword">case</SPAN> B:
        statements;
        <SPAN class="code-keyword">break</SPAN>;
    <SPAN class="code-keyword">default</SPAN>:
        statements;
        <SPAN class="code-keyword">break</SPAN>;
}
</PRE>
</DIV></DIV>

<H4><A name="CodingStandards-trycatch"></A>try - catch</H4>

<P>A try - catch statement should have the following format:</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
<SPAN class="code-keyword">try</SPAN>
{
    statements;
} 
<SPAN class="code-keyword">catch</SPAN> (ExceptionClass ex)
{
    statements;
}
</PRE>
</DIV></DIV>

<P>When using finally to add code that always will be executed this will look like:</P>

<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
<SPAN class="code-keyword">try</SPAN>
{
    statements;
}
<SPAN class="code-keyword">catch</SPAN> (ExceptionClass ex)
{
    statements;
}
<SPAN class="code-keyword">finally</SPAN>
{
    statements;
}
</PRE>
</DIV></DIV>

<P>Note that the catch and the finally start at a new line in order to be compliant to the guidelines for if-then-else statements.</P>

<H3><A name="CodingStandards-WhiteSpace"></A>White Space</H3>

<H4><A name="CodingStandards-Blanklines"></A>Blank lines</H4>

<P>Blank lines improve readability by setting of sections of code that are logically related.</P>

<P>Two blank lines should always be used in the following circumstances:</P>

<UL class="alternate" type="square">
	<LI>between class and interface definitions;</LI>
	<LI>between a group of methods that belong together (by its functionality or because they are part of the same interface).</LI>
</UL>


<P>One blank line should always be used in the following circumstances:</P>

<UL class="alternate" type="square">
	<LI>between methods;</LI>
	<LI>before a block or single line comment;</LI>
	<LI>between logical sections inside a method to improve readability.</LI>
</UL>


<H4><A name="CodingStandards-Blankspaces"></A>Blank spaces</H4>

<P>Blank spaces should be used in the following circumstances:</P>

<UL class="alternate" type="square">
	<LI>A keyword followed by a parenthesis should be separated by a space.
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
<SPAN class="code-keyword">while</SPAN> (ready == <SPAN class="code-keyword">false</SPAN>)
{
	...
}
</PRE>
</DIV></DIV>
<P>Note that blanks should not be used between a method call and its opening parenthesis. This helps to distinguish keywords from function calls.</P></LI>
	<LI>Blanks should appear after commas in argument lists.</LI>
	<LI>All binary operators except &quot;.&quot; should be separated from their operands by spaces. Blanks should never separate unary operators such as unary minus, increment(&quot;++&quot;) and decrement(&quot;--&quot;) from their operands.
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
a += c + d;
a = (a + b) / (c * d);
xCoord++;
</PRE>
</DIV></DIV></LI>
	<LI>The expressions in a for statement should be separated by blanks.
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
<SPAN class="code-keyword">for</SPAN> (expr1; cond1; expr2)
</PRE>
</DIV></DIV></LI>
	<LI>Casts should be followed by a blank.
<DIV class="code panel" style="border-width: 1px;"><DIV class="codeContent panelContent">
<PRE class="code-java">
myInstance.doIt((TreeFrame) frame);
</PRE>
</DIV></DIV></LI>
</UL>


<H3><A name="CodingStandards-Namingconventions"></A>Naming conventions</H3>

<P>Naming conventions make programs more understandable by making them easier to read. They can also give information about the function of the identifier.</P>

<DIV class="table-wrap">
<TABLE class="confluenceTable"><TBODY>
<TR>
<TH class="confluenceTh">Identifier Type</TH>
<TH class="confluenceTh">Rules for Naming</TH>
<TH class="confluenceTh">Examples</TH>
</TR>
<TR>
<TD class="confluenceTd">Classes or inner classes</TD>
<TD class="confluenceTd">Class names should be nouns, in mixed case with the first letter of each word capitalised. Try to keep your class names simple and descriptive. Use whole words and avoid acronyms and abbreviations.</TD>
<TD class="confluenceTd">class Raster;<BR class="atl-forced-newline">class TreeFrame;</TD>
</TR>
<TR>
<TD class="confluenceTd">Interfaces</TD>
<TD class="confluenceTd">Interface names should be capitalized like class names.</TD>
<TD class="confluenceTd">interface Enumeration;</TD>
</TR>
<TR>
<TD class="confluenceTd">Methods</TD>
<TD class="confluenceTd">Methods should be verbs in mixed case with the first letter lowercase. Within each method name capital letters separate words. Property methods or get-set methods are used as follows:<BR>
When a method is used to get a value start the method name with 'get'. When a method is used to set a value start the method name with 'set'.</TD>
<TD class="confluenceTd">run(); <BR class="atl-forced-newline">runFast(); <BR class="atl-forced-newline">setBackground();</TD>
</TR>
<TR>
<TD class="confluenceTd">Variables (except for (constant) static final variables and member variables)</TD>
<TD class="confluenceTd">All variables are in mixed case with a lowercase first letter. Words are separated by capital letters.</TD>
<TD class="confluenceTd">int index;<BR class="atl-forced-newline">float myWidth;</TD>
</TR>
<TR>
<TD class="confluenceTd">Member variables</TD>
<TD class="confluenceTd">The same capitalisation as for normal variables prefixed with 'm_'.</TD>
<TD class="confluenceTd">int m_index;<BR class="atl-forced-newline">float m_myWidth;</TD>
</TR>
<TR>
<TD class="confluenceTd">Constant (static final) variables</TD>
<TD class="confluenceTd">Names should be all uppercase with words separated by underscores (&quot;_&quot;).</TD>
<TD class="confluenceTd">public static final int BLACK = 99;</TD>
</TR>
<TR>
<TD class="confluenceTd">Exceptions</TD>
<TD class="confluenceTd">Like class names; always ending in &quot;Exception&quot;</TD>
<TD class="confluenceTd">InputException</TD>
</TR>
<TR>
<TD class="confluenceTd">Packages</TD>
<TD class="confluenceTd">Lowercase only; avoid lengthy package names; always start with org.apache.felix.</TD>
<TD class="confluenceTd">org.apache.felix.demo.bundle</TD>
</TR>
</TBODY></TABLE>
</DIV>


<P>Note: All Java identifiers are case sensitive.</P>

<H2><A name="CodingStandards-References"></A>References</H2>

<UL class="alternate" type="square">
	<LI>Java Code Conventions - Sun Microsystems, Inc.<BR>
  No ref. number, only hyperlink: <A href="http://java.sun.com/docs/codeconv/" class="external-link" rel="nofollow">http://java.sun.com/docs/codeconv/</A></LI>
	<LI>How to Write Doc Comments for JavaDoc - Sun Microsystems, Inc.<BR>
  <A href="http://java.sun.com/products/jdk/javadoc/writingdoccomments.html" class="external-link" rel="nofollow">http://java.sun.com/products/jdk/javadoc/writingdoccomments.html</A></LI>
	<LI>JavaDoc homepage - Sun Microsystems, Inc.<BR>
  <A href="http://java.sun.com/products/jdk/javadoc/" class="external-link" rel="nofollow">http://java.sun.com/products/jdk/javadoc/</A></LI>
	<LI><A href="https://issues.apache.org/jira/secure/attachment/12419890/Apache%20Felix%20Eclipse%20Template.xml" class="external-link" rel="nofollow">Eclipse formatting template</A>.</LI>
</UL>

        <DIV class="timestamp" style="margin-top: 30px; font-size: 80%; text-align: right;">
Last modified by fdiotalevi on 2009-09-17 12:41:49.0
        </DIV>
        <DIV class="trademarkFooter">
Apache Felix, Felix, Apache, the Apache feather logo, and the Apache Felix project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners.
        </DIV>
    </DIV>
  </BODY>
</HTML>
